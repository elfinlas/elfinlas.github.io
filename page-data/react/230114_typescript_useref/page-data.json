{"componentChunkName":"component---src-templates-post-jsx","path":"/react/230114_typescript_useref/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab"}},"markdownRemark":{"id":"25df1295-b980-5360-a8bc-26af0460effe","excerpt":"노마드코더에서 몇 가지 학습을 하다가... 요새 기본기 부족을 느껴서 다시 React의 기본부터 한번 쭉 훝기로 하였다. 그러던 중 노마드코더 강의에서 hook 쪽을 듣는데 여기는 다 JS로 코드가 구성되어 있었다. Typescript…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1231c0073a9bc0704f04fff13d13ffe0/5a190/thumbnail_react.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.423312883435585%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVR42nWQyQrCQAxA+zedZGa62FZblKJWcAGXgktVEIqe/AAFPXjyIoK/bIYitIOFd0hC3iQTA4VVQdrIJXLBKaCUS245BBJFpYRR1gDQ6nTDLG+tDiip4nDXA5MRjIF6tFZWvhNuj4PHJ7m93N7QG83j8zXc5MEi86fLZroXjQBQ1Mhc0szk/u5fnk6cWFHsT9Jod6JiMFv741S4Xnm+tjbZbRpIoFApfQRMAAYUI82sbm7oB+NSCdQqbIX8obX9l4uD13Rr8hcL7lIfd1tPwAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"thumbnail\"\n        title=\"\"\n        src=\"/static/1231c0073a9bc0704f04fff13d13ffe0/a6d36/thumbnail_react.png\"\n        srcset=\"/static/1231c0073a9bc0704f04fff13d13ffe0/222b7/thumbnail_react.png 163w,\n/static/1231c0073a9bc0704f04fff13d13ffe0/ff46a/thumbnail_react.png 325w,\n/static/1231c0073a9bc0704f04fff13d13ffe0/a6d36/thumbnail_react.png 650w,\n/static/1231c0073a9bc0704f04fff13d13ffe0/5a190/thumbnail_react.png 800w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"노마드코더에서-몇-가지-학습을-하다가\" style=\"position:relative;\"><a href=\"#%EB%85%B8%EB%A7%88%EB%93%9C%EC%BD%94%EB%8D%94%EC%97%90%EC%84%9C-%EB%AA%87-%EA%B0%80%EC%A7%80-%ED%95%99%EC%8A%B5%EC%9D%84-%ED%95%98%EB%8B%A4%EA%B0%80\" aria-label=\"노마드코더에서 몇 가지 학습을 하다가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>노마드코더에서 몇 가지 학습을 하다가...</h1>\n<p>요새 기본기 부족을 느껴서 다시 React의 기본부터 한번 쭉 훝기로 하였다.<br>\n그러던 중 노마드코더 강의에서 hook 쪽을 듣는데 여기는 다 JS로 코드가 구성되어 있었다.</p>\n<p>Typescript로 진행하는 나로써는 이 부분을 각 타입에 맞게끔 처리하면서 진행을 했다.<br>\n그 중 <strong>useRef</strong> 부분에서 약간 문제가 있어서 이 부분을 조사하며 알아간 내용을 정리하려 한다.</p>\n<br>\n<h2 id=\"useref를-그래서\" style=\"position:relative;\"><a href=\"#useref%EB%A5%BC-%EA%B7%B8%EB%9E%98%EC%84%9C\" aria-label=\"useref를 그래서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UseRef를 그래서?</h2>\n<p>음 여기 포스팅에서 <strong>UseRef</strong>를 직접적으로 다루진 않겠다.<br>\n이 부분은 따로 포스팅을 하고, 이번엔 어떤 식으로 쓰는지 알아보도록 한다.</p>\n<p>먼저 타입을 정의 하기 전 <strong>useRef</strong>의 용도에 맞게 타입을 정의해준다.<br>\n아래 두 가지 형식을 확인하자.</p>\n<h3 id=\"값value\" style=\"position:relative;\"><a href=\"#%EA%B0%92value\" aria-label=\"값value permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>값(Value)</h3>\n<p>제너릭과 초기값을 정해줘야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> age <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"dom-객체\" style=\"position:relative;\"><a href=\"#dom-%EA%B0%9D%EC%B2%B4\" aria-label=\"dom 객체 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DOM 객체</h3>\n<p>제너릭은 참조하는 HTML 타입을 넣어주고, 초기값은 null을 넣어준다.<br>\n왜 null을 넣어야 하면, <strong>useRef</strong>로 얻는 DOM은 처음으로 마운트 되기 전까진 null이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> input4Name <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HtmlInputElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>만약 null로 초기 값을 설정하지 않는 경우 아래와 같은 에러가 발생하게 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46a1b64552e6119e143f820c028995c2/09e48/img01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.31288343558282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVR42m2Q61KDMBCFeZbaqmC4ZHMlFEwKBTsdff+3OS6p+ssf3+zZWzJnC6t6aOuhpIPuLFTnQLWG3XNGSg/DfacDnAqw5KFbzXXuaQfveojW4FUonMoOxfX2hXm9Z5aPT6ycuyFmbIgwfmKdMmGaMcQFJrxz74HyI8gMKGviB1sUZM+YLhvGtOWFebsjLTc4HvbnxPUV/XjJOn/EdTIBpSAcTgLHlxpPzOFZcBQohIloXUQ/LRjjFTVbqRqNhmPD9mqyaPksHfPG1va+4NM05P7yfU5Iy7YJxTAl+JCg3MTLPY6lzJwqjtUe6aHLX/0f8gfCN2snoYmF4kcxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img01\"\n        title=\"\"\n        src=\"/static/46a1b64552e6119e143f820c028995c2/a6d36/img01.png\"\n        srcset=\"/static/46a1b64552e6119e143f820c028995c2/222b7/img01.png 163w,\n/static/46a1b64552e6119e143f820c028995c2/ff46a/img01.png 325w,\n/static/46a1b64552e6119e143f820c028995c2/a6d36/img01.png 650w,\n/static/46a1b64552e6119e143f820c028995c2/09e48/img01.png 974w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<p>내용이 이렇게 되어 있는데..(혹시 긁기 필요하신 분이 있을까봐 텍스트 버전)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">'MutableRefObject&lt;HTMLInputElement | undefined>' 형식은 'LegacyRef&lt;HTMLInputElement> | undefined' 형식에 할당할 수 없습니다.\n'MutableRefObject&lt;HTMLInputElement | undefined>' 형식은 'RefObject&lt;HTMLInputElement>' 형식에 할당할 수 없습니다.\n'current' 속성의 형식이 호환되지 않습니다.\n'HTMLInputElement | undefined' 형식은 'HTMLInputElement | null' 형식에 할당할 수 없습니다.\n'undefined' 형식은 'HTMLInputElement | null' 형식에 할당할 수 없습니다.ts(2322)</code></pre></div>\n<p>근데 저렇게 에러가 나는 이유는 <strong>MutableRefObject</strong>의 제너릭을 보면 <strong>HTMLInputElement | undefined</strong>으로 되어 있다.<br>\n저 <strong>useRef</strong>의 전달인자를 확인해보면 아래와 같이 되어 있다.(사실 이렇게 이야기 하는것도 너무 오바지만...)</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">/**\n * `useRef` returns a mutable ref object whose `.current` property is initialized to the passed argument\n * (`initialValue`). The returned object will persist for the full lifetime of the component.\n *\n * Note that `useRef()` is useful for more than the `ref` attribute. It’s handy for keeping any mutable\n * value around similar to how you’d use instance fields in classes.\n *\n * @version 16.8.0\n * @see https://reactjs.org/docs/hooks-reference.html#useref\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableRefObject<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span>\n<span class=\"token comment\">// convenience overload for refs given as a ref prop as they typically start with a null value</span>\n<span class=\"token comment\">/**\n * `useRef` returns a mutable ref object whose `.current` property is initialized to the passed argument\n * (`initialValue`). The returned object will persist for the full lifetime of the component.\n *\n * Note that `useRef()` is useful for more than the `ref` attribute. It’s handy for keeping any mutable\n * value around similar to how you’d use instance fields in classes.\n *\n * Usage note: if you need the result of useRef to be directly mutable, include `| null` in the type\n * of the generic argument.\n *\n * @version 16.8.0\n * @see https://reactjs.org/docs/hooks-reference.html#useref\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>initialValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RefObject<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span>\n<span class=\"token comment\">// convenience overload for potentially undefined initialValue / call with 0 arguments</span>\n<span class=\"token comment\">// has a default to stop it from defaulting to {} instead</span>\n<span class=\"token comment\">/**\n * `useRef` returns a mutable ref object whose `.current` property is initialized to the passed argument\n * (`initialValue`). The returned object will persist for the full lifetime of the component.\n *\n * Note that `useRef()` is useful for more than the `ref` attribute. It’s handy for keeping any mutable\n * value around similar to how you’d use instance fields in classes.\n *\n * @version 16.8.0\n * @see https://reactjs.org/docs/hooks-reference.html#useref\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableRefObject<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span></code></pre></div>\n<p>전달인자를 제공해야 하기에 그렇다 -_-;;<br>\n근데 여기서 주목해야 하는 부분은 저 useRef의 반환이 두 가지 형태이다.</p>\n<p>여기서 더 깊게 나가면 <strong>useRef</strong>라는 것에 대해 깊게 봐야 하는데,<br>\n이해 대해 <a href=\"https://elfinlas.github.io/react/230115_useref/\">useRef 포스팅</a> 에서 다루고 있다.</p>\n<br>\n<h2 id=\"뭔가-너무-간단한거-같은데\" style=\"position:relative;\"><a href=\"#%EB%AD%94%EA%B0%80-%EB%84%88%EB%AC%B4-%EA%B0%84%EB%8B%A8%ED%95%9C%EA%B1%B0-%EA%B0%99%EC%9D%80%EB%8D%B0\" aria-label=\"뭔가 너무 간단한거 같은데 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뭔가 너무 간단한거 같은데?</h2>\n<p>물론 그렇다...<br>\n단순하게 제너릭에 타입만 정의하면 되는 것이기 때문에...</p>\n<p>근데 이것도 위에서 언급한 <a href=\"https://elfinlas.github.io/react/230115_useref/\">useRef 포스팅</a> 여기를 참조하면 이 부분에 대해 이해가 더 잘 될것이다.<br>\n무튼 이번 포스팅을 정리하면서 또 한번 배우게 되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"toc\"><pre class=\"language-toc\"><code class=\"language-toc\"></code></pre></div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%85%B8%EB%A7%88%EB%93%9C%EC%BD%94%EB%8D%94%EC%97%90%EC%84%9C-%EB%AA%87-%EA%B0%80%EC%A7%80-%ED%95%99%EC%8A%B5%EC%9D%84-%ED%95%98%EB%8B%A4%EA%B0%80\">노마드코더에서 몇 가지 학습을 하다가...</a></p>\n<ul>\n<li>\n<p><a href=\"#useref%EB%A5%BC-%EA%B7%B8%EB%9E%98%EC%84%9C\">UseRef를 그래서?</a></p>\n<ul>\n<li><a href=\"#%EA%B0%92value\">값(Value)</a></li>\n<li><a href=\"#dom-%EA%B0%9D%EC%B2%B4\">DOM 객체</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%AD%94%EA%B0%80-%EB%84%88%EB%AC%B4-%EA%B0%84%EB%8B%A8%ED%95%9C%EA%B1%B0-%EA%B0%99%EC%9D%80%EB%8D%B0\">뭔가 너무 간단한거 같은데?</a></p>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Typescript에서 useRef 사용하기 (With React)","description":null,"date":"January 14, 2023","tags":["ReactJS","Typescript"],"series":"ReactJS","previewImage":"react_logo.png","isPrivate":null,"writer":null}},"previous":{"fields":{"slug":"/til/230113_wanted_preon_front01/"},"frontmatter":{"title":"23년 1월 원티드 프리온보딩 프론트엔드 1일차 TIL (Wanted Pre Onboarding FrontEnd)","isPrivate":null}},"next":{"fields":{"slug":"/react/230115_useref/"},"frontmatter":{"title":"React useRef에 대하여","isPrivate":null}}},"pageContext":{"id":"25df1295-b980-5360-a8bc-26af0460effe","previousPostId":"7afaf05c-3c0d-5e0d-b02f-8051c68a5ece","nextPostId":"5ce51895-b222-596f-be2b-c21be7deefa4"}},"staticQueryHashes":[],"slicesMap":{}}