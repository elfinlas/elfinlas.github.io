{"componentChunkName":"component---src-templates-post-jsx","path":"/cloud-flare/230127_use_r2/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab"}},"markdownRemark":{"id":"b9fa8226-abd5-58a9-a069-f50c429b13a5","excerpt":"AWS S3 사용할까 고민하다가... 전에 만들던 서비스에서는 보통 AWS의 S3 저장소를 사용했었다. 근데 myme.link를 만들면서 노마드코더의 클라우드플레어 소개 영상을 보면서 R2에 대해 알게 되었다. R2는 일단 S…","html":"<h1 id=\"aws-s3-사용할까-고민하다가\" style=\"position:relative;\"><a href=\"#aws-s3-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C-%EA%B3%A0%EB%AF%BC%ED%95%98%EB%8B%A4%EA%B0%80\" aria-label=\"aws s3 사용할까 고민하다가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS S3 사용할까 고민하다가...</h1>\n<p>전에 만들던 서비스에서는 보통 AWS의 S3 저장소를 사용했었다.<br>\n근데 <a href=\"https://myme.link\">myme.link</a>를 만들면서 노마드코더의 <a href=\"https://www.youtube.com/watch?v=-AwLsUuzgLw\">클라우드플레어</a> 소개 영상을 보면서 <a href=\"https://blog.cloudflare.com/ko-kr/introducing-r2-object-storage-ko-kr/\">R2</a>에 대해 알게 되었다.</p>\n<p>R2는 일단 S3에 비해 합리적인 가격을 제공한다.<br>\n아래에서 간단히 비교를 하게 되면...</p>\n<ul>\n<li>\n<p>아마존 S3</p>\n<ul>\n<li>1G 용량 한달 저장 비용 : 0.02$</li>\n<li>저장된 데이터를 송신하는 비용(유저가 다운받는 것) 1G 기준 : 0.09$</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>CloudFlare R2\n<ul>\n<li>1G 용량 한달 저장 비용 : 0.015$</li>\n<li><strong>저장된 데이터를 송신하는 비용(유저가 다운받는 것) 1G 기준 : 거의 무료(초당 10회 이상은 비용 발생)</strong></li>\n</ul>\n</li>\n</ul>\n<br>\n<p>나 같은 경우 서비스를 오픈할 때 잘 되기 전까진 <strong>무료 플랜과 저렴한 비용으로 최대한의 효율을 뽑자</strong> 마인드이다.<br>\n그래서 이번엔 S3보다는 R2를 적용해봤다.</p>\n<p>근데 R2 자료가 거의 없었다.<br>\n대부분 S3 -> R2 마이그레이션만 있지, 이것을 S3처럼 사용하는 예제는 없었다.</p>\n<p>그래서 좀 삽질하고 배운 내용을 정리하는 용도로 이번 포스팅을 진행한다.<br>\n원래 깃허브에 레포 하나 파서 예제를 올리려 했는데...<br>\n이거 준비하는 것도 일이더라....</p>\n<p>그래서 이건 나중에 시간이 남아돌면 그 때 하는 것으로 하고...<br>\n이번 포스팅에서는 최대한 친절한 가이드 형식으로 하려 한다. (사실 내가 나중에 또 만들 때 보려는 목적이 더 크다 -_-;; )</p>\n<p>내가 진행한 환경은 <strong>Nest.Js</strong>로 했으며, <strong>Typescript</strong>로 작성되었다.<br>\n이와 관련된 예제는 <a href=\"https://elfinlas.github.io/nest_js/230203_r2_nestjs/\">CloudFlare R2 사용해보기 Part 2 (With Nest.Js)</a> 포스팅을 참고하면 된다.</p>\n<p>일부 로직은 대강 작성했기 때문에 좀 난해할 수 있음을 미리 고지한다.(서비스 코드는 공개할 수 없기에...)<br>\n이것을 적용햐려 할 때 힘든 점이 있다면 아래 댓글로 문의하면, 답변 드리도록 하겠다.</p>\n<p>포스팅의 전반적인 설명 흐름은 아래 도표대로 되어 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/71f2f74af9b261580384373badd48aa6/96e86/img00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.50306748466258%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVR42q1Uaa+bMBDM//93rap+aNOSg9vGGLCxOR7TsXmJFKlNnqqHtAKtd8cze3DAJz+HZ4fbtkHIBnlRIk1zfsuPAYbEvrMYOodej2jqDt5NMSBJrvj65Ue079+OMe4l4LquaIWDLCeUmYUoHHRj6F+g1QAtJp6NNA8lbCTwFPBtfWOwQXbqcPopcT42kJXGsiy8QNGvcfol41mZ6aDpVQ03uHHCaCeY3kVW8zTHk4nvrjXRV5eK5/b/mxKeZVnJ1kCUFlU2xIv3ur8AXJk4GrI0MwtvyNYx2UOKFtlZ48py5JcednD3Cfgr4M1vjUOZGqSJRpG2lLozWVnfpu7JckB2kXDWP2d4B+TNxWXAiQ1JTxLe74C9tpwAg06NETjYh2oYJFtKtoOPIKJSqCqBOu94kYlyi6uJ0/Agd3tk+++mvAcpshPF3pAyDaZfz2EY7NC9yS+Y3MKG+Gi32mplImtZtVBS7+PkZ27TjJk5oVxB4R3Q0BE7mSicOcDJUVJiywRPyTrKvSQNjWXIuJbeo8pb1lrj/LthXsvp8I+AYa2q3LJOA5MsN2JPFGVPyZ4d7uMUVFl/99f5GGNr2m2cIqAn/VaaaLLq4rrJepcWNkfRr2S4SLFZ734ChPjQ9SJt7j+Tw2f/D/8AMrMq3NMD8t8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img00\"\n        title=\"\"\n        src=\"/static/71f2f74af9b261580384373badd48aa6/a6d36/img00.png\"\n        srcset=\"/static/71f2f74af9b261580384373badd48aa6/222b7/img00.png 163w,\n/static/71f2f74af9b261580384373badd48aa6/ff46a/img00.png 325w,\n/static/71f2f74af9b261580384373badd48aa6/a6d36/img00.png 650w,\n/static/71f2f74af9b261580384373badd48aa6/e548f/img00.png 975w,\n/static/71f2f74af9b261580384373badd48aa6/96e86/img00.png 1089w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"사용법\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"사용법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용법</h2>\n<h3 id=\"1-클라우드플레어에-계정-생성을-해준다\" style=\"position:relative;\"><a href=\"#1-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%ED%94%8C%EB%A0%88%EC%96%B4%EC%97%90-%EA%B3%84%EC%A0%95-%EC%83%9D%EC%84%B1%EC%9D%84-%ED%95%B4%EC%A4%80%EB%8B%A4\" aria-label=\"1 클라우드플레어에 계정 생성을 해준다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 클라우드플레어에 계정 생성을 해준다.</h3>\n<p>그리고 R2 메뉴로 들어간다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 270px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d68256b6fc2ca00f6bc2e4d23f031a24/01bf6/img01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 293.25153374233133%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA7CAYAAAB7c6ruAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFwklEQVR42sVYW2/jRBSOBAjxY/gLvCDxz1Y8wQNiHxBPPCChfWARLEhoBd026aaX3W2btLk1VydpEjuOHSdOfJv5OGdst92ybd1VC5ZOJp6MP8+5fedMcqBLSgkhhBLJI82J5RRhu0hzEe5y5d66kyIeRocIHn+G8KtPIbvPeOZugL1eD5qmoVGvo97q4ujpNxj88giV37/D0R/fwnft5IUyG2C1WkW5XMbJyQkqJKcdDb0zHbVGE4flCjzPz77DKFI2Sl/t8IZJ+peFbNunddeJRqKz/YMgQC5xSMBoNH6Zo4vU/2RjY+PD26TRaHzM68Mw/IKfJ0CROiVIxke8gMaPchkuWvdBMn7ODxPwAwCyypEQMlF5EEVik2xSJHnJQnM3SZEkT3LCz7M/cmlAs1+klHjfi8EUIN8s1xGaZ2vlbcOcS9NaSGPmyJFuS88PZBIFt8kFoOkEyB/bKuU6mo6WNkFvaOC4MYCzXGeN6QvA+7rOAdklXiCSSQrQMERIY5RIVtueA56ZHh7/OkBASWNaDnYPmyjXNaX69qvGJbXfBk5vp9YC88VKmVIB8u40fa0WBGEEd+1j7QVY07h0vSQKrr/4ORV+D2bDtS9Q05bKlrP5Ev3RDMOxhcHIVPe3XawRhRftUsSAK0+gqrkqmEx7gXpnhNPuBK3eBCPdul7VlKLIxu7KV2o/jMpBKDGe+eqNIU2G5BhObymypaPEFaeMCOzrnzX1o3Y2RYFCZbfUgu247wyXW3cY0U6cVRTbhD7WawoZMrLaZQashw+blReh1JxDRhL61EatNVJZ0u7rN5JDagqLImPB62IvS3jklI4Zq2xRZmiGQ+noYGjYWK685GFxbX32aSMB5byIQiJY9jKlmdTPIOoVoHIEHO1B7BQQvizAK+SxypOk49YmvPwm/ZaHeL0LWSkjarfgmTZFCwW2RzV59OcLHD4rYlaqoUvebdTHlPA+dCuAbkfQ5yIW/m6HMGjeMFyYgymsagvWQRn29g6C3W2qy8+eorrfxPfPDYxpu/mOhd9LOrhXMEJikugdQusMEh2xTGmdOfPgbzxHLrAdzIt7MP/ewiJfgLu7hzm90Tw+hVHrwjjtw2gOYzkdwGhoMKtt2OUaFvtvsNx+icVWAfPNPIJWk5xCnpFpo7SkxmE2JYKkhqHbhKwdQ5YOSN5cyPEhZP1E/Q59BMwtSN9X5SMUCTnM5j7+OphRgFOmEMuU2xMcd4gcRnb2IJTM7mFCsERfw6mvAFdERebMwYRCxuHUY3K9KqxNnB7/UZHiusx8yDt0KbBn9lLxYlwn3gNQt328KFkKcGyQDet9FF43KP30O3UTmVROTXUb7ltswzTFZSAlylR4XshYUorKtENN9/Dop66qy4OxiYNKD43umFqRvmKcenuEoxr14DReBk2/mmRzZ7G+qMtrqsu9iacW+H5IlLVSLMOFh8OIqxrf8/d37kyollDV74cLm8YgLqPW3CW1LUzMuSqj9tJDMCxjUnwCMe3ceLw4B3SJsWt9V62znRVaZLfhxEKVCEGfLREODjEu/IjIaGUDvHeVQ6Jwaxkibrwj1TBxOxdXvrid8+kMIiKRDdAmsK1y3HKcUeuxX+5QfTZVyOyV2sRGLkZkAo6ATIAy2WXacHL3wDvjUPCDuIsQ4iLgbweUF4D3YkP28l5tnqhsY5/U5Jau2RvjhLKl1tURzHXo+R9g7j6ht7tX+q+rPTapM7HiLFgQfXUHhuprLBZKq9HUQbhysKhuwm0W6Un/fzgF9A0vJljKWc6SMD72XjiCR/q7QN7wl8E5oLUIsXE4U5MdCpX8fk0Rwl1auXNAmfBdeCUsLvNiVlGA6aEvFc4UOqbi6vxtws+w5C5z2r05ZUY2/G3HUJPc9e8cnKq0e0UpeN0p6l+MvbzE2D71h4Np3AcyMXAM8kmKY5JNkKWQqdojEhsKFSIitkfCLinL3NWO/wBur33hPDjIewAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img01\"\n        title=\"\"\n        src=\"/static/d68256b6fc2ca00f6bc2e4d23f031a24/01bf6/img01.png\"\n        srcset=\"/static/d68256b6fc2ca00f6bc2e4d23f031a24/222b7/img01.png 163w,\n/static/d68256b6fc2ca00f6bc2e4d23f031a24/01bf6/img01.png 270w\"\n        sizes=\"(max-width: 270px) 100vw, 270px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<h3 id=\"2-r2-가서-구입-결제를-진행한다-프리플랜-가능\" style=\"position:relative;\"><a href=\"#2-r2-%EA%B0%80%EC%84%9C-%EA%B5%AC%EC%9E%85-%EA%B2%B0%EC%A0%9C%EB%A5%BC-%EC%A7%84%ED%96%89%ED%95%9C%EB%8B%A4-%ED%94%84%EB%A6%AC%ED%94%8C%EB%9E%9C-%EA%B0%80%EB%8A%A5\" aria-label=\"2 r2 가서 구입 결제를 진행한다 프리플랜 가능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. R2 가서 구입 결제를 진행한다. (프리플랜 가능)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 438px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df8dba9386f0089437569cb97980d2ae/50e4b/img02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 193.25153374233125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAnCAYAAAAPZ2gOAAAACXBIWXMAAAsTAAALEwEAmpwYAAADOElEQVR42q1X23LTMBAtj3wBL/xRn3hkhhn+hFf+heGlfwClDdB2CoReMrTp5EIuvsSNbVl2bMuLziY2JLGdpsEzO1Is6eisdvfI2RNC0Gw2oyiKSi2JZxTPIop1i37VPBiw9qSUhCfLMip73CChIFLkypQcP6G6B1gbAT9euPTtLtAm6LwdbA+olCLHccjzXLIsi5yJzX3f87g/mUz4/f39/RqJWsDpdMqtbU/YAGBqINd1i/FHubzNUwmIfv77+vqams0mXV5eUqvVKsbKCGxkqPSrw6Nj+nTUoM9fTuj07JySVO0W5f/k8rxttDx6d2zRwYlNB18tet+w6PTGX5rzIMBUzfv7b5r0ZP8DPX/doGevGvT0xSG9fHu1yIZse4Y9K6IfHUEXPUE/u4K+6+QeTKL5nE0uK5UW0+oiuTqOvIWtASb6nS+kTmCHkxiJa5qmrgxHV4atfy8qx5mPI8FXq2UJcKYJun6gQQxeCBuNRtx6uuwwDy0UBYbfaGsBhYzINAwGAjvbntfuo9ImXjC0LJNZAQjuATwIgspzrASMtNQ5954GGDKQoZmOx2NmipbFwZxvBlc3MkRayTDShz2lMAyLswI7gOH8ECgEA+OVgPmgEH4R/p1KD4AA6nQ6fLfsUtcMiMsljmPqdrvsGiI7HA6XVUdvOBgM+H2v1+OzLNu4AAQzTAQgApIv+BcQ0TYWKVWVSksM+/0+TwRDLFwFxCY5IDatPcM0TdkdLEA019RHj2NDpA/a3JvVeUtpE2qmUoYUzWINkBUSli/CxhHPkdxPkqSC4QIQF3rXjOhmIOlW26/fUoOrSqnanNgqYwO7vL9t+qwIrPqrc9C4TBVa9xBbF4c45sOHKYAuXM1WhKCONQMiB1GvZ2endKXv3nb7lnzff1TFLOthjK+sRAcnJhGm2hR/dfky4ehjXi6qZREu1UPLTehuKKkzDnWkA7obhdQeBmSYdiH/VfpYLrCeIMsck20ZrIv9XpfbqtqtB9SBmro+jQx9IYmE2cA1RDB3se4mLAV0vTmgMZEMGARyq8CsuTx1BRljfUEZYz4zSFaukTt92+yk2Pm9IURuYskw9lDDv4A/DXDckBzrV1cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img02\"\n        title=\"\"\n        src=\"/static/df8dba9386f0089437569cb97980d2ae/50e4b/img02.png\"\n        srcset=\"/static/df8dba9386f0089437569cb97980d2ae/222b7/img02.png 163w,\n/static/df8dba9386f0089437569cb97980d2ae/ff46a/img02.png 325w,\n/static/df8dba9386f0089437569cb97980d2ae/50e4b/img02.png 438w\"\n        sizes=\"(max-width: 438px) 100vw, 438px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>요금제 구매 버튼을 클릭한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7db99ff3e26d689daa5c070a02c1bc36/66465/img03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.21472392638037%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPklEQVR42p1Sy07DMBDsF3LkI/gQTvwAvwHiAhIXxBE4gZAAKWpECaR5kDhP2zvsOklJoqqVOtLa1mYz3pn1AiM0mhArzSeCJQL1Ya2F1trtNMpLGGPGFFjIwnkHPyxw8xi4s+l/FghZmqboaqeEkh/qNoQM24Xt9ymqqoLv+6jrev5pQjYm3IqmaVAUBZIkcYSyC7m1dh8h3fNywXHJntwyCc2ljeXugiN8W5Vf6zTzrNEe+/UpXQxDENOH8xySEw/btnUhlzlCHi7yukAURVC5wnK5RBAErjgMQydVpG+DHQ1v06HRmopSkVKK2HiS22QAEuLjXP7/c5LnxQ2xit9MsRLTEWZZhpi7OwRtUyJdrxD4H8izePeU90Ebwt1zwm/3B9dPa3jf5WGEg2WqNjg5f8fx2SuOTl9w9RDjD4FEXHaGQssmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img03\"\n        title=\"\"\n        src=\"/static/7db99ff3e26d689daa5c070a02c1bc36/a6d36/img03.png\"\n        srcset=\"/static/7db99ff3e26d689daa5c070a02c1bc36/222b7/img03.png 163w,\n/static/7db99ff3e26d689daa5c070a02c1bc36/ff46a/img03.png 325w,\n/static/7db99ff3e26d689daa5c070a02c1bc36/a6d36/img03.png 650w,\n/static/7db99ff3e26d689daa5c070a02c1bc36/e548f/img03.png 975w,\n/static/7db99ff3e26d689daa5c070a02c1bc36/66465/img03.png 1097w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>무료로 사용이 가능하며, 일단 해외 결제 카드가 필요하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e56ceb1f23ba672d881f80f89e623c65/f3a19/img04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.23312883435584%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACR0lEQVR42n1Ty27UMBSdz2KLgBUrfoMFKyRWQBcs+BF+AIkVQuwRUjUwVTWPTmk7zTSTxyRxHk5s5+BjT6JRK7jRlZ1r33PPubYnsNb3cPZtmkDUCj7Wwxi/cLousLwt3Zyx/pDQdR2qqsKxTYZk2mKTo+30uKi0QW801kGG26iwm7QxBoa4TNNaQ0r5EPC+eXYG2T7FxXKO68sVLlYrrNdrCCHwP5torRztgaWXZVCWJeZBitlN4lyUZSVlfWeHsG3bO7tNHqsbARvZIgxD1HWNpmmcK6VAOV/nCT79DMyXhUBcdt+LSr+0Oa+tv7L7p0N91x6bQ3DL0FiGNfI8HwHJcJR/GKNcYRMJaNW6dcvS9Y+FeThpmjrQCQGiKEJRFCMQK/Hr7AFFuxRp2fpTNQq7aOfakWUZ4jh2BPhPdwxbi85GD+xYjSPjTd1gsbzEJhYjYLgL7WHtHQBVsf+ck7HvoU0m4HCylMB+Erjv3e2AtHsYy/PMyeI+p8I6//e2QBAEXjKRKZcAg3OB8aFPHBlj4eP+0vJsb9sSYrvdun0TAmRZzmvhqPuxgnRgHpBgdLIcJIrSMi5qJFmNrKjcPtdDTgjYKX2QbB6woMnGJqYx8n2CSrB3wgHFmUQharTS3+XJUL03HohO1uwlve382/78I8ajN6d4/HaKp+9nePHxHM8/nLn5k3czPDuZYRHUXvKxLGWZUhYPy98x5d5zUnT49afC7Nr6VYnzmwpndv77yjtjTWs8Q/ZmYDQ8+GOW9PtP7F9v+S+dAIK2NC3nnAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img04\"\n        title=\"\"\n        src=\"/static/e56ceb1f23ba672d881f80f89e623c65/a6d36/img04.png\"\n        srcset=\"/static/e56ceb1f23ba672d881f80f89e623c65/222b7/img04.png 163w,\n/static/e56ceb1f23ba672d881f80f89e623c65/ff46a/img04.png 325w,\n/static/e56ceb1f23ba672d881f80f89e623c65/a6d36/img04.png 650w,\n/static/e56ceb1f23ba672d881f80f89e623c65/e548f/img04.png 975w,\n/static/e56ceb1f23ba672d881f80f89e623c65/f3a19/img04.png 1086w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>카드 정보를 다 입력하고 진행하면 아래와 같이 완료가 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c4233fc8936242d0e036630fe01e3f7a/8c857/img05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.0920245398773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVR42oVUy27TQBT1D1CpK5b8ERskFjwkQGLHhgV7PgGxBYklElv+AIkUUlBQU2LRViQxcVy39Tu24/F4DvdO7CoPJ73S0czc3Dlz7sMxlAKyogKv26yJ2WWyUsgpxpjlEi/f/0GcCr4KKStU1QK8Z9+5P8erD6cohCRy8lfrMYBpJXj9cQhDSgnL8XTQNivLEs6Frwm22VyUcL0YRnuKq/kXEpgmQKUW+asd9THaCFbISZVlu+gcTTCxbZ3y9lqrTYVZlqk4jlUYhirPcxUEger3+6r3s4terwf6DUmSIE1TvQohNhWuv7KO+XyOKIr1ygS8FkWh99yDnYRkJ4QOoVvjKzXDYmK6rHCDLRPq4KKs3iZZcZ8uPyUVz8h1bzabfeJOkyLZlkErYVX7j8Y5jkcRpMg2ysBj0+z1KDmOruNyYzdSLkSlMiFUEIcq8APdGFKoPM+jOka6ftQ4kE+fmfimGurcrwIPztTR3eTOuq4LJqUHtI8J2X9jlxeEChfeJcbjsU6pucyKmjODO721hsufmSgFsjxDWl9iH49HMyp85gdY6frnuEHIKqb2VNdpudiNjmYmh6MRBqYJ3/d3N0XKEmkS6rXNotDHuW0hohr7Vy5mSdRO2ChwggKDSQ5zksH8l2FA0Pv6/Nua4XicoE+j9etvhMuouP7PXCGU9SC+eHcG4+4X7D86wK0HHew97ODO8+8at598wx77CPuPD3Tcm8/2ovZyXWH9wtDN0TEjHJ7E6Nb4cZZco3saaxwSOM7xVxX+ByRmsgZWmh6yAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img05\"\n        title=\"\"\n        src=\"/static/c4233fc8936242d0e036630fe01e3f7a/a6d36/img05.png\"\n        srcset=\"/static/c4233fc8936242d0e036630fe01e3f7a/222b7/img05.png 163w,\n/static/c4233fc8936242d0e036630fe01e3f7a/ff46a/img05.png 325w,\n/static/c4233fc8936242d0e036630fe01e3f7a/a6d36/img05.png 650w,\n/static/c4233fc8936242d0e036630fe01e3f7a/8c857/img05.png 761w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<h3 id=\"3-대시보드에서-r2-메뉴로-이동한다\" style=\"position:relative;\"><a href=\"#3-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EC%97%90%EC%84%9C-r2-%EB%A9%94%EB%89%B4%EB%A1%9C-%EC%9D%B4%EB%8F%99%ED%95%9C%EB%8B%A4\" aria-label=\"3 대시보드에서 r2 메뉴로 이동한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 대시보드에서 R2 메뉴로 이동한다.</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4db33a6b5da7c8d1fea82fc98704161b/610c0/img06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.104294478527606%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5ElEQVR42q2R0U7DMAxF+/+/wX+wSfAHPCDtBSRgEm0nVrI4thPn4nZqXwgvE5aurCj2zbHTDcMAVUHOeVOtFa0gMbyPjKSGbECrrGNOCJQQXUQEZv5luB5fPlO92w8Yz9Sr6q6YPZjZvUN8eHYwrd3FX31+PaH/Im/xl3OZLxatxOI47FSa82LtEL0w793ksZSy89rjZhiS4enwhuM4QYQRY1xI10xOPsWMs+tCjLmRJUNLRWsx3Tyeuf7aWyti4vodolv7SFdtzR1uCEri00jz7ibDKTBCvBrW/zAU/xvN7RX9ADLidSG89+jSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img06\"\n        title=\"\"\n        src=\"/static/4db33a6b5da7c8d1fea82fc98704161b/a6d36/img06.png\"\n        srcset=\"/static/4db33a6b5da7c8d1fea82fc98704161b/222b7/img06.png 163w,\n/static/4db33a6b5da7c8d1fea82fc98704161b/ff46a/img06.png 325w,\n/static/4db33a6b5da7c8d1fea82fc98704161b/a6d36/img06.png 650w,\n/static/4db33a6b5da7c8d1fea82fc98704161b/e548f/img06.png 975w,\n/static/4db33a6b5da7c8d1fea82fc98704161b/610c0/img06.png 1295w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<h3 id=\"4-버킷을-생성해준다\" style=\"position:relative;\"><a href=\"#4-%EB%B2%84%ED%82%B7%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%B4%EC%A4%80%EB%8B%A4\" aria-label=\"4 버킷을 생성해준다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 버킷을 생성해준다.</h3>\n<p>버킷 생성은 웹에서 해도 되고, <strong>Wrangler</strong>를 이용하여 콘솔에서도 생성이 가능하다.<br>\n<strong>Wrangler</strong>는 CloudFlare의 <strong>Workers</strong>서비스를 사용하기 위한 일종의 CLI 툴이다.</p>\n<p>이에 대해 <a href=\"https://www.cloudflare.com/ko-kr/products/workers/\">자세한 것</a>과 <a href=\"https://www.cloudflare.com/ko-kr/plans/developer-platform/\">요금</a>은 링크에서 확인이 가능하다.</p>\n<p>이 포스팅에서는 <strong>Wrangler CLI</strong>를 활용하여 생성해 보는 것으로 하겠다.<br>\n물론 대시보드에서 생성해도 똑같다.</p>\n<br>\n<h4 id=\"4-1-wrangler-설치\" style=\"position:relative;\"><a href=\"#4-1-wrangler-%EC%84%A4%EC%B9%98\" aria-label=\"4 1 wrangler 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-1. Wrangler 설치</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn global add wrangler</code></pre></div>\n<p>물론 나처럼 특정 프로젝트에서만 설치할 거면 global은 빼면 된다.</p>\n<p>그럼 아래와 같이 설치가 된다.</p>\n<blockquote>\n<p><strong>나는 global이 아닌 local으로 설치해서 wrangler 명령어 수행 시 마다 yarn wrangler 형태로 사용한다.</strong><br>\n이 부분은 각자 원하는 방식으로 설치하고, 사용하도록 하자</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">>  yarn add wrangler\nyarn add v1.22.19\n[1/4] 🔍  Resolving packages...\nwarning wrangler > @esbuild-plugins/node-modules-polyfill > rollup-plugin-node-polyfills > rollup-plugin-inject@3.0.2: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-inject.\n[2/4] 🚚  Fetching packages...\n[3/4] 🔗  Linking dependencies...\nwarning \" > ts-loader@9.4.1\" has unmet peer dependency \"webpack@^5.0.0\".\n[4/4] 🔨  Building fresh packages...\n....\n✨  Done in 19.39s.</code></pre></div>\n<p>설치가 잘 되면 다음과 같이 테스트 해본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> > yarn wrangler\nyarn run v1.22.19\n$ x/node_modules/.bin/wrangler\nwrangler\n\nCommands:\n  wrangler docs [command]              📚 Open wrangler's docs in your browser\n  wrangler init [name]                 📥 Initialize a basic Worker project, including a wrangler.toml file\n  wrangler generate [name] [template]  ✨ Generate a new Worker project from an existing Worker template. See https://github.com/cloudflare/templates\n  wrangler dev [script]                👂 Start a local server for developing your worker\n  wrangler publish [script]            🆙 Publish your Worker to Cloudflare.\n  wrangler delete [script]             🗑  Delete your Worker from Cloudflare.\n  wrangler tail [worker]               🦚 Starts a log tailing session for a published Worker.\n  wrangler secret                      🤫 Generate a secret that can be referenced in a Worker\n  wrangler secret:bulk &lt;json>          🗄️  Bulk upload secrets for a Worker\n  wrangler kv:namespace                🗂️  Interact with your Workers KV Namespaces\n  wrangler kv:key                      🔑 Individually manage Workers KV key-value pairs\n  wrangler kv:bulk                     💪 Interact with multiple Workers KV key-value pairs at once\n  wrangler pages                       ⚡️ Configure Cloudflare Pages\n  wrangler queues                      🇶 Configure Workers Queues\n  wrangler r2                          📦 Interact with an R2 store\n  wrangler dispatch-namespace          📦 Interact with a dispatch namespace\n  wrangler d1                          🗄  Interact with a D1 database\n  wrangler pubsub                      📮 Interact and manage Pub/Sub Brokers\n  wrangler login                       🔓 Login to Cloudflare\n  wrangler logout                      🚪 Logout from Cloudflare\n  wrangler whoami                      🕵️  Retrieve your user info and test your auth config\n  wrangler types                       📝 Generate types from bindings &amp; module rules in config\n  wrangler deployments                 🚢 Displays the 10 most recent deployments for a worker\n\nFlags:\n  -c, --config   Path to .toml configuration file  [string]\n  -e, --env      Environment to use for operations and .env files  [string]\n  -h, --help     Show help  [boolean]\n  -v, --version  Show version number  [boolean]\n✨  Done in 1.23s.</code></pre></div>\n<br>\n<h4 id=\"4-2-wrangler-콘솔-로그인\" style=\"position:relative;\"><a href=\"#4-2-wrangler-%EC%BD%98%EC%86%94-%EB%A1%9C%EA%B7%B8%EC%9D%B8\" aria-label=\"4 2 wrangler 콘솔 로그인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-2. Wrangler 콘솔 로그인</h4>\n<p>다음은 콘솔에서 로그인 해준다. (y 입력해주면 된다.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/da12366ece5cb133215ecc951568ccfe/b04e4/img07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.404907975460123%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVR42l3Py06DQBQGYB6mQmG4TGdgGMptoDQ01LaJRpNC+gi+hk/i3nUxPBHTREyMXVjHkZXp4sv/52zOOcr67lAlxa6eGLDWDNSouvNo4vRpv12dmttUoCD6JmFxwZRdNNOV8F+Ka1PLGylpVgyEJh/mLBgApINmeu+6TT41OxATiwoAA2E4VPKFbo9+VIC/rpzlokE1MVcW5bZblLuuqO67KF937jzv/Hj5Fqblcc5WLY3LNsqqNmTVMcqrTs5eZyQ9QJLuoZfVjhc3kEQPGvCep5b7oiTLTZ8Um94Lst6lrHdlYp/18k0uO8cB48hPxu7gkAPH5zcAneQ1/yCuAnSWxC9ILHTN9fWKpQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img07\"\n        title=\"\"\n        src=\"/static/da12366ece5cb133215ecc951568ccfe/a6d36/img07.png\"\n        srcset=\"/static/da12366ece5cb133215ecc951568ccfe/222b7/img07.png 163w,\n/static/da12366ece5cb133215ecc951568ccfe/ff46a/img07.png 325w,\n/static/da12366ece5cb133215ecc951568ccfe/a6d36/img07.png 650w,\n/static/da12366ece5cb133215ecc951568ccfe/b04e4/img07.png 888w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 브라우저 열리고 Allow 해준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 603px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/71e0095ff5c928482b0171d61c7c8f15/9128f/img08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 158.8957055214724%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAACXBIWXMAAAsTAAALEwEAmpwYAAADUklEQVR42qWWuW5TQRSG82ZUVEi8A1BQ8QDUtDQRBQjRUyEaIiGBXEaKlBAFOV7ifd+3eLuL7z2cb5xJbMe+tsSVfs3cuXP+s/0z9pFEPuFycEYSpk5E/On6+pbnKIrOdRypNVpSS19K8fcXmfSqS7owgjAIAnnA4g6BLBYLA0dJXc8TVzm8xcM6WLddwkQY6Me5Gjquo+NcR088bwlj7Pvie674Pms613e+4Ww2m5k9ayl7fiCjXlNm8a/iXH6SRqUgmWxO8rmcpNNpubm5kUqlItls1iCVSkmhUJButyu3t7fiuu4G4SKUUbcm45O34nx7LaVsQs4v/sjF+bnEYjE5OzuTq6srOT09lUwmI6VSSarVqvT7/e2EpDKdaaqjjjjDtswcV2bTqUwVk8nEpDUej43xfD43BIys85301whtQSGd6qa5AjIMrBEktrurXWaO7SNCCttqtUwqzWbTjLVazYAUe72eiQRimgEiCa1X5hDm83lDmtPGMKd27XbbNALHzK3dTkJApBDRTSKDCPCOo+FwaMiY2ygfyWYzwnq9fi8RkEwmDSlkNGc0Gpm5bUZkynijbmjPao45pGgSsMZYLpf319CmDAlRMa4SUk8cUltquTdlPnIqIIGAKBOJhFxfX0s8HpdisWj0SNeR1EEpbxIOBgMD6gYgo9vocy8hB5+USJHIbJcB55e60f1Op3OYDnlIC1AjDHFA53lnjmx4P6jLRNhoNIzOAISkR5oWENv67Y2QQ48B6dFJ0qOWzIkMInSIqFcv1oNqCGgOdUNKOCJqiAHr7N/bZeqD3uw5ttcYcrHdXr159qassgn1NIQqmVDTDTXSEHIkRCmI2jZp9Vrb2WWaQGQYkRa6xJH9nYGEiFmzP1aPCKkFhnRY4al3V0cDralPXe21v/bLvStlJQxJQWUx0y6+UO9PtXbPtW5PNKIPd4YTBXqZ6ujaK2/njY3G+v1e0Gy1y/VGO1er1/Pa1axqsaOkx7r1leKN4qXK5zPy0RKEWwkj/5BoFJqBp3CBkjD6kToErVZbRoOu/LrsBu+/l4PY337AV99fhNucRKbMh2QqLbVSTo5/VOTZu7h8/FlfntXw/h/SJnYT2kXrlf12cxS2ymYzjf95/gHN4ZeBAwpyVAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img08\"\n        title=\"\"\n        src=\"/static/71e0095ff5c928482b0171d61c7c8f15/9128f/img08.png\"\n        srcset=\"/static/71e0095ff5c928482b0171d61c7c8f15/222b7/img08.png 163w,\n/static/71e0095ff5c928482b0171d61c7c8f15/ff46a/img08.png 325w,\n/static/71e0095ff5c928482b0171d61c7c8f15/9128f/img08.png 603w\"\n        sizes=\"(max-width: 603px) 100vw, 603px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>다 해주면 브라우저가 이제 준비되었다고 알려준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/23475e42f36e258c9281bbc4833a61df/98314/img09.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.576687116564415%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpklEQVR42pWT23KiQBCG8+B5m73cl9jLVGmtKWNMVjzgco4RGBiBmQH+7R5XjYkmFao+ehqmf/ow3OR5AYvYEdKuhShxfP5NbvimdQujK0Kh63oY01q6DmS7L+H4o6Aoa+jyFfrXLarRD9wNHzAcDDAc/sZ67dmAtu0t/IG36wPsnwQLCd2Q6OgnlDvAwvUxmzmYTp+wWq1pc4e+h4Wz7/s9vL4oWFC/qlrBcQP8mbuYz5dYLl0sFkvL8/MMj49TOM7C+pPJFOPxGGUpwdfHDEmwJsEwCJHEL4iiF3heAN8PEQQR+QnCMD4S2z2JtZvNFgVV+EGwqhoSCGhjBJHne4QgK5BlOfJsb9M0t0FsGY67kKFEXUkEnFFcY7M1oHhs8x4poQ2OpTGnfl4ZCp89Yxq4qxQPk5b602A0qnF/X8NfKxSpoqF16N6JXJ8yldw0Ggn3yosReQl8N7SEf2OsHB8ik2dZfimolKHmlijlDpLgdUFTLKUky++1FTyU+x4+Qmd/CjeXRVXzH2VOvmrpFGjao66y2zXnghlN4TC5S2R2yp9zEPwHKMjjNNL3ES8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img09\"\n        title=\"\"\n        src=\"/static/23475e42f36e258c9281bbc4833a61df/a6d36/img09.png\"\n        srcset=\"/static/23475e42f36e258c9281bbc4833a61df/222b7/img09.png 163w,\n/static/23475e42f36e258c9281bbc4833a61df/ff46a/img09.png 325w,\n/static/23475e42f36e258c9281bbc4833a61df/a6d36/img09.png 650w,\n/static/23475e42f36e258c9281bbc4833a61df/98314/img09.png 817w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>인증이 되면 아래와 같이 사용자에게 질의를 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 555px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ce602b998c3901cafe512950772a331/cd039/img10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.69325153374233%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSklEQVR42lWSyXLTQBCG9SgUxIoWW9tIGknWYi2WZMtbvMQJpEIVlxwoigNVhipu3Ag5OY/CG3AMOG/AhRNHuCI5TVuBVHL46p9pTf/q6R7GiQbb4fT0T7Gc/B4fH/ZVNd3bb5EWLxsizxsix+lNliWcoujBy1nw892zCBzPulFsD2wvA92OQKMBsCKB/aYOjB/1fh0/P3ufFPM33WK+kk1/9ZhtrfZ4dcW2yAoPrliBvJW09g8VEyXSLpFK1r1KIm61W/OSWe03NYRUTNLNYTadQRBE4PsdsJwAWlp7l1j/cQcmgKBYIMgW8PKt3oeX6R2M5aXf02J+5YX9az8uNkEy3CT92SYtFt+sILs2nOgKW7BoCIbyiCe0IcjmLeQBgoyKMLoTfc5HRx/csH/RyQ/OIwSrO2+qNqp7Luntjw1BPeNl/URUrFNOMmsaolLDSQSVnD7hlFoZJ8xhevQC0BT642MYTk9wvYS4NwXsKfTGR5D055AOFhBmEwjTCUTZwd33AZ7vFgtwo6JuFYOVbInVqYgVVlhtRex/ijHDiSvqJZXZ7paq2UF8HIhbr6mXltRNS0LDEisv0afEAZYM29S3u8lp9DZBRdWssN7fRzG8LXVj0K0O4DnA3gLG6oE1BK2mfjaibIAdZPWVM7xWPjyEOD8AHA44GMfe4hXHgJVDO56AHQ5BQzOnk+OE6Z3RfxidWl+jbPTJjweXyejp2u8t1yKN1i3aXYtmspbs7iWnxxfJYPHl1TKB14fxTY8m+JANNCAPzHaGfwFDTinp3uzICAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img10\"\n        title=\"\"\n        src=\"/static/9ce602b998c3901cafe512950772a331/cd039/img10.png\"\n        srcset=\"/static/9ce602b998c3901cafe512950772a331/222b7/img10.png 163w,\n/static/9ce602b998c3901cafe512950772a331/ff46a/img10.png 325w,\n/static/9ce602b998c3901cafe512950772a331/cd039/img10.png 555w\"\n        sizes=\"(max-width: 555px) 100vw, 555px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>질문 내용이 사용자 메트릭(?)을 클라우드 플레어에 제공할거냐 묻는데 난 거절했다.(아마 사용자 피드백이나 유저 데이터 수집용일것으로 사료됨)</p>\n<br>\n<h4 id=\"4-3-버킷-생성\" style=\"position:relative;\"><a href=\"#4-3-%EB%B2%84%ED%82%B7-%EC%83%9D%EC%84%B1\" aria-label=\"4 3 버킷 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-3. 버킷 생성</h4>\n<p>다음의 명령어를 쳐서 버킷을 생성해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> yarn wrangler r2 bucket create [bucket name]\n\n> yarn wrangler r2 bucket create lucky-num-dev\nyarn run v1.22.19\n$ x/node_modules/.bin/wrangler r2 bucket create lucky-num-dev\n ⛅️ wrangler 2.8.1\n-------------------\nCreating bucket lucky-num-dev.\nCreated bucket lucky-num-dev.\n✨  Done in 6.90s.</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb76d3b76797c393dc486371be4ffe97/e7dce/img11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.699386503067483%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKElEQVR42n3Oy0rDQBQG4LxLtZNmcmnul0kyzSRp2tK0kkpFcCsIgojElbhJX0N8GXdm4YPoLHyBHtO40U0XHwfO4fz8QpyuHqJsXSfrqxoZtB5ZSYfW2EkeB1p0S/Kz17vLAu63bB9PCFhhCn5cgOkn4EVTcEjWc8McfFqAMC+rDy/M3v0ob0XFagcjo5tOK6puixT7TTECLukhIC3Y43EAik5A0lzAY+8fWff7vTBfrCDNZkApA0JzIJMZdCGAZAtExYYhNuFE+nWKDRjKZn87ONz6+YcwK7dfbLHhbHnBCSs5SUuOjYgPVZ93rT4lnXw7tgeu7YKmev0TOkLQzPBJtoKdxs4bFKwa5C0bHFeNyjY7kW6eg2L7cl0xuKkoTG3WNxWPBP4ANtSYxAUhHTUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img11\"\n        title=\"\"\n        src=\"/static/eb76d3b76797c393dc486371be4ffe97/a6d36/img11.png\"\n        srcset=\"/static/eb76d3b76797c393dc486371be4ffe97/222b7/img11.png 163w,\n/static/eb76d3b76797c393dc486371be4ffe97/ff46a/img11.png 325w,\n/static/eb76d3b76797c393dc486371be4ffe97/a6d36/img11.png 650w,\n/static/eb76d3b76797c393dc486371be4ffe97/e7dce/img11.png 653w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>나는 lucky-num-dev 이라는 이름으로 만들어줬다.</p>\n<p>그리고 다음의 명령어를 통해 잘 생성되었는지 확인해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> yarn wrangler r2 bucket list\n\n> yarn wrangler r2 bucket list\nyarn run v1.22.19\n$ x/node_modules/.bin/wrangler r2 bucket list\n[\n  {\n    \"name\": \"lucky-num-dev\",\n    \"creation_date\": \"2023-01-27T13:29:58.769Z\"\n  }\n]\n✨  Done in 1.74s.</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 549px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ff5b0016ba97bad573384a2efa30cdee/928ea/img12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.515337423312886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVR42n2Qu1LCQBSG8yY6CuROspdcYMmSEAIDjILCyGhhaYeFM2hn54wFvIBNeAufw0dw0tlKoYUcN/FSicU3Z/+zs/85/0oN3r1shIObqD+d02g0l2k8V93kF91Nrvec7uXFJHm6PY/hahp9YOYBZSGwZg+wH4IXJOCyNiC3CZIfdO/9ZmdZD5KFReqLkooWik4KZB0vKxq6M+zao+1ysBy+MUkDqgIkdJUwMHEdLBoUVbM8kBTTWZdUXFDR6Vo2nHVZI0Kj7z56LWv4TTEckM0vlC3IBgWJtw8gp5kcQtgZQrs3hiAeiCgRkJxaBA6LQRXTKzopHv2HZNEG5HHyCCbywRIxcK4d0Rd3yAkKXdIo7MgEdhUCZWO7sSQ+9FlskVHez2w2yGQcZTLJaWWKqEpxjjPG+HsS+BAzBrZZ22oqic0ekMdXiI9SOz5JDX6UGuE4rf4g+nrrdHU2Hr7MJhxmx+0NtyLY1zEofxh+AopE1Hv4y69CAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img12\"\n        title=\"\"\n        src=\"/static/ff5b0016ba97bad573384a2efa30cdee/928ea/img12.png\"\n        srcset=\"/static/ff5b0016ba97bad573384a2efa30cdee/222b7/img12.png 163w,\n/static/ff5b0016ba97bad573384a2efa30cdee/ff46a/img12.png 325w,\n/static/ff5b0016ba97bad573384a2efa30cdee/928ea/img12.png 549w\"\n        sizes=\"(max-width: 549px) 100vw, 549px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<h3 id=\"5-workers-생성\" style=\"position:relative;\"><a href=\"#5-workers-%EC%83%9D%EC%84%B1\" aria-label=\"5 workers 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Workers 생성</h3>\n<p>CloudFlare의 대시보드로 이동해서 사이드 메뉴의 <strong>Workers</strong>를 선택한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 265px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3b6f9bbc6314781ed49358eea1a45ae9/78e79/img13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 258.8957055214724%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA0CAYAAACKJRg7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAE8klEQVR42sVXaVPjRhDl729VfkC+Jvm4lRSV2i+phS0weLG9NsaAL7CM70OWZcmybmleusf4ALwgjkpU1R6wNT0z3e+97tmLoghsgJBjHMdrE0LIcfXOSxYEAfbIE/wgRl/zyQHguD5sh4xGw3Lg+SGSPuxUOtStEN8udIQx0O6rqDT6uOuqKFZamEzn8mXebWKH/G4QCjnKYyaYvP0s5205lF/i/c/myPMAv38dwvUF5paNi0oHV/UuekMduZKCif78sV0vgMqhod+lw4UbIV025LE9P8BwYsjYmZSUEf3NE5574lhQhpcI2cMHPusjR5HASPcpGQyhUO7SZaOdhVH8oiNOYhht7dD2IuRqpoSNOjXx4+oOheuWhE2tOaAFn3fKC480U6Z2DZsoFuvAc0yiLba8+siJQPaM4yc4nBFTfv3SRURZHlN2i7UurhoDTE17PWGnlzjevUPHj3F66yLipNg2es0OOtUG3F4XGPeBUY+CO6CVNcIY4c13H60iNg55Dd+ggCplhJlTeN/TiHMZxIU8gmIR7nkRdoEsX4CdycA+OYGdStF7p/ROFl6nB5vExSENcX1y6DTb0A+OcZOtQRsYaI8cVAYebiYhbrUIbUNA9fDQLIGJuoB+N4SZyWN6kkFb9WE6BBsnncborIh/Kj5UIkSuNcMfhwr+Puvg87GC1PUYE1tAo1NKI4ca7WZC8aY1MVPnmO3v46apwfKBPY8oY+YvsDg4hJ3NwSyVYdRb0Ntj6EMD07EFjW1oQutMoN10oF9WYeWLWBwdY36UwmykY0oLze37pMQyoPQ5GQHNOuLyJcJCDlHuOyKKa3RGlk0jymcQlYoQ9QrQa0E4Dlh+Q8kU4nN471AzPPx5MpZqM55ZaAz014nhdpZXalNS5giJe67tYsI0EmLJktX72wBn/EkMijcw5S1qE9D5VSOQ63GRmhFDFrYHa+G+jcvmIsTBuQ43EFJQi5U2CuUWFauBFIlXO9xBy/cdWf4Tiw8sUqQ2X4s6PAKVppuoKgN57NvWKJFiP3HIit0cOuC5nBQuUK0esYIwGb3F4YfDxiZgZ6imMHxcz8ec4MKFikfucRaOJ0ebxl0w4lLBxW1dpMazAJ8+d2AT9TQq6nkqUBWKIxf7RnuEBsWyVGujVG3LibuK1Hi70O+S+VV/wwUrKbg3ONzR2zxUeAYq7UzEyYqU5VBdrpsyy5zZ65selI6KH5cKlJ4OMbxEc/8T3Nohfl61thyylg2ny4YzJE1jLlukOjNzQYmh7+0pFs08Qr37P8HGo6qlDBy5Q87ibG5LmPAuTcuFT22x63oSSokcOsSU/I0pEzMmcWXadQYa9YdTUp072ftpuiUXSHxk8UKrkaTLXTtkrNlevC4P4l7+Vxhc2W6A/SSG3MHyw+1cKleTsKkqfVzXOzinEFimAT39G7pffgGMzk74PAC2aS8pxXLFWGQ6cTI4EXxfCelSE0wUuP0y1Qz7P4YN7/y278Cn9mJBmexSdneJwEt94tohtxCpq5n8kmGTLTZgzp3nWJYENo+6PfHGI/NH+OhWGYah5HTSW+iT26gs9qF49RG3ScG2KfQEmb/SqrxWTAkyR9mqxGGWrmWMy5eYtFRsc6PYfPEZ3MsXVzluQRw3oFriy3AkacCYVXHMPfb9fYTVePsmv6FfnNg49nvbk99rHMN/ARKh25owvVJJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img13\"\n        title=\"\"\n        src=\"/static/3b6f9bbc6314781ed49358eea1a45ae9/78e79/img13.png\"\n        srcset=\"/static/3b6f9bbc6314781ed49358eea1a45ae9/222b7/img13.png 163w,\n/static/3b6f9bbc6314781ed49358eea1a45ae9/78e79/img13.png 265w\"\n        sizes=\"(max-width: 265px) 100vw, 265px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Workers도 무료/유료 요금제로 나눠져있는데 무료로 써도 충분하다. (물론 서비스 커지면 유료로...)</p>\n<p>하위도메인이란 것을 입력해야 하는데 쉽게 url 접근할 때 이름이다.<br>\n이미지의 하단에 보면 my-worker 해서 설명 보면 주소가 예시로 표시된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b4aca18805e62d8c291735d0e089e317/35751/img14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.43558282208589%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3ElEQVR42q1USXLbMBD0s3PILT/IE/yAVKpySo4+5Ae+KXHZlElKFEUSXLCjMzMsypEsWzp4qpogAU4D3QPgBm9EiAl39y1UP0BrDe89jDGC9+ImpYRTxBgFanSw1sE5hxCCkDKWccZprhB+VPAEB8KlZXllWQo2mw2Kojj6rqrq0D8Mw1HuESFLYrJxHKGUEnBC3/fSx1i+GTzOfdZaseEVoXOeEjhxkB+ZvG1b5Hku4BXVdS2ky8TTNEnLHr8i9D7g1E8pUGLz06EAV3vYqTEO2sXgfeQx5rtUhNMJhJBn51hVEfdFxNi3JMlg0g773qNWHs0Q0Ci2oDnIeyE9v0J6xIawo9eaSrSjIg2ObNDGEub9mGK4LHl+gc0q+3VVms9Zgy/PCp/Wtf6+bQ2eyjautwrZpsN+8Ogt2aNn7Gn1VedEgaxKCMV4kpwPhB55E7Dee8FjZfBM7QyHbGcJDkWXUCrgaavxtxzxUDkxPKWTfcj7iT2aQVL1RGdZU8EmNN2IVo1yllnaxSq/Fd/utrj9VeL2Z4kfvytSk64qylEsN4slPBYKf9YdVlmHh5I2MlXfGC2Krl4hE/KRYgTvEIOT1tIWnYx/n/DcFfS/lihFS3Ja5rGXy+TctfcPEDsww2qN4KIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img14\"\n        title=\"\"\n        src=\"/static/b4aca18805e62d8c291735d0e089e317/a6d36/img14.png\"\n        srcset=\"/static/b4aca18805e62d8c291735d0e089e317/222b7/img14.png 163w,\n/static/b4aca18805e62d8c291735d0e089e317/ff46a/img14.png 325w,\n/static/b4aca18805e62d8c291735d0e089e317/a6d36/img14.png 650w,\n/static/b4aca18805e62d8c291735d0e089e317/35751/img14.png 873w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<p>일단 무료 요금제를 선택한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4f29a269caad62cac37a4bff256ce4e/024d6/img15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 124.53987730061348%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC7klEQVR42oVVyY4TMRCdn+UTuHACIXHmAr/AojkgceICEuILRoIbYZSZSafTi9u92W23/ahy0kvSPdBSJW678lz1XlXlCrPHT0vHH9Z6QatPzuEzvX7JSmOq1pKjw2PP1QXQGbbtvbDOvbXWvabXN3eJVru0Rd9b709OcxsBux64TztsosrtRI9drt/VHZ7UBk9bg2eqx3VDgcWF9pUGRLtutj8BOoLX1kMbH8A7i8L0/sE6RLXqtnlRJWR9Kkq05MA/NCvGYV/hP49SCnmWITkccDjE6Lrun/6PAY7UGGM8gfq2bQO4c25y8I+JQidzW9tbszW/I4d0K5v3x+9Edmi0De/sNJ37U4QOouqC8Xo4ZxsBg9rET1mW2CcFMiFRSnkBROJpjaapkeYSSVZAFgWYjgHnLOVjMVvc3v5BHMcToQPgyceQzJvNBr/JeD33GQGH0uQ1R0piLAGHNrIaupGoZQbdVktA5ya5ysbgUGjkxI+xbgGojcOr6zu8+LDF8/dbvPy4DXurKYfo6FBRZbPZ3o37A5ec4o9fBb7d5Ph6k+H7T3G6+CLltlXIqICFyIPJQgRR5pcxv3kuoJqCUpWwXUOpl9Tb/TLCjvtsHyOKIuxJEFZucBwjpHWcCmzvd8gYWOmRroUofMCdwDZ0xSXgwGFF04L9/WyMLQCb5ggyKMzG63nKvJckCbI0QZqmoWbzPB8r4gyQiWV+0pOzECJEeiYK+XJBR/sD5Izf1QhpmKKqarKKgBqKuFkAcmErGl9V6+AuBsOiDoebakW9XFBq0oRLhlT4nNtOlhU6+ub1wPmqylorio76lyJkoN758aK5KDUJkkniesbzcHYO2BniTQY7CtROreYmUfg8zUSIbGrbFQ5p5CPJK0QJTZtDTsNhH1TkCLigjzw7EoymN52x2qzwMGlWRdlnCnGukAgFUbaBBo6KORpTpr/RTBKHdBFfdlmrZxHexyXuogyt6oKKl1PZWkq5kKNYayr/Bc6noXluCDVXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img15\"\n        title=\"\"\n        src=\"/static/f4f29a269caad62cac37a4bff256ce4e/a6d36/img15.png\"\n        srcset=\"/static/f4f29a269caad62cac37a4bff256ce4e/222b7/img15.png 163w,\n/static/f4f29a269caad62cac37a4bff256ce4e/ff46a/img15.png 325w,\n/static/f4f29a269caad62cac37a4bff256ce4e/a6d36/img15.png 650w,\n/static/f4f29a269caad62cac37a4bff256ce4e/024d6/img15.png 961w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<p>생성이 되면 아래의 계정 ID를 잘 확인해둔다.<br>\n근데 어짜피 CLI 툴에서 또 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c552714830f4a1a6578cc6e6c9126a88/3c492/img16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.05521472392638%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVR42q1Sy04DMQzc/z8jIQHiC/iF3hA3johjkUBogbbb7sZxEscZnPQhiri0wtpRRnJ2PHbc9X2P+XwOIoKINKSUGn7yUgr2EWOE974kkWK5lllTBkdFN6wIm/WIwL5eQggBzHzgFUS+Cd09fOF21iMFj8VyCXYjkonXAvVeLdyhKFaTIkoxqsg577DlqgX2IVuOoyAkhTcyOefFb6garu73HXTQiNmzoB+sClNrvbqrJ9s5+YjBCTZTgFh79SfP/EQhXBu9MtzvJlGiWMtNXfPRjH7zA8xlDXp/y3Hx6YyOquoMUvNNEKdFqyTD4iV+vF7ao9zY/C5sfo8marMM5VTBFo5Fl6O9BJB2M8z73FmCHMRE85+5cx1iJNvZXP5H0NbGEP7P4UgJZC63W3As+A34Fl/fWVHPXwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img16\"\n        title=\"\"\n        src=\"/static/c552714830f4a1a6578cc6e6c9126a88/a6d36/img16.png\"\n        srcset=\"/static/c552714830f4a1a6578cc6e6c9126a88/222b7/img16.png 163w,\n/static/c552714830f4a1a6578cc6e6c9126a88/ff46a/img16.png 325w,\n/static/c552714830f4a1a6578cc6e6c9126a88/a6d36/img16.png 650w,\n/static/c552714830f4a1a6578cc6e6c9126a88/e548f/img16.png 975w,\n/static/c552714830f4a1a6578cc6e6c9126a88/3c492/img16.png 1300w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<p>이제 서비스 생성을 해야 하는데 여기도 대시보드에서 가능하지만, 난 <strong>Wrangler CLI</strong>로 콘솔에서 생성하였다.<br>\n취향차이인데 편한대로 해보자.</p>\n<p>아까 맨 위에서 <strong>wrangler</strong> 실행하면 나온 명령어 중 아래와 같은 것이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">wrangler init [name] 📥 Initialize a basic Worker project, including a wrangler.toml file</code></pre></div>\n<p>아래와 같이 실행해준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/37b6cd4f359d6e044f71dad432deb0cc/0a47e/img17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.31288343558282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVR42m2Qy06DQBSGeREXRinKHYaBMjDl0hZ6iZVW6y111YU7lxqDD+H7+SIusL8DJk00XXw55zs5c3LOSBfr7eni6tFZbp6srJhbsmZbmu2LKFCpfXRCNeb7xfM6+Xp9GCLP2M7sc7BBCdJPQcIMQTxGKFxzQkg3m+1HPr1+ycrVuxPk9bFs1PK5UysGFZBa1t0304s/bT+BQeJvw41gUw6TRNAdBsNlnbf1nkYgLatlw3naDHjShIw3Jokb0dTIqrtH0b1dT/fQInKcGbRDOeBSMa+QlRVG0xVml7eYLu4wq+4RphMEfAzNDrstWlQrEN7fDzqE1D5iyQR+PIIfDUHZ8DfvfAQ3SOCJf6Is7860vPjPdv8H/gDVUpfVFTKKYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img17\"\n        title=\"\"\n        src=\"/static/37b6cd4f359d6e044f71dad432deb0cc/0a47e/img17.png\"\n        srcset=\"/static/37b6cd4f359d6e044f71dad432deb0cc/222b7/img17.png 163w,\n/static/37b6cd4f359d6e044f71dad432deb0cc/ff46a/img17.png 325w,\n/static/37b6cd4f359d6e044f71dad432deb0cc/0a47e/img17.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>여기서 물어보는것이 서비스 자체에 package.json을 두고 관리할 것인지를 묻는건데 난 프로젝트 내에서 같이 사용할 것이라서 <strong>N</strong>을 선택했다.<br>\n만약 외부에서 따로 관리하거나 할 경우 <strong>y</strong>를 선택해서 사용하자.</p>\n<p>즉 쉽게 worker 서비스는 위 링크에 들어가서 확인한 것처럼 <strong>서버리스</strong>를 위한 서비스이고, 그냥 수행할 코드 조각이다.<br>\n그래서 이것을 <strong>worker에 배포하는 작업을 하는 프로젝트</strong>라 보면 된다.<br>\n근데 하는 역할이 그냥 코드 조각 수정이나 배포밖에 없고, 또 프로젝트랑 같이 사용하는것이라서 나는 프로젝트 내에 넣어서 사용했다.</p>\n<p>궁금하면 따로 만들어서 해보고 하면 이해가 될 것이다.<br>\n그래도 이해가 안되면 따로 찾아보거나 댓글로...</p>\n<p>무튼 다시 이어나가자면...</p>\n<p>위 명령어까지 수행하면 아래와 같이 폴더가 하나 프로젝트 디렉토리에 생성되며 <strong>wrangler.toml</strong> 파일이 추가된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 227px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1a153235fdecadee8dce3a1f9fdf78e3/9b5be/img18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.87116564417178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB90lEQVR42pWT246bMBCG8yDbJiGcjG2MgUA4JEDOUZJtpapqc1epd3u3z9AH/zuQw7ZKtGovfuzxjL7xjIeeK8fwowLb52/YfTohzucYsQCOjGGL6L/kihg9hz6eSpAQaF5v4YcZLB7CJlneVfpi6/dFMT3TDdA3PZg2x6+vJ6yqFZiawHIVPg4c9A2G/pDR3sWA4h5q5HVxI8dHj6kUQVIhnDRodl+Q1BuMl2ska1oXK8TNslO62UCNZ/Dj6d+KpgjSCjqvwYMMPS+YEGyOpFjh8+knys0B2WGP/EDrfo/Jdtfti+cjJa7vNa4RUruicgGhCyqZaRi2xNBw8IHPwI6v8NIYwYJuva6hSbLMoZczODqi8jiGlriptW1fwwkjGJZsgQEBBUxHIF7kBKvBwhgiyyCnOWSRgyeTzjY91fVsaPE3mRwjV57V9rADUiabK/x4PWLa1OSM6LVzMJoASX1RYUF2AdN9ACS1Z92jkL8Dtoc2D6COKRSVWxUZZRO34E7WPejqdz0fnlQY2rcbnoHj79TgIkWeJnSbM7BtxyPQG5DDYhIOQY1zyfoMFCGeXl4gmg3KigY8yvE0sN+F/Qnt0yyO3Avw6qgWMc1SSCM0hyKg0CllDx727V4XoHUBDkjr0oX0fRT0C5Y04NNmC8+PKTv7Z+BvhuuRde8hbXsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img18\"\n        title=\"\"\n        src=\"/static/1a153235fdecadee8dce3a1f9fdf78e3/9b5be/img18.png\"\n        srcset=\"/static/1a153235fdecadee8dce3a1f9fdf78e3/222b7/img18.png 163w,\n/static/1a153235fdecadee8dce3a1f9fdf78e3/9b5be/img18.png 227w\"\n        sizes=\"(max-width: 227px) 100vw, 227px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>여기까지 한 다음에 계정의 정보를 알아야 하는데 대시보드에서도 볼 수 있지만 아래의 명령어를 통해서 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> yarn wrangler whoami\nyarn run v1.22.19\n$ x/node_modules/.bin/wrangler whoami\n ⛅️ wrangler 2.8.1\n-------------------\nGetting User settings...\n👋 You are logged in with an OAuth Token, associated with the email test@test.com!\n┌─────────────────────────────────┬──────────────────────────────────┐\n│ Account Name                    │ Account ID                       │\n├─────────────────────────────────┼──────────────────────────────────┤\n│ test@test.com's Account         │ 12345677880                      │\n└─────────────────────────────────┴──────────────────────────────────┘\n🔓 Token Permissions: If scopes are missing, you may need to logout and re-login.\nScope (Access)\n- account (read)\n- user (read)\n- workers (write)\n- workers_kv (write)\n- workers_routes (write)\n- workers_scripts (write)\n- workers_tail (read)\n- d1 (write)\n- pages (write)\n- zone (read)\n- offline_access\n✨  Done in 2.42s.</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 558px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ba03419c6ae118520bbda8a953731c92/42a8d/img19.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.07361963190185%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACwklEQVR42p2TS2/TQBDH/T04JrETv+LH+hU7ju0kTpw075K2KSCBUECgVuLMF0Ec2g/AR0Ao3KESFUdOnBqJEwghJGQPsw4pVIJDOfy045317Mz+ZxjZbr7zw948TqYLv7WzkHR7UeSUBcfrObyoHd4oqrPe7NbZ0c0QHk4bqV6zQHMaYLotpAmaHQAr6MCJBJhGM/l8+97jo9bO/H53vFhqxF+WeG1ZlsiSE/UHeOhupWo8rere96rRAEn3Mln3QDV9kHU3Uww/q8hmhgEzPJsxQRTDaDRJ6/UgdV0vNS0vRWeKQdOSsIEVCN2DEo/gyv6iLBmAwfJ1C9PvuJB0E3AbHej0phB1x2B57Q1uG8xaBMRqgF1vZxZi1KLU9FpguM0veNGjsqQc4CV3SgLZZyX9CSMRF5R4F+R4DpLXhTK+A684IKgOiBr6mhNQqc9ugqDYm31EqNo/MKNzDPoGeYsZ46q9ZwqC8YI121HFbI441R1wAskpcuqAk9FW/QFHokFRtjd76CvwZFjg1S6We1aRLSpGSkunMI4ffKyH3ZeOH79GVkattSJOsLLr8cpE2/baK8OJcrDslUm/6b4fv9Kt4JNuh6AY9fRSFB9FSUZ70O7vQqM9BJl4qCSWmqvo0cO5XSX1HOqvEqoyKq7VLqEtk7eNpLlZEI/SoD1MMau0VFE3CvPab7X/sOnK5srndrZV/DIgvak/PgBsamglU8BSoIxvsT1wXRjaoDvTQ8AsIcay+5MFeGHvyq3XCkjfKBntQxOzo6NEnChX678zVHCckuE+dAfzvJkLZeVK52+hGRdxUgoIK/47e0Y3a99ayeQi7IzX+I5rQa2t8ec1J5FLWJFciKr91SAWUETJwqD/CFjVnQ8KqT9XiHeqBdMTJdo7kfwxMs2R/ckp682e9cZ758fzEI5nURZqERTpLP8l4E+X1cMo19I3ewAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img19\"\n        title=\"\"\n        src=\"/static/ba03419c6ae118520bbda8a953731c92/42a8d/img19.png\"\n        srcset=\"/static/ba03419c6ae118520bbda8a953731c92/222b7/img19.png 163w,\n/static/ba03419c6ae118520bbda8a953731c92/ff46a/img19.png 325w,\n/static/ba03419c6ae118520bbda8a953731c92/42a8d/img19.png 558w\"\n        sizes=\"(max-width: 558px) 100vw, 558px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이제 위 정보를 토대로 <strong>wrangler.toml</strong> 파일을 수정해야 한다.</p>\n<p>파일을 열면 아래의 정보만 기입되어 있을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token key property\">name</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"[아까 wrangler init 에서 입력한 이름]\"</span>\n<span class=\"token key property\">compatibility_date</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"2023-01-28\"</span></code></pre></div>\n<p>여기를 아래처럼 수정해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token key property\">name</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"luckynum_dev\"</span>\n<span class=\"token key property\">main</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"index.ts\"</span>\n<span class=\"token key property\">compatibility_date</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"2023-01-28\"</span>\n\n<span class=\"token key property\">account_id</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"12345677880\"</span>\n\n<span class=\"token key property\">workers_dev</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">true</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">vars</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">AUTH_KEY_SECRET</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"key-key\"</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token table class-name\">r2_buckets</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">binding</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"MY_BUCKET\"</span>\n<span class=\"token key property\">bucket_name</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"lucky-num-dev\"</span></code></pre></div>\n<p>그리고 해당 toml이 있는 디렉토리에 index.ts 파일을 하나 생성해준다.<br>\n이 파일의 경로는 위 <strong>toml</strong>파일의 <strong>main</strong>항목과 연계된다.<br>\n경로 또는 파일명을 바꾸고 싶다면 저 <strong>toml</strong>과 함께 수정 처리하면 된다.</p>\n<p>내가 작성한 코드는 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Env</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">DEV_BUCKET</span><span class=\"token operator\">:</span> R2Bucket\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">hasValidHeader</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> env<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"X-Auth-Key\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">AUTH_KEY_SECRET</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">authorizeRequest</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> env<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>method<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"PUT\"</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"DELETE\"</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"GET\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">hasValidHeader</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> env<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">parseRange</span><span class=\"token punctuation\">(</span>\n  encoded<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span> offset<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> length<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>encoded <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> parts <span class=\"token operator\">=</span> encoded<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bytes=\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parts<span class=\"token punctuation\">.</span>length <span class=\"token operator\">!==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Not supported to skip specifying the beginning/ending byte at this time\"</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    offset<span class=\"token operator\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>parts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    length<span class=\"token operator\">:</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>parts<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>parts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">objectNotFound</span><span class=\"token punctuation\">(</span>objectName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Response <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;html>&lt;body>R2 object \"&lt;b></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>objectName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/b>\" not found&lt;/body>&lt;/html></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      status<span class=\"token operator\">:</span> <span class=\"token number\">404</span><span class=\"token punctuation\">,</span>\n      headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"content-type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text/html; charset=UTF-8\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isNullOrUndefine</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> x <span class=\"token operator\">===</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>request<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> env<span class=\"token operator\">:</span> Env<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Response<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">URL</span></span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> objectName <span class=\"token operator\">=</span> url<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">authorizeRequest</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> env<span class=\"token punctuation\">,</span> objectName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Forbidden\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token number\">403</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>method<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">\"PUT\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">const</span> uploadObj <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">DEV_BUCKET</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>objectName<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          httpMetadata<span class=\"token operator\">:</span> request<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">const</span> resultJson <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          uploaded<span class=\"token operator\">:</span> <span class=\"token function\">isNullOrUndefine</span><span class=\"token punctuation\">(</span>uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"uploaded\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token operator\">?</span> uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"uploaded\"</span><span class=\"token punctuation\">]</span>\n            <span class=\"token operator\">:</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">,</span>\n          etag<span class=\"token operator\">:</span> <span class=\"token function\">isNullOrUndefine</span><span class=\"token punctuation\">(</span>uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"httpEtag\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token operator\">?</span> uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"etag\"</span><span class=\"token punctuation\">]</span>\n            <span class=\"token operator\">:</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">,</span>\n          size<span class=\"token operator\">:</span> <span class=\"token function\">isNullOrUndefine</span><span class=\"token punctuation\">(</span>uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"size\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"size\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">,</span>\n          version<span class=\"token operator\">:</span> <span class=\"token function\">isNullOrUndefine</span><span class=\"token punctuation\">(</span>uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"version\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token operator\">?</span> uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"version\"</span><span class=\"token punctuation\">]</span>\n            <span class=\"token operator\">:</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">,</span>\n          key<span class=\"token operator\">:</span> <span class=\"token function\">isNullOrUndefine</span><span class=\"token punctuation\">(</span>uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"key\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> uploadObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"key\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>resultJson<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            etag<span class=\"token operator\">:</span> uploadObj<span class=\"token punctuation\">.</span>httpEtag<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">\"GET\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">DEV_BUCKET</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>objectName<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>object<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>\n            <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token string\">\"fail\"</span><span class=\"token punctuation\">,</span> message<span class=\"token operator\">:</span> <span class=\"token string\">\"Object Not Found\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token number\">404</span> <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">\"DELETE\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">await</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">DEV_BUCKET</span><span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>objectName<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token string\">\"success\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          status<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>\n          <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token string\">\"fail\"</span><span class=\"token punctuation\">,</span> message<span class=\"token operator\">:</span> <span class=\"token string\">\"Method Not Allowed\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span> status<span class=\"token operator\">:</span> <span class=\"token number\">405</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>몇몇 죽은 코드가 있는데 필요에 맞게 커스텀 해서 쓰면 될듯 하다.</p>\n<br>\n<h3 id=\"6-암호키-만들기\" style=\"position:relative;\"><a href=\"#6-%EC%95%94%ED%98%B8%ED%82%A4-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"6 암호키 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 암호키 만들기</h3>\n<p>이제 worker와 통신할 때 쓸 암호키를 만들어줘야 한다.\n콘솔 CLI에서 아래와 같은 명령어를 봤을 것이다.</p>\n<blockquote>\n<p>wrangler secret 🤫 Generate a secret that can be referenced in a Worker</p>\n</blockquote>\n<p>그렇다면 이제 만들어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> yarn wrangler secret put lucky_key -c ./luckynum_dev/wrangler.toml\nyarn run v1.22.19\n$ X/node_modules/.bin/wrangler secret put lucky_key -c ./luckynum_dev/wrangler.toml\n ⛅️ wrangler 2.8.1\n-------------------\n✔ Enter a secret value: … ********************\n🌀 Creating the secret for the Worker \"luckynum_dev\"\n✨ Success! Uploaded secret lucky_key\n✨  Done in 57.18s.</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/68f2ead198795fc1c837d2f77c91936e/f7616/img20.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.245398773006134%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVR42o3My07CQBgF4D6EWxcqofRCMXSmhYl0Op1xGIRpxQQvWxMTn8qlcQEv4NJXIPgYrl0Qjk1NYMviy/lzcvI70ty9VQ8vTNtH0wli3aq1I2pOTr3RzIw/XxcanLNtnwlQViAe5iBDgXiQ45JmYNzUxk1SJuGYqf0RhV4zlm2CiG7ckDTC3uDb7aa/Z0GKOuH3UnjdBF70zw3p/j50BE6m55jYBYy9h9AVuLKQkzlG4gaEKZz7BBd+vxkfw7nK1Re/Lj9k+bRKittlzKfLpChXLSLftVTr5yqHSrNd26dHPfwDSDl7HPAKjosAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img20\"\n        title=\"\"\n        src=\"/static/68f2ead198795fc1c837d2f77c91936e/a6d36/img20.png\"\n        srcset=\"/static/68f2ead198795fc1c837d2f77c91936e/222b7/img20.png 163w,\n/static/68f2ead198795fc1c837d2f77c91936e/ff46a/img20.png 325w,\n/static/68f2ead198795fc1c837d2f77c91936e/a6d36/img20.png 650w,\n/static/68f2ead198795fc1c837d2f77c91936e/f7616/img20.png 766w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<p>여기서 입력한 암호는 위 <strong>toml</strong>에서 <strong>AUTH_KEY_SECRET</strong>이 값과 같아야 한다.<br>\n그리고 이 값은 향후 헤더에 넣어서 보내야 하는 값이다.</p>\n<br>\n<h3 id=\"번외-서비스-대시보드로-생성법\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%B2%95\" aria-label=\"번외 서비스 대시보드로 생성법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(번외) 서비스 대시보드로 생성법</h3>\n<p>만약 CLI가 좀 어렵다면 대시보드로도 가능하다.<br>\n사람마다 다르지만 사실 GUI로 하는게 더 편하고 좋다.</p>\n<p>아까 대시보드에서 서비스 생성을 누르면 아래와 같이 뜬다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fad03a014527e1971f36c5380b8eb15d/b04e4/img21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.25153374233128%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACCElEQVR42q2Uy47TQBBF/dds+A127EYg8Qd8AAtGIIGAzQgYTB4znsnT/ba725dbHTuKBIIIxdJRJe727apbZVc5A8Zn5GHAJa6q73us1ltorS8jGELAYrHA/f0djDFFWOLwnxlX8mCMEZKp0HVdYRSkIUgn/POUKqUE7/15GZ2xp3LOYTaboWmawljyIIfQjhkPfE8+9DF90jbEszKUEkVYGH3MUj4F33DPM/KcXOWc/ZTrXz2UbET4ol1W7b40xbjIuUzM1sM7m621KQRPwnlN6fqIVluW6qGMw0YnrFRCazsY66C4pvTBDpZc+FMD5Z5Q+S5C07fZbM5ZbGCtKT462mCMLVmHPtPnvjStrmu0bVv2MPsSBam0CHYxo0/0kcKCcQHaelhGw+hDD2muzKrhBMiDY8OOMyvIehGUH9vmAdvHR2xWaxjlYI2IBWbZFVFrDyVL84Tir58IR4qgdHezXOLu9ht+3n7Hj3qO5XyJ9XKB/foB7W5HS+ijMkSP8Xe0PryuVc8MW240vKGVwl4r/lfQ9EkJXJPN53AQpB97PtgxJnZQMp6IKWVakiZO1457Il8MToogva+mll/qqmSuTrsmkQ0Yxq/PnOvX5B35Ms3aRPAOq53B2xuF6xtWGYeD4CQkUTrH+crjJ+0jD31JXpHXp0Msl2q3+Py1wZOrGk9f1NAu4RcGpMvLQjr+QQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img21\"\n        title=\"\"\n        src=\"/static/fad03a014527e1971f36c5380b8eb15d/a6d36/img21.png\"\n        srcset=\"/static/fad03a014527e1971f36c5380b8eb15d/222b7/img21.png 163w,\n/static/fad03a014527e1971f36c5380b8eb15d/ff46a/img21.png 325w,\n/static/fad03a014527e1971f36c5380b8eb15d/a6d36/img21.png 650w,\n/static/fad03a014527e1971f36c5380b8eb15d/b04e4/img21.png 888w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>서비스 이름을 원하는 것으로 작성한다.<br>\n그리고 아래 <strong>스타터 선택</strong>은 해당 워커로 접근 시 처리할 코드 조각인데 다른거 건들지말고 <strong>HTTP 처리기</strong>를 선택하고 진행한다.<br>\n어짜피 위에서 작성한 <strong>index.ts</strong>파일로 수행할 것이라서 서비스 생성을 진행한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0b6cf24b443f1c29e5a86654a7ffa6c6/e4611/img22.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.79754601226993%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB40lEQVR42qVUy2ocMRCcDw/kGMjFlxwMBn+AD7kll4TNwQRsfEsgkIshWbweP9i1R4+RWmq1qzWZjRfG9m4iqNG71F0qTROT3GaWDyJyAJyXUjLqIlsWxkrGZ2WTXN+RNBg7zFle5ZxfM/O7kQzt9SYcAsgflHVfS0wsfUgy+7aSo6830jjnfnnvP2JuBpLPwCe0u4GYy1+CAZuHjGOoEUBKiLDv+9aY+2PKPHPOzxDaCUgDIhaiJAl6OGexGH1A2yFEKROiKHkTQrjF5gsdQI2D+DJQ/h5j/KGHKglRrFpFPYBIMjpYuhGlSqRBqIY/sfk0xiCoKad4Vgp/wbhGSo/Tq6mVaXBNOUmjKWkDXEXB5LCAa0q6aBfUlImIFZOeeOISJiOsUQ4aFmOMZKL32PcG2APeJub9zliymOu6bsNGk2ePl4L7lpUh+d2a1WKxaOfz+dVyuWwxfwOSUsrWHh8IVS+COSkPXhr1eJzmNtppupXQeS8wNi4lFE1/BPyptSieilKHPV7JvemlswRb5XopVSMQqG0m8VzaOqd71SnVhx6uD/hDaMreR5X0n0tNuQeh86E+cosaz28d1ajPLmgIm9v2Uozpql7W2jVG/XYi1GhgE1Et/7eMP4cazUvG3ZbwATHrhNVdLpiZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img22\"\n        title=\"\"\n        src=\"/static/0b6cf24b443f1c29e5a86654a7ffa6c6/a6d36/img22.png\"\n        srcset=\"/static/0b6cf24b443f1c29e5a86654a7ffa6c6/222b7/img22.png 163w,\n/static/0b6cf24b443f1c29e5a86654a7ffa6c6/ff46a/img22.png 325w,\n/static/0b6cf24b443f1c29e5a86654a7ffa6c6/a6d36/img22.png 650w,\n/static/0b6cf24b443f1c29e5a86654a7ffa6c6/e548f/img22.png 975w,\n/static/0b6cf24b443f1c29e5a86654a7ffa6c6/e4611/img22.png 1298w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 서비스가 생성되고 아래와 같이 서비스에 대한 요약 내용이 나온다.</p>\n<br>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>여기까지가 준비 과정이었다.<br>\n좀 복잡하고 과정이 길었는데 천천히 하다보면 어렵지 않게 할 수 있다.<br>\n혹여나 이해가 안되거나 문제가 있고, 해결하기 어려운 경우 댓글을 통해 공유주시면 같이 해결해 볼 수 있도록 노력해보겠다.</p>\n<p>다음은 <strong>Nest.JS</strong>에서 파일 업로드, 다운로드, 삭제 등을 구현해볼 예정이다.</p>\n<p>아래의 포스팅은 Nest.Js에서 구현한 부분을 다룬다.</p>\n<p><a href=\"https://elfinlas.github.io/nest_js/230203_r2_nestjs/\">CloudFlare R2 사용해보기 Part 2 (With Nest.Js)</a></p>\n<br>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://developers.cloudflare.com/workers/wrangler/install-and-update/\">Wrangler 설치법</a></li>\n<li><a href=\"https://developers.cloudflare.com/workers/wrangler/\">Wrangler CLI 사용 가이드</a></li>\n<li><a href=\"https://dash.cloudflare.com/af0fb192ecd83eade23b5f72b1677fc2/r2/overview/cli?from=overview\">R2 사용 가이드</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"toc\"><pre class=\"language-toc\"><code class=\"language-toc\"></code></pre></div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#aws-s3-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C-%EA%B3%A0%EB%AF%BC%ED%95%98%EB%8B%A4%EA%B0%80\">AWS S3 사용할까 고민하다가...</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%82%AC%EC%9A%A9%EB%B2%95\">사용법</a></p>\n<ul>\n<li><a href=\"#1-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%ED%94%8C%EB%A0%88%EC%96%B4%EC%97%90-%EA%B3%84%EC%A0%95-%EC%83%9D%EC%84%B1%EC%9D%84-%ED%95%B4%EC%A4%80%EB%8B%A4\">1. 클라우드플레어에 계정 생성을 해준다.</a></li>\n<li><a href=\"#2-r2-%EA%B0%80%EC%84%9C-%EA%B5%AC%EC%9E%85-%EA%B2%B0%EC%A0%9C%EB%A5%BC-%EC%A7%84%ED%96%89%ED%95%9C%EB%8B%A4-%ED%94%84%EB%A6%AC%ED%94%8C%EB%9E%9C-%EA%B0%80%EB%8A%A5\">2. R2 가서 구입 결제를 진행한다. (프리플랜 가능)</a></li>\n<li><a href=\"#3-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EC%97%90%EC%84%9C-r2-%EB%A9%94%EB%89%B4%EB%A1%9C-%EC%9D%B4%EB%8F%99%ED%95%9C%EB%8B%A4\">3. 대시보드에서 R2 메뉴로 이동한다.</a></li>\n<li><a href=\"#4-%EB%B2%84%ED%82%B7%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%B4%EC%A4%80%EB%8B%A4\">4. 버킷을 생성해준다.</a></li>\n<li><a href=\"#5-workers-%EC%83%9D%EC%84%B1\">5. Workers 생성</a></li>\n<li><a href=\"#6-%EC%95%94%ED%98%B8%ED%82%A4-%EB%A7%8C%EB%93%A4%EA%B8%B0\">6. 암호키 만들기</a></li>\n<li><a href=\"#%EB%B2%88%EC%99%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%B2%95\">(번외) 서비스 대시보드로 생성법</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"CloudFlare R2 사용해보기 Part 1 (With Nest.Js)","description":"R2를 한번 사용해보기","date":"January 27, 2023","tags":["CloudFlare","R2","Infra"],"series":"Cloud Flare","previewImage":"cloudflare_logo.png","isPrivate":null,"writer":null}},"previous":{"fields":{"slug":"/gatsby/230124_image_quality/"},"frontmatter":{"title":"Gatsby 블로그에서 이미지 열화(화질 저화) 문제 (With Gatsby-starter-bee theme)","isPrivate":null}},"next":{"fields":{"slug":"/nest_js/230129_tast_scheduling/"},"frontmatter":{"title":"Nest.Js에서 한국시간 기준 스케쥴링할 때 주의점 (With Timezone)","isPrivate":null}}},"pageContext":{"id":"b9fa8226-abd5-58a9-a069-f50c429b13a5","previousPostId":"8bafa0ed-c914-5045-9e00-188b54d25cd3","nextPostId":"7b17f725-16a5-5bf4-8162-37b01e686dd9"}},"staticQueryHashes":[],"slicesMap":{}}