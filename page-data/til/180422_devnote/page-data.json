{"componentChunkName":"component---src-templates-blog-post-js","path":"/til/180422_devnote/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab","siteUrl":"https://elfinlas.github.io","comment":{"disqusShortName":"","utterances":"elfinlas/blog_utterances"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"e4a0becf-1f4d-558e-93db-73fc811a2e9c","excerpt":"주의 이 문건은 과거 Hexo 블로그 (2018-04-22) 에서 이동된 문서입니다. 시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다. 오늘의 주제는? 간만에 작성하는 연구일지입니다. 정말 많이 바빠서 포스팅도 주말에 시간을 내서 작성하게 되네요. 이번 주제는 게시판에서 새로운 글 작성 시 사이드 메뉴에 표시를 하는 것을 다루겠습니다.  위와 같이 새로운 글이 작성될 경우 옆에 new라는 버튼이 뜨게끔 하는 것이 목표입니다. 프로젝트 진행 환경은 Spring Boot…","html":"<h1 id=\"주의\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98\" aria-label=\"주의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의</h1>\n<h3 id=\"이-문건은-과거-hexo-블로그-2018-04-22-에서-이동된-문서입니다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EB%AC%B8%EA%B1%B4%EC%9D%80-%EA%B3%BC%EA%B1%B0-hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-2018-04-22-%EC%97%90%EC%84%9C-%EC%9D%B4%EB%8F%99%EB%90%9C-%EB%AC%B8%EC%84%9C%EC%9E%85%EB%8B%88%EB%8B%A4\" aria-label=\"이 문건은 과거 hexo 블로그 2018 04 22 에서 이동된 문서입니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 문건은 과거 Hexo 블로그 (2018-04-22) 에서 이동된 문서입니다.</h3>\n<h4 id=\"시간이-지남에-따라-최신-기술과-다를-수-있으니-주의-바랍니다\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EA%B0%84%EC%9D%B4-%EC%A7%80%EB%82%A8%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%B5%9C%EC%8B%A0-%EA%B8%B0%EC%88%A0%EA%B3%BC-%EB%8B%A4%EB%A5%BC-%EC%88%98-%EC%9E%88%EC%9C%BC%EB%8B%88-%EC%A3%BC%EC%9D%98-%EB%B0%94%EB%9E%8D%EB%8B%88%EB%8B%A4\" aria-label=\"시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다.</h4>\n<hr>\n<br>\n<h1 id=\"오늘의-주제는\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%8A%98%EC%9D%98-%EC%A3%BC%EC%A0%9C%EB%8A%94\" aria-label=\"오늘의 주제는 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오늘의 주제는?</h1>\n<p>간만에 작성하는 연구일지입니다.<br>\n정말 많이 바빠서 포스팅도 주말에 시간을 내서 작성하게 되네요.</p>\n<p>이번 주제는 게시판에서 새로운 글 작성 시 사이드 메뉴에 표시를 하는 것을 다루겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 296px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.93243243243244%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAC60lEQVQ4y21T204TURSdTzAmGJFbr/Qy0870Mp3e71co0IBybSloKiAkxARNjPHJD/Ab/AP9Aj/BmPAgCS8qBgtthSY8SFuWe05pg8STrJw9cybrrLX2Hk7OFGDxBMD7I+C9YdiCMQg+qgkCvbMoQZhkP8xyoA+rN4Rhq4S17ef40wLa7TY6nQ6urq7AeRITkNNTULIzCE3PI7W4hujsEuJzK4gUFtgZ749CCMYhBGIMYjgJrUPBk90XjLBHpi5OSeUh0QfOWAaOSApyIgtXLM1qdVfPVMKbsBO5RvIQ4R4j7C2m0B3PIftoGbn5ImZXK9jae4nixg7KmztYqWyyMzOL4qbCFHROL1N42Qbq9TouLi66CsUA3WZzQi/K0AhOjPEStDYXQa0d9M4BI9nrg4iMohv3tAaUt3bR6gDHx8c4b54z65zF5YcSz8AZirPdl5qEN5FDZKKAUFatM9ARuZYuUveRcQuUpR3YFnaxWH4MEsgIm81m1zIvByFQ13hPEHI0DT8ROsiWh8jlWAruSBJ6OykmpTpSrrEIcBfWYJpcxfJ6hRE2GnVS2ESr1QZnp3yGxnmMWuwYNFhwX2/CoNGKEbOtD5WsS+gkQgmDGiPuDAyhRFlfkuVqtYqzs3McHB6BE0hhYuYhQrlpxPJziE/NIpydglGSWY66HuyU6bgd4nIK6+9fQVhPYqm8wRRWT7qE+1+/qRn6WH4iDbGLRiSUnYZC42IQXX1VPWjMEqz5MNKvS9DnvWR5s0tIChuN39g/+A7OpoTIphnDJoGsW/t1j+z2rjGJGNEKuDuoQ+npNlo0z7VajSk8PPwBzkBBTy6UEKauqg2J5QuQAlForrv6D2istDYHTG4vHph4FCvPGOFJ9ReqtQbefvgMzkSzpXbT7gsz2+5oElb6d7XCfwivlar5qk6KlW3WlEbtFEcnDcTefVIz9DKLY1aRYdRs76u7nWHv2UCDPaA1MoVqhvX6KX5WT/Hm4xf8BcCFSI0nn5BqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img 01\"\n        title=\"img 01\"\n        src=\"/static/756e4d2c6df497959675aa8fa40b5b0f/b1a44/img_01.png\"\n        srcset=\"/static/756e4d2c6df497959675aa8fa40b5b0f/b1a44/img_01.png 296w\"\n        sizes=\"(max-width: 296px) 100vw, 296px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>위와 같이 새로운 글이 작성될 경우 옆에 <strong>new</strong>라는 버튼이 뜨게끔 하는 것이 목표입니다.</p>\n<blockquote>\n<p>프로젝트 진행 환경은 <strong>Spring Boot</strong>에 <strong>Thymeleaf</strong> 에서 진행하고 있음을 알려드립니다.</p>\n</blockquote>\n<br>\n<h2 id=\"어떻게-해야-새-글이라는-것을-알-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC-%EC%83%88-%EA%B8%80%EC%9D%B4%EB%9D%BC%EB%8A%94-%EA%B2%83%EC%9D%84-%EC%95%8C-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"어떻게 해야 새 글이라는 것을 알 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어떻게 해야 새 글이라는 것을 알 수 있을까?</h2>\n<p>먼저 아래와 같은 순서로 구현을 생각해 보았습니다.</p>\n<ol>\n<li><strong>새 글이 작성된 기준은 조회 시점 정하기</strong></li>\n<li><strong>각 게시판에서 새 글이 있는지 알기 위한 체크하는 로직이 필요하다.</strong></li>\n<li><strong>새 글이 작성되었다는 것을 저장할 곳이 필요하다.</strong></li>\n<li><strong>새 글이 있는 것을 어디서 조회할 것인가?</strong></li>\n<li><strong>뷰 단에서 해당 값을 찾아서 있는 경우 표시를 해준다.</strong></li>\n</ol>\n<br>\n<h3 id=\"1번-구현법\" style=\"position:relative;\"><a href=\"#1%EB%B2%88-%EA%B5%AC%ED%98%84%EB%B2%95\" aria-label=\"1번 구현법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1번 구현법</h3>\n<p>프로젝트에서는 <strong>하루 전</strong> 작성된 글을 기준으로 하였습니다.<br>\n이것은 게시판을 저장하는 Repo에서 시간을 조회하는 메서드를 하나 만들었습니다.</p>\n<p><code class=\"language-text\">List&lt;Board> findByCreateDateAfter(LocalDateTime localDateTime);</code></p>\n<p>그리고 조회할 때는 다음과 같이 사용하였습니다.</p>\n<p><code class=\"language-text\">boardRepo.findByCreateDateAfter(LocalDateTime.now().minusDays(1))</code></p>\n<br>\n<h3 id=\"2번-구현법\" style=\"position:relative;\"><a href=\"#2%EB%B2%88-%EA%B5%AC%ED%98%84%EB%B2%95\" aria-label=\"2번 구현법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2번 구현법</h3>\n<p>새 글을 알기 위해서는 DB를 조회하여 새로운 값이 있는지, 그리고 있다면 어떤 게시판에 새 글이 있는지를 알기 위한 메서드가 필요했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//구형 코드</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getUpToDateContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Board</span><span class=\"token punctuation\">></span></span> boardList <span class=\"token operator\">=</span> boardRepo<span class=\"token punctuation\">.</span><span class=\"token function\">findByCreateDateAfter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">minusDays</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>board <span class=\"token operator\">-></span> <span class=\"token operator\">!</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">getCategory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">.</span>TEMP_BOARD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>board <span class=\"token operator\">-></span> <span class=\"token operator\">!</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">getCategory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">.</span>SYSTEM<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Board</span> board <span class=\"token operator\">:</span> boardList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">getCategory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">distinct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>게시판을 저장할 때 각 게시판을 위해 <strong>BoardCategory</strong>라는 Enum을 만들어서 저장하였습니다.<br>\n사실 저 코드는 옛날 코드고 지금은 코드 리펙토링을 통해 불필요한 연산을 줄인 코드를 만들었습니다. (Java8 만세!)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getUpToDateContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> boardRepo<span class=\"token punctuation\">.</span><span class=\"token function\">findByCreateDateAfter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LocalDateTime</span><span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">minusDays</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>board <span class=\"token operator\">-></span> <span class=\"token operator\">!</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">getCategory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">.</span>TEMP_BOARD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>board <span class=\"token operator\">-></span> <span class=\"token operator\">!</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">getCategory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">.</span>SYSTEM<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Board</span><span class=\"token operator\">::</span><span class=\"token function\">getCategory</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">distinct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h3 id=\"3번-구현법\" style=\"position:relative;\"><a href=\"#3%EB%B2%88-%EA%B5%AC%ED%98%84%EB%B2%95\" aria-label=\"3번 구현법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3번 구현법</h3>\n<p>저장할 곳은 세션을 사용하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setSessionDataInNewContents</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSession</span> session<span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BoardCategory</span><span class=\"token punctuation\">></span></span> categoryList<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        session<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>S_IN_NEW_CONTENTS<span class=\"token punctuation\">,</span> categoryList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 작성하여 세션에 저장하였습니다.</p>\n<br>\n<h3 id=\"4번-구현법\" style=\"position:relative;\"><a href=\"#4%EB%B2%88-%EA%B5%AC%ED%98%84%EB%B2%95\" aria-label=\"4번 구현법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4번 구현법</h3>\n<p>조회를 하는 것은 Controller 단에 로그인 등에서 처음 로그인 시 저장하는 법도 생각하였지만, 만약 세션 타임 아웃 시간이 길 경우 갱신에 대한 문제도 있었습니다.</p>\n<p>그래서 인터셉터에서 로그인 이후에 대한 호출하는 곳에서 세션에 저장하는 방법으로 구현을 하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">preHandle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> handler<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">hasSessionInAccount</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">checkAnnotation4ClearSessionInTempData</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span>handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">checkUpToDateContents</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token comment\">//세션에 계정 정보가 존재하는 경우</span>\n        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/users/login\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> ie <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">//만약 리다이렉션 도중 에러가 난 경우</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token comment\">//세션 정보가 존재하지 않는 경우</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span>\n<span class=\"token operator\">*</span> 새로운 게시글이 있는지 체크하여 세션에 주입하는 메서드\n<span class=\"token operator\">*</span> <span class=\"token annotation punctuation\">@param</span> request\n<span class=\"token operator\">*</span><span class=\"token operator\">/</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">checkUpToDateContents</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SessionHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSessionDataInNewContents</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> boardService<span class=\"token punctuation\">.</span><span class=\"token function\">getUpToDateContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드를 참고하면 되겠습니다.</p>\n<br>\n<h3 id=\"5번-구현법\" style=\"position:relative;\"><a href=\"#5%EB%B2%88-%EA%B5%AC%ED%98%84%EB%B2%95\" aria-label=\"5번 구현법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5번 구현법</h3>\n<p>뷰 단에서는 메뉴를 구현한 <strong>Thymeleaf</strong>에서 <strong>th:each</strong>와 <strong>th:if</strong>를 사용하여 구현을 하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fa fa-flag<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>공지사항<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span>\n  <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pull-right-container<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">th:</span>each</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>category : ${session.NewContents}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">th:</span>object</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${category}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">th:</span>if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${category.toString()} == <span class=\"token punctuation\">'</span>NOTICE<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>small</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label pull-right bg-green<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>new<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>small</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>위의 thymeleaf의 반복문 내 if문 사용법에 대한 포스팅은 <a href=\"https://elfinlas.github.io/2018/04/22/thymeleaf-each-if/\">여기</a>를 참고하세요.</p>\n<br>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>위와 같은 방법을 통해서 아래와 같이 기능을 구현하였습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 238px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 113.4453781512605%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsSAAALEgHS3X78AAADMklEQVQ4y5VVyU4bURD0LyRSghc83mbGM+NtjDe8sthsBmObHcISREKiJELkkktOueeWD8gtv1mpfmMsEGY7tN5ze1TdXV3dzzfTbCNsZZRFUy6mzRSmk2n1O8S7+OKZGcTSeXVOskS2gIBuo7tzCF+63ESm2kTv8BRWsYru3jHam9uY6/YxODlHqlxHxMmNQSfZHcBMpUXAFjYI6JQbGJ5cYHlrH53+Dnbef0C6IoDug9mJ6bkiAobjAbq1eZaYQogOzc4gyEihUdlyl+xiaVeVHnvABNSfsLC2fQCfk6/AHzMQIZhmkTuChRJJBOPm+HzKpnULrwJhdNb78GVLNZWJVaojXV+EM9tCiB8EGOS5JoHHgKmZWZWhRAnGkwpMZUZ7UYZBjYADaUpT8SUcRMlXxM6ydE9G4hef8DSJwxtfnJ2eYjJd4TBdaqDSXsXBxy8w82W02d2l4R6WhwfYOhbZ1B7tssjGKsyqBBRg0q2gtLCMq5+/KJs6yovLtBVUO12lRZvajCpRFx4HZGUKMFWsKcm8jeqqyyHDVr/llGZpLDvC6EKFlD/JpOypmIk16tdnMnKQpEZHspEPNOpScSnnaCTl/lCX78gmLtHJkclu6+QwVZ2H7haRLNZhU0riyzY76h58jmwSds5zxm9J5J6wDc83wSQ7zXTwOkTZbFA2ZrYIzckiTK6EC83yuNJYsnROxlHJY9JiYGVB8h3kdPljltcUI1PETKuNo8tvSHNKDi4+YbG3hfZgF/2jU6zvn6LQmB9vHGVZdjdJmnoN7P69xtm/HzCOGljdZFOcQlVtG9Ge7pYwRx5cAuTqC5jtrKK+sgFnLJ0bwAJidh7GSh2D35/x7s81EoMq1voEzHJSpMt+tl0mRKSilqwsCSUhW/ml63eMNEXMDKbCBqY0E2+mdaxu7XH0mGGADdEZ1Ztn4/68PrQY+G1IT3JD2ZzlUZdNliIz6zBTzSK5FPhLNs092SQpbP/oD7Vh1LaxvPPm/oSFDZFNBEu9IUvm2hdZyLsgUvA2dJ6+3Pj+2Hty702x3DLyzUUlG4fL9vDyq5JN7/AM51ffkau1qMXco2/KbcD/Ql2+QyswRaAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img 02\"\n        title=\"img 02\"\n        src=\"/static/084563c1c837b273009210b0d7bb9ea6/5ea4d/img_02.png\"\n        srcset=\"/static/084563c1c837b273009210b0d7bb9ea6/5ea4d/img_02.png 238w\"\n        sizes=\"(max-width: 238px) 100vw, 238px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>저와 비슷한 고민을 하셨던 분이 있다면 도움이 되셨으면 합니다.</p>\n<p>감사합니다.</p>","frontmatter":{"title":"<개발일지> 4월 5일 연구일지 (게시판에서 새로운 글 작성 표시)","date":"April 22, 2018"}}},"pageContext":{"slug":"/til/180422_devnote/","previous":{"fields":{"slug":"/thymeleaf/180422_thymeleaf-each-if/"},"frontmatter":{"title":"Thymeleaf에서 반복문(each) 안에 if문 사용하기"}},"next":{"fields":{"slug":"/til/180424_devnote/"},"frontmatter":{"title":"<개발일지> 4월 6일 (버전 표시하기 with thymeleaf)"}}}}}