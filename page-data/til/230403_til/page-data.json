{"componentChunkName":"component---src-templates-post-jsx","path":"/til/230403_til/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab"}},"markdownRemark":{"id":"585d85a8-9131-5040-bb36-f92651527cc4","excerpt":"흑우집합소에 애드센스를 준비하던 도중... 혹시 Next.Js에서 애드센스를 다는 것이 궁금하면 Next.Js에 구글 애드센스(Adsense) 등록하기포스팅을 참고하자. 뭐 아직 이르긴 하지만 구글 광고를 달려고 Adsense…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39caabbd44b8d6bf6560fecef746ecb3/fcbaf/thumbnail_til.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABVElEQVR42oWS3XKCMBCFgQQS8kMiENAKpdVpO2Mv7Pj+73YaQKmo1Iud3Uw2Z7/dbBAEAa7NMIHWOjSqQKcd2qxElzl0psKbrb1VWOscTq9ghMLt++AShEE4+FbmkDwd4mi6Gy3yOTQi0JTD0hTvvohk6ZLg6Le94FVSURTY7/d42W6HeMgNx+KVMChFNgO6J9QFeMwmQSkl2rZFXdew1p7Jx9ySazhpZkB3gq9+XozGM5I4jsE5x203eSJRKfu/YD/8hNBJkDE2UCqlIIQAIWQStolA5T/nKWFyJpRCYrfb4ftwwM/xiNPpBJH+zXcVC9TqmaAukSbjDKmnSTxhT0XOcRhFM8F+hRYER++Yxsdqg8Y4EEqRcYlNlqP2rfU0G/9p6+Gco/N72d8/XJtb63/w0zUwqYKKGBRhfv8YMsLH2JskyTXZY8FL69I//ioaLBVcsl/Pe+yHKlOGOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"thumbnail\"\n        title=\"\"\n        src=\"/static/39caabbd44b8d6bf6560fecef746ecb3/a6d36/thumbnail_til.png\"\n        srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/222b7/thumbnail_til.png 163w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/ff46a/thumbnail_til.png 325w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/a6d36/thumbnail_til.png 650w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/fcbaf/thumbnail_til.png 895w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"흑우집합소에-애드센스를-준비하던-도중\" style=\"position:relative;\"><a href=\"#%ED%9D%91%EC%9A%B0%EC%A7%91%ED%95%A9%EC%86%8C%EC%97%90-%EC%95%A0%EB%93%9C%EC%84%BC%EC%8A%A4%EB%A5%BC-%EC%A4%80%EB%B9%84%ED%95%98%EB%8D%98-%EB%8F%84%EC%A4%91\" aria-label=\"흑우집합소에 애드센스를 준비하던 도중 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흑우집합소에 애드센스를 준비하던 도중...</h1>\n<p>혹시 Next.Js에서 애드센스를 다는 것이 궁금하면 <a href=\"https://elfinlas.github.io/next-js/230404_nextjs_in_adsense/\">Next.Js에 구글 애드센스(Adsense) 등록하기</a>포스팅을 참고하자.</p>\n<p>뭐 아직 이르긴 하지만 구글 광고를 달려고 <strong>Adsense</strong>를 신청했었다.<br>\n근데 신청 후 몇일 뒤 아래와 같은 메일이 왔다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2bd71ecdb5ca03106b439fda5f24d760/5d030/img01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.34969325153374%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVR42o1RSWsUQRjtqwd/ggsSlyAEiZBjTm6TiAe9evKiCG4QzCQzSkQPeoiZBITkJAqCaIw/wIsHCYiCXiQEcc9Md01X9d49Pd3V8/L1MqIyGSx4Xe9731evXtHKpScWRu9xnJwXODEnMF4TOH5f4NisQInqsVSjXqnGcWoh76dzpTlecI6jsxwjd3RUVxwoo3c5tp1vYHCaYc91DfumNBwgfrDKMFhh2DWR13vLDMMzTQxMMuwgLa33TzHsJL79YgPK2Q2ceSCgLL72MPHMRuWll2F6xc32asHLLxyUl3NMLv/J7d91hZJde2rh8aoPBbTCwAPb+Er4BlbPoTe+w+IqHIPBElrGDb0Bx2SwSQs8C3ahm6TH7TC1gpJ0AL/VBjdMNFQGrcmhsiY0xtHkBqI4QSw7iArE/6CrRwkgCVlC3/ehaRpUlVIYAroVQjdcmMQNusg0DViWA5V7xC0YQmS7bdvQdR2C6iRJ8oTpJ4oiBEEA13Uz3m91Op2+faWXGEYShpcigXBl9pQkkXj+aBHqrx99jZVet7faEj95jLV6BNWMMy2KYyzduIz1j+/y2eKJ/5UwIEPmUDLyl1Jm2vxCDcOHhzA+dgSf19cyLelh+nfCYncCiVefQtQtiSYZt+ncw1tXUDq0G6dHBvDl/ZstU/ZMKGmwa95N8eHtKq5eOIfbMzfR8r0tf8om3k1U4Pp8LW8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img01\"\n        title=\"\"\n        src=\"/static/2bd71ecdb5ca03106b439fda5f24d760/a6d36/img01.png\"\n        srcset=\"/static/2bd71ecdb5ca03106b439fda5f24d760/222b7/img01.png 163w,\n/static/2bd71ecdb5ca03106b439fda5f24d760/ff46a/img01.png 325w,\n/static/2bd71ecdb5ca03106b439fda5f24d760/a6d36/img01.png 650w,\n/static/2bd71ecdb5ca03106b439fda5f24d760/5d030/img01.png 771w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>뭐가 문젠지 봤더니 승인 상태 옆에 저렇게 찾을 수 없음이 뜬다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 579px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1dda1503c7e2cd7f16c3b09bd33f92e5/c08bc/img02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.67484662576687%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42nWO2wrDIBBE/f9/bAt9CDXGa7xDnKohVNJkYcDdPc4OwU2VUrpuq/yYkSNbbc4a/nRdMQdXhgBtRs6Hc86gjOFDKZRSSCldBnTOYa4c5xzTNPV+T7htONSuNANtdDdbre39yByc9wELF5UzEEIihNB3pD1Gee/BK2DM2s3O+10Rzipo/oZkL1izVDbXuf83bNEZ45BS3ZgFxBhhVwE+P7HQB7SkdZa64RfgxtVzHneKegAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img02\"\n        title=\"\"\n        src=\"/static/1dda1503c7e2cd7f16c3b09bd33f92e5/c08bc/img02.png\"\n        srcset=\"/static/1dda1503c7e2cd7f16c3b09bd33f92e5/222b7/img02.png 163w,\n/static/1dda1503c7e2cd7f16c3b09bd33f92e5/ff46a/img02.png 325w,\n/static/1dda1503c7e2cd7f16c3b09bd33f92e5/c08bc/img02.png 579w\"\n        sizes=\"(max-width: 579px) 100vw, 579px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"문제는-쉽게-찾을-수-있었다\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EB%8A%94-%EC%89%BD%EA%B2%8C-%EC%B0%BE%EC%9D%84-%EC%88%98-%EC%9E%88%EC%97%88%EB%8B%A4\" aria-label=\"문제는 쉽게 찾을 수 있었다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제는 쉽게 찾을 수 있었다.</h2>\n<p>먼저 ads.txt에 접근이 되어야 하는데 이상하게 접근이 되지 않았다.</p>\n<p>일전에 <a href=\"https://elfinlas.github.io/nginx/230401_defense_attacker/\">Nginx에서 특정 IP 접근 금지 시키기</a> 포스팅을 하면서 뭔가 본거 같기도...<br>\n그래서 포스팅을 확인해본 결과...</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">~*(idx_config|DS_Store|nginx|wp-json|ads|humans|exec|level|monitoring|configprops|balancer|actuator) 1;</code></pre></div>\n<p><strong>Url Keyword</strong>방식을 적은 부분에서 <strong>ads</strong>단어가 있었다...</p>\n<p>이래서 <strong>ads.txt</strong> 파일에 접근이 불가능했던 것이다.<br>\n그래서 접근 확인을 한 후 재검토를 신청했다.</p>\n<h2 id=\"응-거절이야\" style=\"position:relative;\"><a href=\"#%EC%9D%91-%EA%B1%B0%EC%A0%88%EC%9D%B4%EC%95%BC\" aria-label=\"응 거절이야 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>응 거절이야~</h2>\n<p>또 저 해맑은 아저씨 메일이 왔다 -_-;;<br>\n그래서 몇개 생각을 하다가 Nginx에서 막은게 문제겠지 싶었다.</p>\n<p>그러다가 하나 생각이 난게 IP 접근에서 뭔가 있었던 것 같았다.<br>\n그래서 불법 침입 시도를 확인할 겸 접근 로그를 보다가...</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">66.249.66.65 - - [03/Apr/2023:00:22:03 +0900] \"GET /robots.txt HTTP/1.1\" 301 178 \"-\" \"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\"\n66.249.66.89 - - [03/Apr/2023:00:24:00 +0900] \"GET /robots.txt HTTP/1.1\" 301 178 \"-\" \"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\"</code></pre></div>\n<p>그렇다...<br>\n내가 구글 봇 클라이언트를 막은 것 같았다...</p>\n<p>근데 구글 봇 클라이언트가 저거 하나만 돌지 아니면 여려 개 돌지 확인할 수 있는 방법이 없었다.<br>\n그럼 궁금하니 <strong>ChatGPT</strong>에게 기대를 걸고 물어봤다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5842486a061f8ea2a4c91efc594534e0/7527b/img03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.38650306748465%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVR42pVU2XKrMAzl/z+wtyFhNZCwhZbdZFF15EAIbR4uMxpZQpK1HNnq+56KoqDzuRKqqi8qypLSNKNpmuh/P+t6vYrjNF2EXy6Gj+NIt9tNjO73+4vT/U0wmFlt29N33VDX9dQ0LTVtJzL0dd0KQQ/dWjbnZqG+H5hGspIkJXvvkhcocr2Q9geP/u32ZDMXvR+SH0Tk+ubfwQnIcQOxBX3ajtggISRhpVlBnzvn8UPx+UB7x5cAcAijhAIVyz+FcxhJYJdlJIGLkyP3W080DJxhUZzZKKY4OdEpzcUJOvw0ZTwJOhD6u9WhXAmo9SRDANdaP/h7Gkf9JxlfTVbXdQIVaXTTcPNrbnItjV700nij3078F2waDpLnBZdZUpblQmsZmCwZn5BBJcvI5G1A4A4G6Mu6R8/y9QthmsDu24Co3wR59mOW5wuEWO6HUS4B7zAUcL5g7S+wARQwXc9TMnHABTrgby07XmAwKXJMUXxkXPq8suh1Z3CYHFM2UhQCaxwQePPDp5MtmDOYBKBNQGBwBrtP1de3ZC6wAfZwi1LJkhEChsxNAANenIPHRSC5iHmWly94tADone1yhokEnh1MSSdCBQL6U0ZH3giUiSRgf+IXadtvqywrMch5O3KGBZ4w3Jo/tmU7MNC8FcisZpx26wxzdnaXPeWsoiPFnBnOWHrpaaCWYbieKR1JIGv4Y9Iz7JaSEQAlY+ERBBN1vFCCIRB0eGkQDLZpyuAvz8xzOvNGzWXLUD74hZFMfCW9QTaY+gwXA5lwGRoy3z/6veNXCn3V0oqBLERH81Vkmv0X0LegX//XG/0PDX3sdxiraQIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img03\"\n        title=\"\"\n        src=\"/static/5842486a061f8ea2a4c91efc594534e0/a6d36/img03.png\"\n        srcset=\"/static/5842486a061f8ea2a4c91efc594534e0/222b7/img03.png 163w,\n/static/5842486a061f8ea2a4c91efc594534e0/ff46a/img03.png 325w,\n/static/5842486a061f8ea2a4c91efc594534e0/a6d36/img03.png 650w,\n/static/5842486a061f8ea2a4c91efc594534e0/7527b/img03.png 754w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>한글과 영어로 물어봤지만...<br>\n자기도 모른다 한다.. -_-;;</p>\n<p>그래서 직접 내가 찾아봤다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b9208c94e6578c63a2edab4e3bd94d64/7ae9c/img04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.02453987730061%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZElEQVR42qVUaU/bQBD1/5f6oaA2LYh+QOISICAt8J3+AKoeBDUK9Rk7h8/YcUKO13nrbEhRg1R1pNGMZ3fezs68tfHl9haHB/v4fHODfr+PyWSC8XiM0agUO1L+YJAhS1NkWYY0TZAksYrRTyVe2URiAxhXlxe4vqrj48UJ6mfHuL48R/38GOenB6KHuJDY2ekRPtVPcLT/ATtbG9jdeYu93W3x32Dr3Sbe1zawXXuN2uYrGI3GN9w1vuPux1c0fzYQ+C5cx4LnOqI2XFHTfEDbc1TcsU2xplgLlvkLlkU1YYuaDy0YYRSpqyRJdZX5bI75fI7ZjDpT/kuq97BVZTmCcX9/j263i16vJ9U4cBypzPNE3YV6Eq9stebCkX2MtdttyetKfkdZghqWbS8BmcRNVF9ZTynjvu/DXRzg+214Eu90OmqQBIuisAJkMAxDtaATmUBQVqwr5fdqtdW6C53PovI8h0GAoijQ6QawpdHc5DougsBfXKeqnqqrIQhtpT21h/1XFRJ9Np8iHvQU8HQ6xeTxUTVbyUrjtaz6z8WI41idQIL+TQiWLkj9kuipCw8by54EQSAvZIT/EaPZbKrekIe0fD7/KqstUFceDofqWom8Ry18wxyYphF7vU7yfCD5GYpE3rJG55T6YX85DF5dk9w0TQW+TvijiCL5OUTpKmCiAPV3WZZCI1uBWpal+rtuumxTHKd/AqppC69IGw3IygjYarUUP5dUeiZsVxjGyPoJDB1kH4siX1ZBkvIQVk7yrqPVU+4Qo7x4qvBRyMyq+Hx4BVoSnZsZp8++0udh66b9G3ZmUy3enFXnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img04\"\n        title=\"\"\n        src=\"/static/b9208c94e6578c63a2edab4e3bd94d64/a6d36/img04.png\"\n        srcset=\"/static/b9208c94e6578c63a2edab4e3bd94d64/222b7/img04.png 163w,\n/static/b9208c94e6578c63a2edab4e3bd94d64/ff46a/img04.png 325w,\n/static/b9208c94e6578c63a2edab4e3bd94d64/a6d36/img04.png 650w,\n/static/b9208c94e6578c63a2edab4e3bd94d64/7ae9c/img04.png 972w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>근데 다 나오진 않고 일부만 주고 정보를 파는 사이트였다.</p>\n<p><a href=\"https://searchengineland.com/google-publishes-the-list-of-googlebot-ip-addresses-375935\"></a></p>\n<p>그래서 21년도 자료긴 한데 <a href=\"https://searchengineland.com/google-publishes-the-list-of-googlebot-ip-addresses-375935\">구글봇 주소 정보글(영문)</a>에서 약간의 정보를 찾을 수 있었다.<br>\n저 본문 중 구글 봇의 범위 주소 (IpV4(서브넷으로 나뉨), IpV6)를 <a href=\"https://developers.google.com/search/apis/ipranges/googlebot.json\">공개한 구글봇 주소 공식 api</a>를 확인해봤다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 498px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/267c080f6e6669d2c83b7021429971b0/79e1b/img05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.0920245398773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAABb0lEQVR42o2U166DMBBE8///yANIPNAhhF726liayEEXJ0gTl3jHs82PbduM7zxPh+M4HPZ9d9Ccc1ozB5y/fg82u66zKIosjmNLksTatrVpmqwoCvcfI2ia5mMtMR+E/GCcpqnleW5lWdrz+XR7y7LYPM82jqMNw/AGe8K/hHzrujoXIKvr2gFSyFCMOkbQ9729Xi9HfkuIITHiIAZACtkTAfvscRm4JeQQhBiggljJENU+pBwECcngHSFrjYplkFAucxBDuQzYk9tA7gaToroi+GSapCi77ClRQMRcekuIIQq5Ve6ogP2YASmnMr4qrKrKsixzKpVV5hQyIyCOwtcYqlRQpfaTIl+Z1N8ScpAsSyFd4ytkrZZTgQcVSpEUAhT4a0EKgzEUITejCKV+65Fdsg1UVsHWk8sqbIz0MNx1yk+9zKjmxyVwfW0UBsbga4NCXCMBuKwOYe6XjRLyU9lArPJQ2UipEqHXG1wJ/wDbssoi+e5VsQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img05\"\n        title=\"\"\n        src=\"/static/267c080f6e6669d2c83b7021429971b0/79e1b/img05.png\"\n        srcset=\"/static/267c080f6e6669d2c83b7021429971b0/222b7/img05.png 163w,\n/static/267c080f6e6669d2c83b7021429971b0/ff46a/img05.png 325w,\n/static/267c080f6e6669d2c83b7021429971b0/79e1b/img05.png 498w\"\n        sizes=\"(max-width: 498px) 100vw, 498px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>일단 최신 자료이고, 하단에 ipv4 정보도 있었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 462px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4841cd42400ec3d9bb8e31bc69cdbacc/e389b/img06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.15950920245399%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVR42qWUh26EQAxE7/8/lN6PdjQnb6VBBEHYKEiWTdnxYxbzsu9j2zb7fD42TZOFYWhxHFuapta2rfV97+o8z60oCldXVWV3x0uCLF7X1QmM4+jyPM+2LMvejExw/VEQERYlSbITIUpQ13VtTd24e9T/IuRcMQyDH6FeS4RZllnXdU4A7/ANUq4TNPpV8P1+uyyRMyHNREjzR0KZLrojYVmWzjcCSgJ7vAj1qRwJERWdPPYmFN0dIV5y726nd8GmaVyGABHtJq8mD2koyjsfXypYfPaQhVBqSqCDFlseX1mECJw9hJBmyncbcunh+Ts8E1Jz/25jfkzKlYea5eM8k3nWizCKIkdJ0ARCaCHDP/n7SMh3yKGZRRy6498GYmVvwiAIHCUBIQEtVPhI9vJQk4Kwgt0kIJKfqv9EyF/7TKh/JJlz710+TgVEEMo3eSj6K8Eva9YbtKV8KAEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img06\"\n        title=\"\"\n        src=\"/static/4841cd42400ec3d9bb8e31bc69cdbacc/e389b/img06.png\"\n        srcset=\"/static/4841cd42400ec3d9bb8e31bc69cdbacc/222b7/img06.png 163w,\n/static/4841cd42400ec3d9bb8e31bc69cdbacc/ff46a/img06.png 325w,\n/static/4841cd42400ec3d9bb8e31bc69cdbacc/e389b/img06.png 462w\"\n        sizes=\"(max-width: 462px) 100vw, 462px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그래서 저기 나온 주소를 토대로 내가 막은게 있나 봤다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">geo $bad_ip_range {\n\t# A\n    34.0.0.0/8 1; #22-07-01 => Google Bot 있을 수 있음\n\t103.0.0.0/8 1; #VN-21-11-29\n  \t185.0.0.0/8 1; #DE-21-12-27\n\t159.0.0.0/8 1; #22-04-17\n\t20.0.0.0/8 1; #22-04-30\n\t15.0.0.0/8 1; #22-06-10\n\t51.0.0.0/8 1; #22-06-27\n\t35.0.0.0/8 1; #22-07-01\n\n    # B\n    66.249.0.0/16 1; #US_21-11-15 => Google Bot 있을 수 있음\n  \t5.161.0.0/16 1; #22-01-02\n  \t45.83.0.0/16 1; #log4j\n}</code></pre></div>\n<p>그렇다...<br>\n범위 계열에서 A클래스 주소 중 34 주소를 다 막아버린 것이다... -_-;;;</p>\n<p>그리고 B클래스에서도 막은 곳이 있었다.<br>\n얼른 이 부분은 주석 처리 후 Nginx를 리스타트 했다.</p>\n<p>C 클래스에는 다행히 없었다.<br>\n그리고 각 Ip 밴 시킨 부분도 몇 개 검토해서 다시 풀었다.</p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>이제 한번 기다려보면 될 것 같다.<br>\n근데 구글 문서에서 몇 가지 찾은 정보가 있는데, 유저 에이전트를 확인하라고 한다.</p>\n<p><a href=\"https://developers.google.com/search/docs/crawling-indexing/overview-google-crawlers?hl=ko\">Google 크롤러(사용자 에이전트) 개요</a> 페이지를 참고하자.<br>\n그리고 <a href=\"https://developers.google.com/search/docs/advanced/crawling/verifying-googlebot?hl=ko#use-automatic-solutions\">Googlebot과 다른 Google 크롤러 확인</a> 이라는 문서도 있다.</p>\n<p>여기에 의하면 <strong>host</strong> 명령어를 통해서 해당 에이전트를 확인하라고 하는데 아래와 같이 확인이 가능했다.\n먼저 역방향 DNS를 조회해본다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 628px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/af4dde69d25370a589d3bcf6ed8f425b/3d84d/img07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.134969325153374%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAVElEQVR42mOYbKn7f4GV9v95Vjr/Z5lp/p9vo/d/EZA/ycHsv4938H93r+D/vn5h/z2AtA+QtrJx/W9p7fLfwsoFzLaycftv5+D539rW7b+Rid1/AAzVJV0Z1pxfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img07\"\n        title=\"\"\n        src=\"/static/af4dde69d25370a589d3bcf6ed8f425b/3d84d/img07.png\"\n        srcset=\"/static/af4dde69d25370a589d3bcf6ed8f425b/222b7/img07.png 163w,\n/static/af4dde69d25370a589d3bcf6ed8f425b/ff46a/img07.png 325w,\n/static/af4dde69d25370a589d3bcf6ed8f425b/3d84d/img07.png 628w\"\n        sizes=\"(max-width: 628px) 100vw, 628px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 domain name에 google-proxy-...값이 뜨는데 이 값을 이용해 순방향 DNS를 조회해본다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/79cfa149a4df418abb89030d87401672/c0388/img08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.975460122699387%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgUlEQVR42iWNbQ6CMABDuYN6CPQIhpg5GdsYgw358OOUyv2eMH80Tdu8NPvkezYtx0PS9/T3Jd/xKgSqGbnKmjY8qN2A0gFtI0I67JorE1Ln25mmncgm0xBvhig1Q1VzV5ZRO56uow8zzo8J2lybSD+8E3gRlrLq1i0iS58Oz4XiBwNTTBAKkSK0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img08\"\n        title=\"\"\n        src=\"/static/79cfa149a4df418abb89030d87401672/c0388/img08.png\"\n        srcset=\"/static/79cfa149a4df418abb89030d87401672/222b7/img08.png 163w,\n/static/79cfa149a4df418abb89030d87401672/ff46a/img08.png 325w,\n/static/79cfa149a4df418abb89030d87401672/c0388/img08.png 542w\"\n        sizes=\"(max-width: 542px) 100vw, 542px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 처음 접근한 주소의 IP와 순방향 조회 IP를 비교해서 같으면 된다.</p>\n<p>근데 <a href=\"https://developers.google.com/search/apis/ipranges/googlebot.json\">공개한 구글봇 주소 공식 api</a>문서를 통해서 자동으로 차단 처리를 할 수 있을 듯 한데...<br>\n이건 좀 나중에 해봐야겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"toc\"><pre class=\"language-toc\"><code class=\"language-toc\"></code></pre></div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%9D%91%EC%9A%B0%EC%A7%91%ED%95%A9%EC%86%8C%EC%97%90-%EC%95%A0%EB%93%9C%EC%84%BC%EC%8A%A4%EB%A5%BC-%EC%A4%80%EB%B9%84%ED%95%98%EB%8D%98-%EB%8F%84%EC%A4%91\">흑우집합소에 애드센스를 준비하던 도중...</a></p>\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EB%8A%94-%EC%89%BD%EA%B2%8C-%EC%B0%BE%EC%9D%84-%EC%88%98-%EC%9E%88%EC%97%88%EB%8B%A4\">문제는 쉽게 찾을 수 있었다.</a></li>\n<li><a href=\"#%EC%9D%91-%EA%B1%B0%EC%A0%88%EC%9D%B4%EC%95%BC\">응 거절이야~</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"23년 4월 3일 TIL & 개발노트 (Google Bot)","description":null,"date":"April 04, 2023","tags":["TIL"],"series":"TIL","previewImage":"writing.png","isPrivate":null,"writer":null}},"previous":{"fields":{"slug":"/next-js/230404_nextjs_in_adsense/"},"frontmatter":{"title":"Next.Js에 구글 애드센스(Adsense) 등록하기","isPrivate":null}},"next":{"fields":{"slug":"/gatsby/230404_google_analytics/"},"frontmatter":{"title":"Gasty에서 구글 애널리틱스 GA4 처리 문제","isPrivate":null}}},"pageContext":{"id":"585d85a8-9131-5040-bb36-f92651527cc4","previousPostId":"44017749-1055-55df-8d0d-5c8bd98bbc06","nextPostId":"307d6c13-c688-5c98-bd13-82775c75748c"}},"staticQueryHashes":[],"slicesMap":{}}