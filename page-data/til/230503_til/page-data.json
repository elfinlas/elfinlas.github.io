{"componentChunkName":"component---src-templates-blog-post-js","path":"/til/230503_til/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab","siteUrl":"https://elfinlas.github.io","comment":{"disqusShortName":"","utterances":"elfinlas/blog_utterances"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"a8f52715-387e-57fb-a24f-16e86bfd8cb0","excerpt":"React에서 상태 관련 처리를 하다가… 신규 기능 생성번호 당첨내역을 개발하고 있었다. 백엔드 로직 개발을 하고, 프론트쪽 개발로 넘어왔다. 각 로또 등위별 당첨 내역 처리를 위해 아래와 같은 상태 값을 사용했다. 위 상태 값은 아래의 등위별 당첨 내역의 카운트에 쓰인다.  저 등위별 당첨 내역은 컴포넌트로 따서 구현되어 있다. 컴포넌트에서는 useEffect hook…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 895px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39caabbd44b8d6bf6560fecef746ecb3/b002d/thumbnail_til.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABMklEQVQoz42SW2/CMAyFk7a50Li3lFJGuw2plSbxBP//x50lhjFAo+zhyI3lfj5xLIQQuJW3hKFaY3AeH7TGO7X4KNb4LDvsqw2rLxpsihqFdXj8XzwmIkBl6q9CVioTUGpQpZbhVpllYHRm9W9R13WYpgm7YUDj/V3tJq9QG7cMjNdTaXY9O+cwjiODiYhzUshzs1WJZkXLwDirNEnuclJK1mNtawg+L5eBcS5xTj8grTW7LIoCeZ4juWnmtUPryn84vADjFed5xuFwwOl4Cjpyg6tDTQFYvXAYgEadXzm6SbMwTylYqb5//SY47KheBva2xNy88S6KRKIOQ9+VLbZh93pq+Pt89tjXPXJtl4FXcHjBr24EmRVyqeASzSKOiqOR2evFlpdIymJqtk8X/Jm+AaC961594rpnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/77434/thumbnail_til.webp 300w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/411c4/thumbnail_til.webp 600w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/dd3ab/thumbnail_til.webp 895w\"\n              sizes=\"(max-width: 895px) 100vw, 895px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/a8a0d/thumbnail_til.png 300w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/dface/thumbnail_til.png 600w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/b002d/thumbnail_til.png 895w\"\n            sizes=\"(max-width: 895px) 100vw, 895px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/39caabbd44b8d6bf6560fecef746ecb3/b002d/thumbnail_til.png\"\n            alt=\"thumbnail\"\n            title=\"thumbnail\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1 id=\"react에서-상태-관련-처리를-하다가\" style=\"position:relative;\"><a href=\"#react%EC%97%90%EC%84%9C-%EC%83%81%ED%83%9C-%EA%B4%80%EB%A0%A8-%EC%B2%98%EB%A6%AC%EB%A5%BC-%ED%95%98%EB%8B%A4%EA%B0%80\" aria-label=\"react에서 상태 관련 처리를 하다가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React에서 상태 관련 처리를 하다가…</h1>\n<p>신규 기능 <strong>생성번호 당첨내역</strong>을 개발하고 있었다.<br>\n백엔드 로직 개발을 하고, 프론트쪽 개발로 넘어왔다.</p>\n<p>각 로또 등위별 당첨 내역 처리를 위해 아래와 같은 상태 값을 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>rankInfo<span class=\"token punctuation\">,</span> setRankInfo<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>RankSummary<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  secondRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  thirdRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  fourthRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  fifthRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 상태 값은 아래의 등위별 당첨 내역의 카운트에 쓰인다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1051px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/85d8be001fae33d24fd2552e4ee7e119/9f6f0/img01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVQ4y01TW08aYRD1tRUviKh4i1UUbAUlXGTlJlVYYKEQXa5LFZGbN9S+NGnTeImp7aPpU9M06Z9o0qe+9Ff015zO9y279eHkzMzOHOabYfqEeAWbr+qIZGrYzBzoSOVPkZRVSPku+WdIkZ0unHM/mqkjSnUvs4c9bsAd3kFflAKJ4gnE/BEShWOIBZWVxg0qjWuUD6+w17pDtXWLavMWe+07il8hlm8ikj1AML3PWSy2IcTL6GPdcKGeYJKJE8fk9iO0dHt7t4mEfILOwQ98+/oHv37+xZeH32jWvkOIlVTBrVwD0Sw9m34tmKzqT9EQ7Y2E24StbBNZ+R0ax59w+fYB9c49coX3JEgdBhNVWOY9GJ54DttaDN7NIibm3BiZcmB0ZpWzZd4LmyvOfdO0k2No0g6L1YepJQFPTPOwLLrhZx0GSJAlGkaXYHeJCIr7GCfBwTE7hsaXMWC2wTyzhqXVbRgnV/T4oNmOueUQb4LVTjzzqILsyWGJPfU1NsQK1rcK3NYQTu0hRBxIKAiRrcW1WEBU+JiYjipI80kr50hXupwzygUkZhOYXTu+R/3kM/aPPkJp3ei5Ui+fgdmZ6oUqGKZFuII5OPwSnEKaYy2Y5exgoLhDs3twChnKyen5K+spuCO7quAGtWy0vED/iBUG0yLNxoY56wa32WwMoxqr6Kf4ALFl2qXnPDUu8Dn7t/lSFIzQsHnB8AKMzgBm31xi2OaFgRLZUh6D57hCmOqeYWjRAwM10m+yYmzWpXYYSde4sjcq019Ghi9ZgV/pwCeWue+N5tVvGlhOSoGgHMEXV+s8FGML7S2F7rZMd1o6JRDTpSR3OpxZXCqzBZ3r4LkFLadXQ7VsMfrfhp1dXO78B/mx3TakUpdu+hqVw2uU6h/4XaeKZ/xb/FEN89nZMsF/hbf/dRDHSesAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/85d8be001fae33d24fd2552e4ee7e119/77434/img01.webp 300w,\n/static/85d8be001fae33d24fd2552e4ee7e119/411c4/img01.webp 600w,\n/static/85d8be001fae33d24fd2552e4ee7e119/c88ff/img01.webp 1051w\"\n              sizes=\"(max-width: 1051px) 100vw, 1051px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/85d8be001fae33d24fd2552e4ee7e119/a8a0d/img01.png 300w,\n/static/85d8be001fae33d24fd2552e4ee7e119/dface/img01.png 600w,\n/static/85d8be001fae33d24fd2552e4ee7e119/9f6f0/img01.png 1051w\"\n            sizes=\"(max-width: 1051px) 100vw, 1051px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/85d8be001fae33d24fd2552e4ee7e119/9f6f0/img01.png\"\n            alt=\"img01\"\n            title=\"img01\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br>\n<p>저 등위별 당첨 내역은 컴포넌트로 따서 구현되어 있다.<br>\n컴포넌트에서는 <strong>useEffect</strong> hook을 이용해서 초기 값을 설정해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> makeLogData <span class=\"token operator\">=</span> winData<span class=\"token punctuation\">.</span>lottoMakeLogData\n\n  <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    firstRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    secondRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    thirdRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    fourthRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    fifthRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  makeLogData<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>item <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>rankInfo<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span><span class=\"token punctuation\">{</span> fifthRankCnt<span class=\"token operator\">:</span> rankInfo<span class=\"token punctuation\">.</span>fifthRankCnt<span class=\"token operator\">++</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>rankInfo<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span><span class=\"token punctuation\">{</span> fourthRankCnt<span class=\"token operator\">:</span> rankInfo<span class=\"token punctuation\">.</span>fourthRankCnt<span class=\"token operator\">++</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>rankInfo<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span><span class=\"token punctuation\">{</span> thirdRankCnt<span class=\"token operator\">:</span> rankInfo<span class=\"token punctuation\">.</span>thirdRankCnt<span class=\"token operator\">++</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>rankInfo<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span><span class=\"token punctuation\">{</span> secondRankCnt<span class=\"token operator\">:</span> rankInfo<span class=\"token punctuation\">.</span>secondRankCnt<span class=\"token operator\">++</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>rankInfo<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span><span class=\"token punctuation\">{</span> firstRankCnt<span class=\"token operator\">:</span> rankInfo<span class=\"token punctuation\">.</span>firstRankCnt<span class=\"token operator\">++</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span>updatedRankInfo<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>winData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>근데 이렇게 했더니 계속 값이 증분했다.<br>\n앞에 초기화 로직을 줬지만 적용되지는 않았다.</p>\n<h2 id=\"왜-그런걸까\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EA%B7%B8%EB%9F%B0%EA%B1%B8%EA%B9%8C\" aria-label=\"왜 그런걸까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>왜 그런걸까?</h2>\n<p>이 부분을 찾아보니…<br>\n아래와 같이 정리할 수 있었다.</p>\n<blockquote>\n<p>useState hook은 비동기로 동작하기 때문에 setRankInfo가 호출되어도 rankInfo는 즉각적으로 업데이트 되지 않는다.<br>\n그래서 이를 해결하려면 이전상태를 복사한 값을 적용함으로써 해결할 수 있다.</p>\n</blockquote>\n<p>말이 좀 어려운데 아래 솔루션 코드를 보면 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> makeLogData <span class=\"token operator\">=</span> winData<span class=\"token punctuation\">.</span>lottoMakeLogData\n\n  <span class=\"token comment\">// 새로운 객체를 생성하여 상태 업데이트를 수행합니다.</span>\n  <span class=\"token keyword\">const</span> updatedRankInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    firstRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    secondRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    thirdRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    fourthRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    fifthRankCnt<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  makeLogData<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>item <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      updatedRankInfo<span class=\"token punctuation\">.</span>fifthRankCnt <span class=\"token operator\">=</span> updatedRankInfo<span class=\"token punctuation\">.</span>fifthRankCnt <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      updatedRankInfo<span class=\"token punctuation\">.</span>fourthRankCnt <span class=\"token operator\">=</span> updatedRankInfo<span class=\"token punctuation\">.</span>fourthRankCnt <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      updatedRankInfo<span class=\"token punctuation\">.</span>thirdRankCnt <span class=\"token operator\">=</span> updatedRankInfo<span class=\"token punctuation\">.</span>thirdRankCnt <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      updatedRankInfo<span class=\"token punctuation\">.</span>secondRankCnt <span class=\"token operator\">=</span> updatedRankInfo<span class=\"token punctuation\">.</span>secondRankCnt <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      updatedRankInfo<span class=\"token punctuation\">.</span>firstRankCnt <span class=\"token operator\">=</span> updatedRankInfo<span class=\"token punctuation\">.</span>firstRankCnt <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">setRankInfo</span><span class=\"token punctuation\">(</span>updatedRankInfo<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>winData<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위와 같이 새로운 객체를 주고 해당 값으로 증가를 해준 다음 해당 값으로 setRankInfo를 보내주면 해결이 된다.</p>\n<br>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p><strong>useState</strong>, <strong>useEffect</strong> 함수는 비동기임을 잘 알고 써야할 것 같다.<br>\n그나저나 백엔드, 프론트엔드 둘다 왔다갔다 하니 약간 햇갈리기도 한다.</p>\n<p>일할때는 역시 정신 똑바로 차리고 해야 할듯…</p>","frontmatter":{"title":"23년 5월 3일 흑우집합소 개발노트 (React에서 useState의 상태 처리)","date":"May 04, 2023"}}},"pageContext":{"slug":"/til/230503_til/","previous":{"fields":{"slug":"/til/230426_til/"},"frontmatter":{"title":"23년 4월 26일 흑우집합소 개발노트 (React-Quill과 TailWinCss 사용 시 Html 폰트 적용 문제)"}},"next":{"fields":{"slug":"/til/230504_til/"},"frontmatter":{"title":"23년 5월 4일 흑우집합소 개발노트 (Daisy ui  Stat 이상현상)"}}}},"staticQueryHashes":["3128451518","903436796"]}