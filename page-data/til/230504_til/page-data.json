{"componentChunkName":"component---src-templates-post-jsx","path":"/til/230504_til/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab"}},"markdownRemark":{"id":"6f382036-7453-538d-8427-49ffee244d4b","excerpt":"배포를 하고 나서... 새벽 2시쯔음 흑우집합소 1.0.2 버전 배포를 했다. 백엔드쪽과 프론트엔드쪽 배포를 끝내고 나서 잘 되나 확인을 해봤다. 근데... 이상한 문제가 발생했다. 프론트엔드 쪽은 TailWindCSS를 사용하고, 거기에 Daisy ui…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39caabbd44b8d6bf6560fecef746ecb3/fcbaf/thumbnail_til.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABVElEQVR42oWS3XKCMBCFgQQS8kMiENAKpdVpO2Mv7Pj+73YaQKmo1Iud3Uw2Z7/dbBAEAa7NMIHWOjSqQKcd2qxElzl0psKbrb1VWOscTq9ghMLt++AShEE4+FbmkDwd4mi6Gy3yOTQi0JTD0hTvvohk6ZLg6Le94FVSURTY7/d42W6HeMgNx+KVMChFNgO6J9QFeMwmQSkl2rZFXdew1p7Jx9ySazhpZkB3gq9+XozGM5I4jsE5x203eSJRKfu/YD/8hNBJkDE2UCqlIIQAIWQStolA5T/nKWFyJpRCYrfb4ftwwM/xiNPpBJH+zXcVC9TqmaAukSbjDKmnSTxhT0XOcRhFM8F+hRYER++Yxsdqg8Y4EEqRcYlNlqP2rfU0G/9p6+Gco/N72d8/XJtb63/w0zUwqYKKGBRhfv8YMsLH2JskyTXZY8FL69I//ioaLBVcsl/Pe+yHKlOGOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"thumbnail\"\n        title=\"\"\n        src=\"/static/39caabbd44b8d6bf6560fecef746ecb3/a6d36/thumbnail_til.png\"\n        srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/222b7/thumbnail_til.png 163w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/ff46a/thumbnail_til.png 325w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/a6d36/thumbnail_til.png 650w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/fcbaf/thumbnail_til.png 895w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"배포를-하고-나서\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%ED%8F%AC%EB%A5%BC-%ED%95%98%EA%B3%A0-%EB%82%98%EC%84%9C\" aria-label=\"배포를 하고 나서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배포를 하고 나서...</h1>\n<p>새벽 2시쯔음 <a href=\"https://bcow.world\">흑우집합소</a> 1.0.2 버전 배포를 했다.<br>\n백엔드쪽과 프론트엔드쪽 배포를 끝내고 나서 잘 되나 확인을 해봤다.</p>\n<p>근데...<br>\n이상한 문제가 발생했다.</p>\n<p>프론트엔드 쪽은 <strong>TailWindCSS</strong>를 사용하고, 거기에 <a href=\"https://daisyui.com/\">Daisy ui</a>를 사용하고 있다.<br>\n근데 이 <strong>Daisy UI</strong>쪽에서 발생한 문제인 것 같았다.</p>\n<p>문제는 아래와 같다.</p>\n<p><img src=\"/7edb3197366f210ad6c5efff32d5483f/img01.gif\" alt=\"\"></p>\n<br>\n<p>Github의 Issue 부분을 확인해봤으나, 나와 같은 문제를 일으키는 사람은 없었다.<br>\n<strong>이는 라이브러리 문제가 아닌 내가 뭔가 잘못 코드를 작성한 문제</strong>라는 방향으로 귀결된다.</p>\n<p>분명 개발버전에서는 잘 되었던거 같은데...<br>\n근데 생객해보니...</p>\n<p>개발은 크롬에서 진행했고, 운영 테스트는 사파리에서 진행했다.<br>\n혹시나 하는 마음에 크롬에서 직접 봐보니 역시 크롬은 문제가 없었다.</p>\n<h2 id=\"도데체-무슨-문제일까\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EB%8D%B0%EC%B2%B4-%EB%AC%B4%EC%8A%A8-%EB%AC%B8%EC%A0%9C%EC%9D%BC%EA%B9%8C\" aria-label=\"도데체 무슨 문제일까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도데체 무슨 문제일까?</h2>\n<p>뭐 뻔한 이야기겠지만 브라우저 엔진 문제일 것으로 추측했다.<br>\n브라우저마다 자바스크립트를 해석하는 방법이 약간 차이가 있기 때문에 저런 버그가 생기는게 아닐까 싶다.</p>\n<p>먼저 저쪽 코드는 아래과 같이 되어 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stats stats-vertical mt-10 mb-10 w-full shadow c_mobile:w-11/12 c_l_pc:stats-horizontal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  ... //대략 stat 코드 들어감\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이 부분에서 의심이 되는 것은 <strong>넓이</strong>와 관련된 부분을 의심했다.<br>\n그래서 저 코드에서 <strong>w-full</strong>이것을 빼줬더니 넓이가 줄어들고 저 현상은 없어졌다.</p>\n<p>다만 UX 관점에서 위와 통일성이 깨져서 이 부분은 어떻게 해야 할지 고민이 되었다.<br>\n일단 사파리 브라우저 외에는 잘 되는거 같아서 사파리에서만 저렇게 구현하고,<br>\n그 외에 브라우저는 기존대로 <strong>w-full</strong>을 적용하기로 했다.</p>\n<h2 id=\"how-to\" style=\"position:relative;\"><a href=\"#how-to\" aria-label=\"how to permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to?</h2>\n<p>먼저 window 객체 안에 <strong>userAgent</strong>를 통해서 사파리 브라우저인지 아닌지를 확인할 필요가 있었다.<br>\n그리고 상태값을 하나 주고 사파리 브라우저인지 아닌지를 체크하는 로직을 추가했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isSafari<span class=\"token punctuation\">,</span> setIsSafari<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> userAgent <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>userAgent\n  <span class=\"token keyword\">const</span> isSafari <span class=\"token operator\">=</span>\n    userAgent<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Safari\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> userAgent<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Chrome\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n  <span class=\"token function\">setIsSafari</span><span class=\"token punctuation\">(</span>isSafari<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이렇게 해서 <strong>isSafari</strong> 값을 통해 브라우저 확인할 수 있도록 했다.<br>\n그리고 기존의 <strong>div</strong> 태그의 className을 아래와 같이 수정했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n  <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"stats stats-vertical mt-10 mb-10 shadow c_mobile:w-11/12 c_l_pc:stats-horizontal \"</span> <span class=\"token operator\">+</span>\n    <span class=\"token punctuation\">(</span>isSafari <span class=\"token operator\">?</span> <span class=\"token string\">\"flex\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"w-full\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>사파리 브라우저의 경우 <strong>flex</strong>를 주고 그 외에는 <strong>w-full</strong>을 줬다.<br>\n<strong>flex</strong>를 사용할 경우 각 자식 요소를 수평으로 배치할 수 있음을 이용했다.</p>\n<p>이렇게 구현했더니 사파리 브라우저에서도 잘 동작했다.</p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>개발을 하다 보니 프론트엔드 쪽은 신경 쓸 부분이 참 많은 것 같다.<br>\nChat GPT에게 이 문제를 물어봤으나 역시 원론적인 답변만 줬다.(영문 &#x26; 국문 질문)</p>\n<p>당연한 것이 이런 경험적인 부분이나, 동작원리같은 부분은 아직 GPT가 답변하기엔 어려운 부분이 아닐까 싶다.<br>\n물론 추후 이런 부분도 학습을 하면 나아지겠지만 아직은 무리인 것 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"toc\"><pre class=\"language-toc\"><code class=\"language-toc\"></code></pre></div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%B0%B0%ED%8F%AC%EB%A5%BC-%ED%95%98%EA%B3%A0-%EB%82%98%EC%84%9C\">배포를 하고 나서...</a></p>\n<ul>\n<li><a href=\"#%EB%8F%84%EB%8D%B0%EC%B2%B4-%EB%AC%B4%EC%8A%A8-%EB%AC%B8%EC%A0%9C%EC%9D%BC%EA%B9%8C\">도데체 무슨 문제일까?</a></li>\n<li><a href=\"#how-to\">How to?</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"23년 5월 4일 흑우집합소 개발노트 (Daisy ui  Stat 이상현상)","description":null,"date":"May 04, 2023","tags":["TIL","흑우집합소"],"series":"TIL","previewImage":"writing.png","isPrivate":null,"writer":null}},"previous":{"fields":{"slug":"/til/230503_til/"},"frontmatter":{"title":"23년 5월 3일 흑우집합소 개발노트 (React에서 useState의 상태 처리)","isPrivate":null}},"next":{"fields":{"slug":"/til/230219_til/"},"frontmatter":{"title":"23년 2월 19일 TIL & 개발노트 (이중 로그인 관련 고민과 해결)","isPrivate":null}}},"pageContext":{"id":"6f382036-7453-538d-8427-49ffee244d4b","previousPostId":"94edfe0a-0010-521e-a705-bea090be3e2f","nextPostId":"0636336d-0fbb-538b-9cf3-220caaa9b921"}},"staticQueryHashes":[],"slicesMap":{}}