{"componentChunkName":"component---src-templates-blog-post-js","path":"/android/171225_android_fcm/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab","siteUrl":"https://elfinlas.github.io","comment":{"disqusShortName":"","utterances":"elfinlas/blog_utterances"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"c7f49bae-3724-57ec-a95a-6958371f1b15","excerpt":"주의 이 문건은 과거 Hexo 블로그 (2017-12-25) 에서 이동된 문서입니다. 시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다. Android에서 푸시 알림을 구현하려면? 전에 하던 프로젝트에서 안드로이드와 서버간의 푸시 알림을 구현하였습니다. 이걸 한번 정리해서 문서화 해야 했지만 시간이 없어서 정리를 못하다가 이번 기회를 통해 포스팅을 하여 정리하려 합니다.  위 이미지는 FCM…","html":"<h1 id=\"주의\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98\" aria-label=\"주의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의</h1>\n<h3 id=\"이-문건은-과거-hexo-블로그-2017-12-25-에서-이동된-문서입니다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EB%AC%B8%EA%B1%B4%EC%9D%80-%EA%B3%BC%EA%B1%B0-hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-2017-12-25-%EC%97%90%EC%84%9C-%EC%9D%B4%EB%8F%99%EB%90%9C-%EB%AC%B8%EC%84%9C%EC%9E%85%EB%8B%88%EB%8B%A4\" aria-label=\"이 문건은 과거 hexo 블로그 2017 12 25 에서 이동된 문서입니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 문건은 과거 Hexo 블로그 (2017-12-25) 에서 이동된 문서입니다.</h3>\n<h4 id=\"시간이-지남에-따라-최신-기술과-다를-수-있으니-주의-바랍니다\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EA%B0%84%EC%9D%B4-%EC%A7%80%EB%82%A8%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%B5%9C%EC%8B%A0-%EA%B8%B0%EC%88%A0%EA%B3%BC-%EB%8B%A4%EB%A5%BC-%EC%88%98-%EC%9E%88%EC%9C%BC%EB%8B%88-%EC%A3%BC%EC%9D%98-%EB%B0%94%EB%9E%8D%EB%8B%88%EB%8B%A4\" aria-label=\"시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다.</h4>\n<hr>\n<h1 id=\"android에서-푸시-알림을-구현하려면\" style=\"position:relative;\"><a href=\"#android%EC%97%90%EC%84%9C-%ED%91%B8%EC%8B%9C-%EC%95%8C%EB%A6%BC%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EB%A0%A4%EB%A9%B4\" aria-label=\"android에서 푸시 알림을 구현하려면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Android에서 푸시 알림을 구현하려면?</h1>\n<p>전에 하던 프로젝트에서 안드로이드와 서버간의 푸시 알림을 구현하였습니다.<br>\n이걸 한번 정리해서 문서화 해야 했지만 시간이 없어서 정리를 못하다가 이번 기회를 통해 포스팅을 하여 정리하려 합니다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/475605cd9b0f3dd1ef339fd54ee60cfd/d9f49/img_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 123.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAADq0lEQVQ4y41VS28bVRj1T0BiiajECqkb/gU/ACFEl0XqAhYUUYS67JZlpa4qFlUrdVESaNVIFAkS2tgkaetKcUM9dsavju0Zz8vzfs8cvnvtMbEVJ73S0Z25j3O/73xn7lRQFCjyFMBZoDW0Ls0yIM/5+xKKnM+xNRXVjbHVkHH97wkuP1Hw1RMZl3+XceUPBV//OcHVnQmsKKc9GRzTRG00wQ+v+/iRcP2oj2vUP+rLcGkuihNU4jSD6QTY7pnYEAxstlhv4lfC/SMdmzQWpjmSLEVmTfHZSxHv7TTxcbWNC08FXHgm4JNaC1PDQJwQYUYpxFGE1LOR+y4QeUBMiNz5mM2jS+hgd2ri+ZiibvTwPeEa4ZvDLrYGMrzpPMI8J23SFLZtwXVsqFMXomKjP7EgqRZk3UKezQh92nS3M8Ln9Q6+JFx61cUX9S5+EiTY5jzCghcl5wQvBg42j1w8/tdBU5pCkAz0FAuscDEdGlPK3x728P7OG3xI6V6stvARpfzpwfEs5ThGJUlS+L4Hy/FISx+uHyDwXERhAI+ePdfhCzOK0tQ1DHUDv/XH2OhI1Mt4QGirOhyKPqFDK7quo9Fo4LjdJrQgHh9DkoZo07sgCBA7HXqXwNpYltFqNvFWeAO5I2LS60LpihCFJoajEV9TwUpjErDmkJ6e5y3Gc+4/YDgcojd4y59T0j9jkp3YO9NwFfMFLEKWQdkURYEoiosDVvfxCJcG5mRFGvDJMIxJv2hBGAQB13I1myXCpXT5J0inH94C6t9RUQx0Oj2KUuOpWpbFYVBFS+KSqGyVk6eVhNnhDWD3A9iagLbYx97eP9jd3cX+/j6q1SpqtRqiKDqf8P+UDcpP4IZnGmqaBlVVuYYjquZ4POZzZxJifndgpWoMpXbsmfWM7KR+61NeEjlfvJt0kzBzr7PYbP1pKc97FgVD6T1mFdu2ZwWj+RLnV3kl/LKxyp4W4flFmRu2RpXc3v4LQRhy/Ri4D5MCB8MUe4SngxRtI1sfYTmQkJGfv2pgv96ATtW1/RgT06EFGeyoQFPLILs5rLCAnxTnEzJ/3Xnp4ud6BFk1cO91hpsHIf0zck5wm8ZvHkS48SzEVjtZ6LqWMAwjjDULquVDUTV4tMfwUn5n2uTlgVWAfkOYeAWc+B0iTOjWffzoITZ+eQCD7BLQb8Giu44TBgm6eoixFUGaRjD95GzCcpAVwfP8RZFmIM18Hz5daS6D6y19fqfaZtUG62x0lm3+A0y7bVqS029TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/475605cd9b0f3dd1ef339fd54ee60cfd/77434/img_01.webp 300w,\n/static/475605cd9b0f3dd1ef339fd54ee60cfd/2276a/img_01.webp 400w\"\n              sizes=\"(max-width: 400px) 100vw, 400px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/475605cd9b0f3dd1ef339fd54ee60cfd/a8a0d/img_01.png 300w,\n/static/475605cd9b0f3dd1ef339fd54ee60cfd/d9f49/img_01.png 400w\"\n            sizes=\"(max-width: 400px) 100vw, 400px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/475605cd9b0f3dd1ef339fd54ee60cfd/d9f49/img_01.png\"\n            alt=\"img 01\"\n            title=\"img 01\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>위 이미지는 FCM 사이트에서 가져온 것인데, 이미지에서 보는 것처럼 푸시 서비스를 구현하려면 <strong>모바일측</strong> 구현과<br>\n<strong>푸시 메세지를 관리하는 서버 측</strong> 두 가지를 구현해야 합니다. (GUI는 제외하도록 하겠습니다.)</p>\n<p>이번 포스팅에서는 FCM을 안드로이드에 적용하는 방법에 대해서 알아보도록 하겠습니다.</p>\n<br>\n<h2 id=\"안드로이드에서-fcm-설정하기\" style=\"position:relative;\"><a href=\"#%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C%EC%97%90%EC%84%9C-fcm-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"안드로이드에서 fcm 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>안드로이드에서 FCM 설정하기</h2>\n<p>설정하는 것은 <a href=\"https://firebase.google.com/docs/cloud-messaging/android/client?hl=ko\">공식문서</a>를 참고하면 되지만, 이 포스팅에서는 핵심만 집어서 정리하도록 하겠습니다.</p>\n<br>\n<h3 id=\"1-firebase-프로젝트-만들기\" style=\"position:relative;\"><a href=\"#1-firebase-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"1 firebase 프로젝트 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Firebase 프로젝트 만들기</h3>\n<p>FCM을 적용할 프로젝트에 Firebase 프로젝트를 추가해야 하는데, <a href=\"https://console.firebase.google.com/?hl=ko&#x26;pli=1\">콘솔</a>사이트에서 프로젝트를 추가해야 합니다.<br>\n프로젝트가 미 추가 상태라면 위 콘솔 사이트에서 생성합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4a1ff04e954f207cdcf348a894d6678e/d8a93/img_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABj0lEQVQoz3WRzUobYRSG50qUhMakJkbrNGYSo4kxlghaaLFU6aoUV16Ad9BaxJ0/uPQGLBVa0RIKRtuNUOg22aQhmUw0MxkzMwa6ePrNaKiU+sHDe87ie3nPOVImnWB5Kc7k7CueL73h6YvXRGJZHgyNMzA8QSCi4Fs9ILynE9j5Rf9Wlb7N/+PbriKF5QnkRIqHo1NE4zmP0MgkQUHoUZrAUJKV3WM2zm3enjR5d9ri/Tedtbuc6ax/N1gtXCBFYtMkss+QU3mUzDxj6TniQj3D0Qyh6ZcUT4rQtTAvGvy2Te57FaOLdJPkb6Ievd4fSfLla9H70LFsnOsuluPQsW1s5xrLdoQKOg4/q6YY+XGW3NwimfwCgyKRuzeX4O3YvkGFz0cFrq5MVFVF0zRarRaGYdygC0wTs1HhR1lFclPIqVnk8TzRsRwjyhOGlRkPt/aHk3z4+Am1XqdcLlMqlTzTdruNruueqatuX9PEDr1LRlMevXR38YUT7B8cYnYsag2NRvOSutYU9b9oqMLwD3FGdJ6ZWU7OAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4a1ff04e954f207cdcf348a894d6678e/77434/img_02.webp 300w,\n/static/4a1ff04e954f207cdcf348a894d6678e/14bd4/img_02.webp 552w\"\n              sizes=\"(max-width: 552px) 100vw, 552px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4a1ff04e954f207cdcf348a894d6678e/a8a0d/img_02.png 300w,\n/static/4a1ff04e954f207cdcf348a894d6678e/d8a93/img_02.png 552w\"\n            sizes=\"(max-width: 552px) 100vw, 552px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4a1ff04e954f207cdcf348a894d6678e/d8a93/img_02.png\"\n            alt=\"img 02\"\n            title=\"img 02\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>생성이 완료되면 위 사진처럼 설정 아이콘 클릭 후 프로젝트 설정을 클릭하면 아래 사진처럼 설정 화면으로 이동하게 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/72c5bc2879d3ed72b575215f58d82a0b/78d47/img_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVQ4y5WSy27UQBBF/TtkBRJhwYbP4S/4BlihRAKE8gmIPQuQgoTIBIVsWMAkMw4zfrTb70e7bqrazwmDEC0d3XL39XV3uZ3Hb10cHK9w76jneKbMwX/iPDlx8ejNGoeM6MPXoi4dWta4/2pND3bBTP/AuVwrfLueOGfOfvm0WAa0uApxtgxbxvRKDGa6g/idSGvoO+Rpgroq0dQV1WUBwdSVPLdNXQrEYFT2ynqWpnC2YYQ5ntLI8pzyvGjBo2nMom6aEyKcGmOnQB1EU21HnOVwfBXB5yCfgzzWQAKznMqyNGRfwXvmGdefiNoFx3zlOpA16gZ6HxIJ9DjQ6wOHUKVj6CQlBlGcGqaI4kQzodJJwFrK2uAZCKN4CvTmu4w0cYiEkWINGZ1m/FKGKOlqu8YBvc/OB/PAIUy0Mca2qj+JbVNR8g+oKkLdUFEU1HadG9q3/8hWGf4Jo3OZlvjsJba+yRJ83FxBwuoggf/uC6gxo3d/oOoC2357H1YBXpz/tPVFtMXzy1MbkP1w8f3pS5i8+scO+Zmvymgqcu6dUrbOswzbzcbWVVNz7zRMO3nTvx1Zmhxz4wX5qhhtzeyrB0K+Hd09vBO6DQQ1smFkfnWzwbX7e1rz1Y5PPLf9Z/95+9psZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/72c5bc2879d3ed72b575215f58d82a0b/77434/img_03.webp 300w,\n/static/72c5bc2879d3ed72b575215f58d82a0b/411c4/img_03.webp 600w,\n/static/72c5bc2879d3ed72b575215f58d82a0b/cf465/img_03.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/72c5bc2879d3ed72b575215f58d82a0b/a8a0d/img_03.png 300w,\n/static/72c5bc2879d3ed72b575215f58d82a0b/dface/img_03.png 600w,\n/static/72c5bc2879d3ed72b575215f58d82a0b/78d47/img_03.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/72c5bc2879d3ed72b575215f58d82a0b/78d47/img_03.png\"\n            alt=\"img 03\"\n            title=\"img 03\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br>\n<p>이곳에서 <strong>Android 앱에 Firebase 추가</strong>를 클릭하면 앱 등록 화면이 뜹니다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">앱 등록</th>\n<th align=\"center\">구성 파일 다운로드</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 713px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/289be68efeabd2a9c06a4ef6cb635ec5/61d11/img_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACaklEQVQ4y5WSTU8TURSG54do8DtqiySCpi7UAP4Yf0TFJTtDhLZAS0JMDMbElQt3aHVDohIjdqYitFNo09KCM9PpdL77eu6dThhKiaHJk/PRc957ztwrjM+uI7G8jXvpAhIZEYlFEffTIsZTBYy+LODm3C/c+i9biM0XMTqbh/Ak9RWTb1VMrx1gcq2J6TctTBEPXzcxsXqAWK6O+EojIBdhJWrrGF09xOP0DwhT8xu4kW0gtrSH2HIVt5eqePqhhbsrNcQpHiM7tlQJyJGfq+JOlvKZMrfcz+7TwQ08WvgOIfFiAxfSDVxO7WEktY8rmSoevKrjKtmLC/u4tkhNJMS4Tv4lqgnjeLbG45GFPdKoY2JuE0Ly3SaSnzUk11tIfjzEs09HnGQf5s/k+/Tj5/kAluP1rI80Zt6LEOQ/RcA14HUU+IYKWDoocU4csF+zWoGwVRChdB0cqAaamoGGouNIt6BZPjTTC7D6mC66lg0zAosN04Lr97BbKkMQJYkSNo4UDX/VNvSuSUUOzw3Cmh3H4dj2sW9ZFnq9HmRZhiCRoGWa0FQVbU1DR9fhUpHve/C9k3iueyxE1u4TCpbLNKFULFKzD6Pb5X90ybIil5oDvMB6gbUjQoOCu6USrSxKPKEoClQ2ZbvNfY2mZflwvZBwzSgszwRLXJBWZgkmwMR0Wjm0w+h0OqdsKMhXZoJsEiY4KBYeEj0o6pv07aMry/wbSkX+hgbXG7basBvmuC7XkCvyacEzmwbybDp2gWxa9lyarSZ2fm+fFBx2g8MI314oWqlUUGvUIX75dvaE51nZMAxYjo2dnxL+ARkCsqkWDPxUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/289be68efeabd2a9c06a4ef6cb635ec5/77434/img_04.webp 300w,\n/static/289be68efeabd2a9c06a4ef6cb635ec5/411c4/img_04.webp 600w,\n/static/289be68efeabd2a9c06a4ef6cb635ec5/e185d/img_04.webp 713w\"\n              sizes=\"(max-width: 713px) 100vw, 713px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/289be68efeabd2a9c06a4ef6cb635ec5/a8a0d/img_04.png 300w,\n/static/289be68efeabd2a9c06a4ef6cb635ec5/dface/img_04.png 600w,\n/static/289be68efeabd2a9c06a4ef6cb635ec5/61d11/img_04.png 713w\"\n            sizes=\"(max-width: 713px) 100vw, 713px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/289be68efeabd2a9c06a4ef6cb635ec5/61d11/img_04.png\"\n            alt=\"img 04\"\n            title=\"img 04\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></td>\n<td align=\"center\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 714px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2a3888cda0afac685a5be00df0a53a0a/f91ec/img_05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADy0lEQVQ4y3VU224bVRT1p4DU0EBTikBIPKA+ECGgIETSUgmpPIJ44BP4AoQEojRJG7cF0dIoiROQuIg+EGhRQlJycX2/OxnP1XY9nvuMZ7zY59hurUgceWnvM2fP8tqXM7HXLm/jzYSOc8sq3ljWcG5Fw9urTUzf0fDydwpOLUqYvDbA6biMqbg0hDyERDEiznzbxNkr+4hNX97CZFzF1DWB0MApwrNXatw/ExcxudDAW0sK3llWcHJB4M9YzNR8jdvTiw08vyjgubiCs9/sIvbqV1t4akHBxNwRTswJeIYIXowLOHm1gRPzDW6n7yh4nTBJPj+/IeGl6wJeuC5igvYT8wKeJo5XvibCSzd3MPtTFxfWNMyuNTGzquL9NRXvrSh4l1TNrCo4n1BxYQi2v0jnF9dVbmcTGs7Ts5m1Fi59n0QsmUqjIcmo1mpQxCN4lgFEPSAMHiPqBbBdH7bnwyGMfNN28aijQ9YdtN0IpUoVsWw2Sy/4UNo67hba2Kh0ca9uEUzcJ7tRs7Av2QgCH74/QDCE73twHQem48IP+1xULJ3Nga2yZuGjX5oEjaDik980fEz2wx9lfP53k1ST2n6Ifr9P0X1uo4jtI/QCdtZHjRFmiZCFmKYBTZbQVGRupcYR95miluki2/TxR7KOjfsPsLmTws6/STzMlLGXzEHVWlxUtVodELJlGCby+TyKxSKhhHq9Dl3XYbkBRN3FruRhfTOJRi2Fg71NqnsFXUNBR5dIjD7IslJ5Quh5Hmzb5jBNk5QFCMMIYa9HmbKUemiqItXOgtKo8nRHi9WSlaAyTtjpdJDL5VAul8nmkU6nUSgUwJpm2w68oAdJVogoQlsVYFsWf48RMTHMDlPO8gOLAkqlEhRFgee6BIfKYMDodqnoPh8l41ELERVckETqaB1BL+R71x0QPm7KKOUepce6tZ3M4CBXRJ/UMGWa6SGtOFhKNrG03cWtu3nc/DmHlb9ErG+1UZOtYVOOETqkjK2rS+v47MsF7jeJTOi4UA0PZUVHu2tDFGW0OyY6ho0uTYAzUjjeZZfIojDEXiaPuR8S+OLGbdx7sM/T7w9vC3WIfgGPC5lP6NGeEUbEUfjn4AkhmzfWuUP690L1EOVDAcXaIVxS7tPgjm7JODzCYAL8wdjsphDLUFPYiOhUfDaLPhFQ8fhtYAiGZMExUkbG7nml5WA5rePXiotkvoxYKpNFo+uhonSoPgYsmkGW/uilcTJmR75LHwc2m3/S3f8gIeLT31vYelgcTzngXWY4TvB/4GXitfV5NvV6Df8BeIxBX/F04WwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2a3888cda0afac685a5be00df0a53a0a/77434/img_05.webp 300w,\n/static/2a3888cda0afac685a5be00df0a53a0a/411c4/img_05.webp 600w,\n/static/2a3888cda0afac685a5be00df0a53a0a/b2596/img_05.webp 714w\"\n              sizes=\"(max-width: 714px) 100vw, 714px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2a3888cda0afac685a5be00df0a53a0a/a8a0d/img_05.png 300w,\n/static/2a3888cda0afac685a5be00df0a53a0a/dface/img_05.png 600w,\n/static/2a3888cda0afac685a5be00df0a53a0a/f91ec/img_05.png 714w\"\n            sizes=\"(max-width: 714px) 100vw, 714px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2a3888cda0afac685a5be00df0a53a0a/f91ec/img_05.png\"\n            alt=\"img 05\"\n            title=\"img 05\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p><strong>앱 등록</strong>화면에서는 안드로이드 패키지 이름(build.gradle의 android{ applicationId }에 선언된 것)을 등록 후,<br>\n다음 화면인 <strong>구성 파일 다운로드</strong>에서 설명에 나온 대로 json 파일을 프로젝트에 추가합니다.</p>\n<p>이후는 아래의 사진처럼 작업을 진행합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 707px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d42c33e0aa98a7a61f9823fdb47ab937/e9ffe/img_06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 106.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVQ4y4VUWW8bVRj1/0ACwiLRkCZEbCnLA2p545fwA3hHQi2PqGStm6hIiE3iFVUCBFIL2HEDNE7iPYk9++olsT3j7XC+a7tuVBCWjr6ZO3fOd8757jjx6ucPcWX7BFeSZby1XcGbyQpWiNdulXF5vYT5VWJtUv8TRSxsVrH86a9IvJ0s4dq3Pq5+7Si895WDa6zvfOnglR0LLydNLNx+Eovb1uw+aWDhToD3V1NIvL6Rx0u3TMxvaYSOS5saLq0dc5OORWLptoGlrVMsblWxtG2o9ZU7Jj686+PydE+S72y7uHrzDyTmb+bxzIaJuXUNz65peHFTx/KOgefWdTy9qrGZoYiWd0y8sKHjeeINEq58Yar1Oe6bW6vhqXUH735GhZ/8dIrr90Ncv+fjBqvCb+HF6//D/QA3Umf4+PsMEqFjwDNqaNc9AEOiTwwuYhTzETHqXcCw00TUbqF+3oX8sn/uIlGpmcjqIXKVKgrFIkrlCgqlEorlMvLFEtdKMEwLluvD9UO4QQgvqMPxAuiGCY2wHA99aknvktBxHLQaDdi2Bbl2XVdV3/cRhqFCp9Mhuuh0u+j3+xcwGPTR6/WUwkyGlv0gQBzHMC1LkRmGAU3T4PA6IFlARa7nwXZceGzSbrefwNn5OYbD4VihbJIOuq6jWq0qMtu2H1MYPFIq1wHX5ZnHJiJAIPvFRTqdnhHK4n72AOnMAxwe5fD3/j6OcnmVYS5fULVYKjPjMk5OTmEy1ymxzYgUoSj0J4SSm207sEgsXU2TgWu6ikDUS5VYZN2ybCVgqtDiulgfZ0jCKIpUJ1/Z8ZS9RrOJZquFBgdWJ+S+8VgVgnNmpzI8O+NwBjNCkSsdpZMokRjCel29LIPxOZggrI+HNIGImKLL6Y9GI2QeZMYZyvjFjqYbPHMmarRa43BqNU1VXZrQmueNLYobiWgKZblDy6n0WKEcm4fZLLIHhwrlyjHvD3CYyyFfKKrhyIGXdRnIbOpj+GwQjwa4990Psymr3CQvWq3XG2g2W7QSqTgiWopprc99vX9BHMXqYP9+95exQgnWcSzmaNKSzUnqqlqWTJb2adlyPbTZoBf3lKMpIqLD9REJU+oc8pvs9zt8OaXguhkSpzmcFFXm+I3mceyUcFQpQPNNKuKnNiFTn5z6oxgr3FVfCv3L9xjHbW7osM4QRQIejy7B0DtRd2xxQiZ1z2jj58oZyvU+9nbTU8IBH/Ye4WJG/BOYYEoyJRSrH/3o4INvdKzvtVDI/oV/AE5CxzosODmwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d42c33e0aa98a7a61f9823fdb47ab937/77434/img_06.webp 300w,\n/static/d42c33e0aa98a7a61f9823fdb47ab937/411c4/img_06.webp 600w,\n/static/d42c33e0aa98a7a61f9823fdb47ab937/36466/img_06.webp 707w\"\n              sizes=\"(max-width: 707px) 100vw, 707px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d42c33e0aa98a7a61f9823fdb47ab937/a8a0d/img_06.png 300w,\n/static/d42c33e0aa98a7a61f9823fdb47ab937/dface/img_06.png 600w,\n/static/d42c33e0aa98a7a61f9823fdb47ab937/e9ffe/img_06.png 707w\"\n            sizes=\"(max-width: 707px) 100vw, 707px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d42c33e0aa98a7a61f9823fdb47ab937/e9ffe/img_06.png\"\n            alt=\"img 06\"\n            title=\"img 06\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br>\n<h3 id=\"2-dependencies-설정하기\" style=\"position:relative;\"><a href=\"#2-dependencies-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"2 dependencies 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Dependencies 설정하기</h3>\n<p>아래의 의존성을 추가해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"gradle\"><pre class=\"language-gradle\"><code class=\"language-gradle\"><span class=\"token keyword\">dependencies</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token punctuation\">...</span>\n\tompile <span class=\"token string\">'com.google.firebase:firebase-messaging:11.0.4'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h3 id=\"4-fcm-처리를-위한-서비스-클래스-작성\" style=\"position:relative;\"><a href=\"#4-fcm-%EC%B2%98%EB%A6%AC%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%9E%91%EC%84%B1\" aria-label=\"4 fcm 처리를 위한 서비스 클래스 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. FCM 처리를 위한 서비스 클래스 작성</h3>\n<p>Android Studio에서 서비스를 구현할 클래스를 만들어줍니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 255px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4227e6751a62204001b93016480fbbf3/18417/img_07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.74509803921568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEEElEQVQ4y31US2/jVBTOv4FNO5Pm0Th+xrHjOE7ixG87zrNJq3YKQzuIWbFjNWJFYYSEQIgRW9bsBnVm2CAESPwBfkfV+3HspG3KjFh8Otfn3vP5vAvBBzqcpYd4/glGy3MkB+fQ7DnU/gzN/lpq9gJtb4VBcoxBfIxucIhueAQ3fQR/coq2u4Qdn4BXDBTM0ETLsWH0JzDsBOYwhdz2IRnePSik07sRtBwhmlYEvReTXZzfqfTNiSoKHcvBMEyRzBMcrQ7hBwEqNQ41XkCtLuSyLsrgJZmklJ9vIUjgBGlzr6BU2UdBkBsYei46bg+t0YrZrg+rP2BDL2C9gcOsXp9JjSYjA0Zv3wleajBRUVm5WmM5oWl1IWgdcLMPmeUEiJKUeWF0FcTpVRjFV0pTu6pLyhW9fSf4zR0RXhfoIQZDBw2rD+7gCYZRyoIgRENrocrxeUhZONmPM3lz3kauU9S7kDM09Dba4fjaDhKE6eQfudF8TGGcZaD7W5Dxve+N7gm9O9mrVH/KCbOkKk0dRsu47jk+Fejw72KpvEseFumuSMkvUoGKnCAX6X2RCIq8vAVJKZH9e3vl6rMCJfTW7X1eRKfbY6rewnh5TJ5OEY9SjKbzXMoN9f9DrlLI/I1i7SlrWz1ohsnceMycIGauHzC93WGZTmqoW5VdV52/OVOViZARYRMZBKUJjspvdgfQ2hYLJwfMI9Ks4lJDZ5WawPZ5mdUEhUiab0FQNCKkthH5MkS+AlGogOdKsDo6dE1GlCbwfAeeY2EwsBCFLpLYQRzaaMg1CPWNHUEgSGRfLpdQKIdfo+x/gUpwgZJ3AWXyHFL6FXqPvoN39gLB+Y9wHr+AffoD2offQ5p+i/3oOdlckM2XG5B9/A2Kko/Cg9VveHjwivAGu4s3kE9/gXByCefpz/A/fY3xZ3/g5PO/cPTsT+gf/Yr305fYnV/S+9ckX2Fndomd6UvsLH/HA3VFRVF02hJaDsoD5VEHJ7eoQCpqpo/9xVPUDRXmwIcXjRHE41xG6YIwx2i2QphMqROWZKNQY9PQvwWZIAgQzB7E2SmklgjLtuH6Ps29h6HrwfECOvsIohhDx0UYJxCpU9Zts4V1b6kQaLMInQGExRmktowujacXxnBpLB0/onOCIKEenczhk35+cJiPa04obM3ozSriuDrqpo368mPwuoA+eTFdLIlghoSa3CfPMu8iOifjKQyzg4d75TvCm47P/iKrGtq0LLS+Ay1Z0BI10SMP7aGbrTZkzW/QhqJmz8+Zrqkb6+WwTZh5Z/Xs/OFocUTJH8GnPI3SMSU+pYUqoliu0tK9W6yZrNHIZs7Q+rpPmF127QGMThfeaAqH8uSHEXkwREKkWb7S8QQKRfDfmRY3s/wv2xkAnLt8y4MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4227e6751a62204001b93016480fbbf3/a12a6/img_07.webp 255w\"\n              sizes=\"(max-width: 255px) 100vw, 255px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4227e6751a62204001b93016480fbbf3/18417/img_07.png 255w\"\n            sizes=\"(max-width: 255px) 100vw, 255px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4227e6751a62204001b93016480fbbf3/18417/img_07.png\"\n            alt=\"img 07\"\n            title=\"img 07\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>위 사진은 그냥 참고용이며, 저 같은 경우 패키지를 하나 만들고 그곳에 생성하였습니다.<br>\n2개의 클래스를 생성해야 하는데, <strong>FirebaseMessagingService</strong>를 상속받은 클래스와 <strong>FirebaseInstanceIdService</strong>를 상속받은 클래스를 만들어줍니다.</p>\n<p>아래는 예시로 만든 클래스들입니다.\n먼저 <strong>FirebaseMessagingService</strong>을 상속받은 클래스를 하나 만들어줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">NotificationManager</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PendingIntent</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Context</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Intent</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>graphics<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Color</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>media<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RingtoneManager</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Uri</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PowerManager</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">NotificationCompat</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>firebase<span class=\"token punctuation\">.</span>messaging<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FirebaseMessagingService</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>firebase<span class=\"token punctuation\">.</span>messaging<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RemoteMessage</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomFirebaseMessagingService</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FirebaseMessagingService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/**\n     * Called when message is received.\n     *\n     * @param remoteMessage Object representing the message received from Firebase Cloud Messaging.\n     */</span>\n    <span class=\"token comment\">// [START receive_message]</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onMessageReceived</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RemoteMessage</span> remoteMessage<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> pushDataMap <span class=\"token operator\">=</span> remoteMessage<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sendNotification</span><span class=\"token punctuation\">(</span>pushDataMap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> dataMap<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MachineListActivity</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        intent<span class=\"token punctuation\">.</span><span class=\"token function\">addFlags</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FLAG_ACTIVITY_CLEAR_TOP</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">PendingIntent</span> contentIntent <span class=\"token operator\">=</span> <span class=\"token class-name\">PendingIntent</span><span class=\"token punctuation\">.</span><span class=\"token function\">getActivity</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> intent<span class=\"token punctuation\">,</span> <span class=\"token class-name\">PendingIntent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FLAG_ONE_SHOT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Uri</span> defaultSoundUri<span class=\"token operator\">=</span> <span class=\"token class-name\">RingtoneManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDefaultUri</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RingtoneManager</span><span class=\"token punctuation\">.</span><span class=\"token constant\">TYPE_NOTIFICATION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">NotificationCompat<span class=\"token punctuation\">.</span>Builder</span> nBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NotificationCompat<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setSmallIcon</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>mipmap<span class=\"token punctuation\">.</span>ic_launcher<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setContentTitle</span><span class=\"token punctuation\">(</span>dataMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setContentText</span><span class=\"token punctuation\">(</span>dataMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"msg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setAutoCancel</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setSound</span><span class=\"token punctuation\">(</span>defaultSoundUri<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setVibrate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token keyword\">long</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">{</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setLights</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token constant\">WHITE</span><span class=\"token punctuation\">,</span><span class=\"token number\">1500</span><span class=\"token punctuation\">,</span><span class=\"token number\">1500</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setContentIntent</span><span class=\"token punctuation\">(</span>contentIntent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">NotificationManager</span> nManager <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NotificationManager</span><span class=\"token punctuation\">)</span> <span class=\"token function\">getSystemService</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NOTIFICATION_SERVICE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        nManager<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span> <span class=\"token comment\">/* ID of notification */</span><span class=\"token punctuation\">,</span> nBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 서비스 클래스는 푸시 메세지를 받아서 처리하는 것을 구현합니다.<br>\n<strong>onMessageReceived</strong> 메서드에서는 푸시 메세지를 수신했을 때 호출이 되며, <strong>pushDataMap</strong>에는 푸시 메세지 내용이 담기게 됩니다.<br>\n<strong>sendNotification</strong> 메서드는 푸시 메세지를 알림으로 표현하는 처리를 담당하게 됩니다.<br>\n해당 메서드는 자신의 로직에 맞게끔 구현하면 되며, 위는 예로 구현을 한 것입니다.</p>\n<p>다음은 <strong>FirebaseInstanceIdService</strong>를 상속받은 클래스 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>firebase<span class=\"token punctuation\">.</span>iid<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FirebaseInstanceId</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>firebase<span class=\"token punctuation\">.</span>iid<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FirebaseInstanceIdService</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomFirebaseInstanceIdService</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FirebaseInstanceIdService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/**\n     * Called if InstanceID token is updated. This may occur if the security of\n     * the previous token had been compromised. Note that this is called when the InstanceID token\n     * is initially generated so this is where you would retrieve the token.\n     */</span>\n    <span class=\"token comment\">// [START refresh_token]</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onTokenRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> refreshedToken <span class=\"token operator\">=</span> <span class=\"token class-name\">FirebaseInstanceId</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sendRegistrationToServer</span><span class=\"token punctuation\">(</span>refreshedToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// [END refresh_token]</span>\n\n\n    <span class=\"token comment\">/**\n     * Persist token to third-party servers.\n     *\n     * Modify this method to associate the user's FCM InstanceID token with any server-side account\n     * maintained by your application.\n     *\n     * @param token The new token.\n     */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendRegistrationToServer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">//FCM 토큰 갱신</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 클래스는 어플리케이션이 처음 설치되거나 가끔 토큰이 갱신될 때 <strong>onTokenRefresh</strong> 메서드를 통해 FCM Token을 하나 생성이 되어집니다.<br>\n그리고 이 토큰이 생성되거나 갱신된 경우 서버에 보내주는 메서드인 <strong>sendRegistrationToServer</strong>를 호출하게 됩니다.</p>\n<p>이 FCM 토큰을 통해 해당 기기로 서버에서 푸시 메세지를 보내게 해주는 고유 값입니다.<br>\n이 부분은 향후에 서버 측 구현 시 FCM 토큰이 갱신되는 부분을 개발해야 합니다.</p>\n<blockquote>\n<p>사실 다른 블로그들에서는 여기까지만 대부분 설명을 하게 됩니다.<br>\n그런데 사실 이런 정보를 찾으시는 분들은 요구사항에 맞는 내용을 구현하기 위해 내용을 찾게 됩니다.<br>\n전부 다 커버할 수는 없지만 두 가지 예시 사항을 보고 어떤식으로 로직을 풀어나가야 할지를 알아보겠습니다.</p>\n</blockquote>\n<h4 id=\"알림-수신-여부\" style=\"position:relative;\"><a href=\"#%EC%95%8C%EB%A6%BC-%EC%88%98%EC%8B%A0-%EC%97%AC%EB%B6%80\" aria-label=\"알림 수신 여부 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>알림 수신 여부</h4>\n<p>예를 들어 알림 수신 시간을 제한하는 기능을 구현해야 한다고 해봅시다.<br>\n그럼 아래와 같은 로직을 생각해 볼 수 있겠습니다.</p>\n<ol>\n<li>사용자로부터 알림 수신을 제외할 시간을 입력받습니다.</li>\n<li>1번의 데이터를 Sharedpreference 등에 저장을 해둡니다.</li>\n<li><strong>FirebaseMessagingService</strong>를 구현한 클래스의 <strong>onMessageReceived</strong>메서드에서 푸시 알림 수신을 하였을 때 2번의 저장된 데이터를 읽어와서 해당 시간이 푸시 알림이 가능할 경우에만 <strong>sendNotification()</strong> 메서드를 호출.</li>\n</ol>\n<p>저 같은 경우 아래와 같은 메서드를 하나 만들고 로직을 구현하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isCanReceivePush</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> pushMsg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">//시간 체크 로직</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그래서 <strong>onMessageReceived</strong> 메서드에서 저 메서드를 호출하여 true 값을 받을 경우에만 메세지를 수신하는 처리를 하였습니다.</p>\n<br>\n<h4 id=\"토큰-생성-및-갱신-부분\" style=\"position:relative;\"><a href=\"#%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B0%B1%EC%8B%A0-%EB%B6%80%EB%B6%84\" aria-label=\"토큰 생성 및 갱신 부분 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토큰 생성 및 갱신 부분</h4>\n<p>위에서 설명드린 것처럼 어플리케이션을 처음 설치할 때나 FCM 토큰을 갱신할 경우엔 Sharedpreference에 토큰 값을 저장해두는 게 좋습니다.<br>\n그래서 <strong>onTokenRefresh()</strong> 메서드에서 호출 시 아래와 같이 응용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onTokenRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> refreshedToken <span class=\"token operator\">=</span> <span class=\"token class-name\">FirebaseInstanceId</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isValidString</span><span class=\"token punctuation\">(</span>refreshedToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//토큰이 널이거나 빈 문자열이 아닌 경우</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isValidString</span><span class=\"token punctuation\">(</span><span class=\"token function\">getSharedPreferencesStringData</span><span class=\"token punctuation\">(</span><span class=\"token function\">getApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">AD_FCM_TOKEN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//토큰에 데이터가 없는 경우에만 저장</span>\n                <span class=\"token function\">setSharedPreferencesStringData</span><span class=\"token punctuation\">(</span><span class=\"token function\">getApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">AD_FCM_TOKEN</span><span class=\"token punctuation\">,</span> refreshedToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isValidString</span><span class=\"token punctuation\">(</span><span class=\"token function\">getSharedPreferencesStringData</span><span class=\"token punctuation\">(</span><span class=\"token function\">getApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">AD_LOGIN_ID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//로그인 상태일 경우에는 서버로 보낸다.</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>refreshedToken<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token function\">getSharedPreferencesStringData</span><span class=\"token punctuation\">(</span><span class=\"token function\">getApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">AD_FCM_TOKEN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//기존에 저장된 토큰과 비교하여 다를 경우에만 서버 업데이트</span>\n                    <span class=\"token function\">setSharedPreferencesStringData</span><span class=\"token punctuation\">(</span><span class=\"token function\">getApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">AD_FCM_TOKEN</span><span class=\"token punctuation\">,</span> refreshedToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">sendRegistrationToServer</span><span class=\"token punctuation\">(</span>refreshedToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>제가 개발했던 구형 로직을 그대로 가져와서 약간 지저분해 보일 수 있습니다만 일단 참고 및 설명용임을 감안해주시기 바랍니다.<br>\n일단 저 같은 경우 아래의 로직으로 구현하였습니다.</p>\n<ol>\n<li>갱신된 토큰이 정상인지 체크</li>\n<li>Sharedpreference에 저장된 FCM 토큰 값이 없는 경우에만 저장.</li>\n<li>만약 로그인 상태일 경우 Sharedpreference에 갱신된 토큰을 저장하고 서버로 갱신된 토큰을 전송하는 메서드를 호출.</li>\n</ol>\n<blockquote>\n<p>간단하게 두 가지의 예시만 설명을 드렸습니다.<br>\n다른 요구사항이 있다면 위에서 안내드린 것처럼 로직을 풀어보고 그에 맞춰서 구현을 하면 푸시는 어렵지 않게 구현을 하실 수 있습니다.</p>\n</blockquote>\n<br>\n<h3 id=\"5-manifest-파일-수정\" style=\"position:relative;\"><a href=\"#5-manifest-%ED%8C%8C%EC%9D%BC-%EC%88%98%EC%A0%95\" aria-label=\"5 manifest 파일 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Manifest 파일 수정</h3>\n<p>위에서 생성한 서비스 클래스를 매니페스트에 등록합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">\t\t<span class=\"token comment\">&lt;!-- Firebase Service --></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>service</span>\n\t\t\t<span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.firebase.CustomFirebaseMessagingService<span class=\"token punctuation\">\"</span></span>\n\t\t\t<span class=\"token attr-name\"><span class=\"token namespace\">android:</span>enabled</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n\t\t\t<span class=\"token attr-name\"><span class=\"token namespace\">android:</span>exported</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>action</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.google.firebase.MESSAGING_EVENT<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>service</span><span class=\"token punctuation\">></span></span>\n\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>service</span>\n           <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.firebase.CustomFirebaseInstanceIdService<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>enabled</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>exported</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n           \t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>action</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.google.firebase.INSTANCE_ID_EVENT<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n             <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n       <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>service</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>위 작업을 다 마칠 경우 푸시를 수신할 수 있게 됩니다.</p>\n<br>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>사실 이 포스트 하나만으로는 푸시 서비스를 구현했다 할 수 없습니다.<br>\n개인적으로 푸시 서비스를 구현하려면 <strong>서버 측</strong>의 구현이 제일 중요한 것 같습니다.<br>\n이 포스트와 짝을 이룰 서버 측 구현 포스팅은 곧 작성하여 업데이트 하도록 하겠습니다.<br>\n또한 1:1 푸시 말고 구독 값을 이용하여 푸시를 받는 내용도 포스팅할 예정입니다.</p>\n<p>업데이트를 기다려주세요.</p>","frontmatter":{"title":"Android에서 FCM 푸시 사용하기","date":"December 25, 2017"}}},"pageContext":{"slug":"/android/171225_android_fcm/","previous":{"fields":{"slug":"/til/171225_devnote/"},"frontmatter":{"title":"<개발일지> 12월 18일 TIL (HTML Table의 행을 동적으로 처리하기 with jQuery)"}},"next":{"fields":{"slug":"/java/180211_javacollectionduplicate/"},"frontmatter":{"title":"Java에서 컬렉션의 중복을 제거하는 방법"}}}},"staticQueryHashes":["3128451518","903436796"]}