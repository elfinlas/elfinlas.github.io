{"componentChunkName":"component---src-templates-post-template-index-tsx","path":"/aws/211118_aws-ec2-swap/","result":{"data":{"cur":{"id":"fe5b1af0-f23f-5875-80ac-6a435bec0a39","html":"<h2 id=\"최근-aws의-ec2-인스턴스가\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EA%B7%BC-aws%EC%9D%98-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EA%B0%80\" aria-label=\"최근 aws의 ec2 인스턴스가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최근 AWS의 EC2 인스턴스가…</h2>\n<p>현재 베타 테스트로 진행 중인 AWS의 EC2 인스턴스가 자꾸 상태이상 1/2 상태로 되면서 접속이 불가능했었다.<br>\n간헐적으로 일어나는걸 보면 뭔가 문제가 좀 심각한 거 같았다.</p>\n<p>AWS를 잘 쓰는 타입은 아니라서…<br>\n클라우드 워치인가 모니터링 툴을 봤는데 CPU 사용률이 갑자기 치솟다가 멈춰 버리는 구간이 보였다.</p>\n<p>정확히 표현하면 내가 운영하는 서비스에 로그가 기록되는데, 일정 시간 마지막 로그를 보면 그 CPU 사용률이 튄 뒤부터 로그가 끊겼다.<br>\n그렇다고 내 서비스가 CPU 파워를 엄청 쓰는 것도 아니고…접속률은 베타라서 그렇게 많지 않다.</p>\n<p>커널 로그인가에서 메모리 관련 에러를 찾아봤지만 없었다. (근데 메모리가 범인…)</p>\n<p>도데체 뭐가 문제인가 하다가 이것저것 검색을 하던 도중 나랑 <a href=\"https://sundries-in-myidea.tistory.com/102\">비슷한 증상을 가진 글</a> 을 보게 되었다.<br>\n여기에 나온것과 같이 메모리 문제였다.</p>\n<p><strong>근데 나 같은 경우 위에서 나온 명령어는 동작하지 않았다.</strong></p>\n<p>내 환경은 <strong>Ubuntu 20.04 LTS</strong>였다. (물론 지금 베타테스트 환경은 또 다르다…)\n위 운영체제를 기준으로 작성하겠다.</p>\n<br>\n<h3 id=\"swap-생성\" style=\"position:relative;\"><a href=\"#swap-%EC%83%9D%EC%84%B1\" aria-label=\"swap 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Swap 생성</h3>\n<ol>\n<li>sudo fallocate -l 10G /swapfile</li>\n<li>sudo chmod 0600 /swapfile</li>\n<li>sudo mkswap /swapfile</li>\n<li>sudo swapon /swapfile</li>\n<li>free -m</li>\n</ol>\n<br>\n<p>위 명령어를 풀어서 설명하면…</p>\n<ol>\n<li>스왑 파일을 만드는 것 (난 대략 10Gb 정도 잡았다.)</li>\n<li>권한을 준다</li>\n<li>스왑 생성 (처리 결과는 아래 참조)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test@ip-999-99-999-99:/$ sudo mkswap /swapfile\nmkswap: /swapfile: warning: wiping old swap signature.\nSetting up swapspace version 1, size = 10 GiB (10737414144 bytes)\nno label, UUID=8a30d01e-c3b0-4ccc-bbbb-ada01aaaaac</code></pre></div>\n<ol start=\"4\">\n<li>스왑을 실행</li>\n<li>메모리 할당 확인 (아래 확인 -> 숫자는 임의로 적음 참고만..)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">              total        used        free      shared  buff/cache   available\nMem:            968         485          90           0         393         330\nSwap:         10239         260        9979</code></pre></div>\n<br>\n<p>만약 뭔가 꼬이거나 스왑을 풀어야 할 경우 다시 아래대로 해준다.</p>\n<h3 id=\"swap-해제\" style=\"position:relative;\"><a href=\"#swap-%ED%95%B4%EC%A0%9C\" aria-label=\"swap 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Swap 해제</h3>\n<ol>\n<li>sudo swapoff -v /swapfile</li>\n<li>sudo rm /swapfile</li>\n<li>free -m</li>\n</ol>\n<br>\n<p>보충 설명은 아래…</p>\n<ol>\n<li>스왑 해체</li>\n<li>스왑 파일 제거</li>\n<li>스왑이 풀렸는지 확인해본다</li>\n</ol>\n<br>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>EC2가 갑자기 내려가는 경우는 다양한데, 이번처럼 CPU 파워를 막 치고 가다 다운되는게 메모리 부족때문인지는 몰랐다.<br>\n사실 내가 잘못 로직을 짠게 있나 싶었는데…<br>\n무튼 이 뒤로 한 4일 갔는데 아직 증상이 나타나진 않고 안정적으로 잘 되고 있다.</p>\n<p>찾아보니 스왑은 아무래도 램이 아닌 하드 또는 SSD를 쓰는 거라서 퍼포먼스에서 이슈가 발생할 수 있다.<br>\n하지만 베타테스트 운영이나 개발 목적으로는 스왑을 써도 충분한거 같다.</p>\n<p>나중에는 결국 하드웨어 스팩을 돈으로 올려야 하겠지만 말이다. ㅎㅎ</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%B5%9C%EA%B7%BC-aws%EC%9D%98-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EA%B0%80\">최근 AWS의 EC2 인스턴스가…</a></p>\n<ul>\n<li><a href=\"#swap-%EC%83%9D%EC%84%B1\">Swap 생성</a></li>\n<li><a href=\"#swap-%ED%95%B4%EC%A0%9C\">Swap 해제</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></p>\n</li>\n</ul>\n</div>","excerpt":"최근 AWS의 EC2 인스턴스가… 현재 베타 테스트로 진행 중인 AWS의 EC2 인스턴스가 자꾸 상태이상 1/2 상태로 되면서 접속이 불가능했었다. 간헐적으로 일어나는걸 보면 뭔가 문제가 좀 심각한 거 같았다. AWS를 잘 쓰는 타입은 아니라서… 클라우드 워치인가 모니터링 툴을 봤는데 CPU 사용률이 갑자기 치솟다가 멈춰 버리는 구간이 보였다. 정확히 표현하면 내가 운영하는 서비스에 로그가 기록되는데, 일정 시간 마지막 로그를 보면 그 CPU 사용률이 튄 뒤부터 로그가 끊겼다. 그렇다고 내 서비스가 CPU 파워를 엄청 쓰는 것도 아니고…접속률은 베타라서 그렇게 많지 않다. 커널 로그인가에서 메모리 관련 에러를 찾아봤지만 없었다. (근데 메모리가 범인…) 도데체 뭐가 문제인가 하다가 이것저것 검색을 하던 도중 나랑 비슷한 증상을 가진 글 을 보게 되었다. 여기에 나온것과 같이 메모리 문제였다. 근데 나 같은 경우 위에서 나온 명령어는 동작하지 않았다. 내 환경은 Ubuntu 20.0…","frontmatter":{"date":"2021.11.18","title":"aws ubuntu에서 swap 메모리 설정하기 (with EC2가 갑자기 상태 이상으로 접속 및 접근 불가)","categories":"aws","emoji":"📜"},"fields":{"slug":"/aws/211118_aws-ec2-swap/"}},"next":{"id":"ad99c146-2786-5790-b2e0-d44176c8a1de","html":"<h2 id=\"nodejs에서-request를-사용하여\" style=\"position:relative;\"><a href=\"#nodejs%EC%97%90%EC%84%9C-request%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC\" aria-label=\"nodejs에서 request를 사용하여 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Node.js에서 request를 사용하여…</h2>\n<p>현재 베타테스트 중인 내 프로젝트의 일부 기능을 Node.js로 변환하는 중이었다.<br>\n아직 Node를 학습하면서 붙이는 거라서 좀 익숙하지 않았다.</p>\n<p>일단 진행하면서 겪은 문제의 포인트는 아래와 같다.</p>\n<blockquote>\n<ol>\n<li>특정 사이트의 크롤링을 진행한 다음 해당 내역중에 필요한 데이터를 html 파싱 처리.</li>\n<li>테스트 환경이 Node.js로 구축한 서버의 특정 url로 접근 시 1번 기능이 호출된다.</li>\n<li>문제는 2번에 나온 url 호출을 하면 1번의 작업이 끝나고 그 결과를 json으로 뱉어야 하는데 {} 반환.</li>\n</ol>\n</blockquote>\n<p>난 거의 Java로만 개발을 많이 했던 사람이라 (물론 python도 많이 썼지만 그건 좀 과거라 패스하고…) 순차적인 흐름에 익숙한 사람이다.<br>\n일단 코드로 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//route에서 크롤링 처리 결과를 가져와서 json으로 응답 처리해주는 함수</span>\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token function\">crawling4Test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">crawling4Test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">return</span> someValue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>내 개념으로는 <strong>crawling4Test()</strong> 함수의 처리 결과가 끝나고,<br>\n그 반환 값을 <strong>res.json()</strong> 에 전달하여 Json 응답이 처리되는 것으로 이해하고 있었다.<br>\n근데 아니었다.<br>\n먼저 <strong>crawling4Test()</strong> 함수의 로직도 함께 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">crawling4Test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> targetUrlReq <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span><span class=\"token string\">'https://target_url.com'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">timeout</span><span class=\"token operator\">:</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">let</span> resultJson <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">request</span><span class=\"token punctuation\">(</span>targetUrlReq<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span>res<span class=\"token punctuation\">,</span>body</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>err <span class=\"token operator\">&amp;&amp;</span> res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> enc <span class=\"token operator\">=</span> <span class=\"token function\">charset</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">const</span> i_result <span class=\"token operator\">=</span> iconv<span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">,</span> enc<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">const</span> resultHtml <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>i_result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^0-9]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">let</span> targetA <span class=\"token operator\">=</span> <span class=\"token function\">resultHtml</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div.target_a_tag).text().replace(regex, '</span>'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">let</span> targetB <span class=\"token operator\">=</span> <span class=\"token function\">resultHtml</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div.target_b_tag).text().replace(regex, '</span>'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token comment\">//체크용</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'targetA = '</span> <span class=\"token operator\">+</span> targetA<span class=\"token punctuation\">)</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'targetB = '</span> <span class=\"token operator\">+</span> targetB<span class=\"token punctuation\">)</span>\n\n                resultJson<span class=\"token punctuation\">[</span><span class=\"token string\">'targetA'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> targetA<span class=\"token punctuation\">;</span>\n                resultJson<span class=\"token punctuation\">[</span><span class=\"token string\">'targetB'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> targetB<span class=\"token punctuation\">;</span>\n\n                <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>resultJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">error</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>statusCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                resultJson<span class=\"token punctuation\">[</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Some error'</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>resultJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> resultJson<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위에서도 언급했지만 저것의 처리 결과는 <strong>{}</strong> 비어있는 딕셔너리 객체였다.<br>\n(뭐 Map, Key-value 다양한 이름이지만 본문에서는 딕셔너리라 표현)</p>\n<p>근데 또 신기한 것은 <strong>crawling4Test()</strong> 함수 안에서 console.log 를 통해 로그를 띄우면 값은 잘 들어있다.<br>\n내가 원한건 <strong>router.get()</strong> 함수에서 <strong>crawling4Test()</strong> 함수의 처리를 기다리고 응답이 완료되면 <strong>res.json()</strong> 로 결과를 내보내는 <strong>동기적</strong> 처리 방식을 기대했던 것.</p>\n<p>그럼 원인은?</p>\n<blockquote>\n<p>그냥 함수들이 비 동기로 실행되었다.</p>\n</blockquote>\n<p>이 표현이 맞는지 모르겠지만 무튼 문맥상으로는 저렇게 표현했다.<br>\n내가 원하는 결과물은 <strong>동기처럼 보이는 순차적 비동기</strong> 뭐 좀 편한 표현으로 <strong>하나의 흐름으로 동작하는 비동기</strong> 였다.</p>\n<p>그래서 찾아보니 node에서는 비동기를 하나의 흐름으로 처리하기 위해서는 promise 그리고 await, async 라는게 필요했다.</p>\n<br>\n<h2 id=\"그래서-promise-await-async-이것들은-대충-감이-오는데\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-promise-await-async-%EC%9D%B4%EA%B2%83%EB%93%A4%EC%9D%80-%EB%8C%80%EC%B6%A9-%EA%B0%90%EC%9D%B4-%EC%98%A4%EB%8A%94%EB%8D%B0\" aria-label=\"그래서 promise await async 이것들은 대충 감이 오는데 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그래서 promise, await, async 이것들은 대충 감이 오는데…</h2>\n<p>Node를 공부하는 사람이라면 주요 특징점이나 문제점(?) 같은걸 많이 들었을 것이다.<br>\n그 중 하나가 <strong>콜백지옥</strong> 이다.</p>\n<p>이거는 하도 설명이 많이 나와서 난 패스하겠다.<br>\n궁금하신 분은 검색하면 다른 블로그나 유튜브에 아주 자세히 설명되어 있으니 그곳을 참고해주시길…</p>\n<p>무튼 <strong>promise</strong>와 <strong>await</strong>, <strong>async</strong> 이거 3가지만 잘 조합하면 깔끔하게 처리할 수 있다.<br>\n(초창기 버전에서는 엄청 복잡했다는데..시간이 지나니 점점 편해지는건 덤…)</p>\n<p><strong>promise</strong>에 대해 설명글 쓰면 또 엄청 길어지니까…간단하게 말하자면..</p>\n<blockquote>\n<p>“A promise is an object that may produce a single value some time in the future”<br>\n하나의 요청 처리가 끝날때까지 기다리지 않고 다른 요청을 동시에 처리할수 있는 방식 ()</p>\n</blockquote>\n<p><strong>promise</strong> 소개 문구는 저렇다.\n즉 비동기를 하겠단 이야기인데 콜백의 지옥을 파훼하기 위한 해법이라 하는데 얘도 사실 보면 장황하지 않을 뿐 비슷하다.<br>\n그래서 <strong>await</strong>, <strong>async</strong> 이거 두 개랑 같이 쓰면 그 때는 어느정도 파훼법이 완성된다.</p>\n<p>이번 문제도 같다.<br>\n그럼 이걸 어떻게 해결했는지 한번 알아보도록 하자</p>\n<br>\n<h2 id=\"처리한-방법\" style=\"position:relative;\"><a href=\"#%EC%B2%98%EB%A6%AC%ED%95%9C-%EB%B0%A9%EB%B2%95\" aria-label=\"처리한 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>처리한 방법</h2>\n<p>먼저 변경된 <strong>crawling4Test()</strong> 함수를 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">crawling4Test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> targetUrlReq <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span><span class=\"token string\">'https://target_url.com'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">timeout</span><span class=\"token operator\">:</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> resultJson <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">request</span><span class=\"token punctuation\">(</span>targetUrlReq<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span>res<span class=\"token punctuation\">,</span>body</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>err <span class=\"token operator\">&amp;&amp;</span> res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> enc <span class=\"token operator\">=</span> <span class=\"token function\">charset</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">const</span> i_result <span class=\"token operator\">=</span> iconv<span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">,</span> enc<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">const</span> resultHtml <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>i_result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^0-9]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">let</span> targetA <span class=\"token operator\">=</span> <span class=\"token function\">resultHtml</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div.target_a_tag).text().replace(regex, '</span>'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">let</span> targetB <span class=\"token operator\">=</span> <span class=\"token function\">resultHtml</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div.target_b_tag).text().replace(regex, '</span>'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                resultJson<span class=\"token punctuation\">[</span><span class=\"token string\">'targetA'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> targetA<span class=\"token punctuation\">;</span>\n                resultJson<span class=\"token punctuation\">[</span><span class=\"token string\">'targetB'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> targetB<span class=\"token punctuation\">;</span>\n\n                <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>resultJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                resultJson<span class=\"token punctuation\">[</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Some error'</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>resultJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>일단 반환 값이 json 이 아닌 <strong>Promise</strong>로 바뀌었다.<br>\n그거 외에는 로직은 같지만 반환의 경우 resolve 와 reject 인데 이거는 어렵지 않다.</p>\n<p>해당 값을 다시 또 가공하여 처리하는 함수를 호출해야 하는 경우 then() 으로 체이닝 해서 처리하면 되고, 예외가 생길 경우에도 마찬가지 이다.<br>\n이 글에서는 <strong>Promise</strong>에 대해 설명하는 공간은 아니기에 간략하게 여기까지만 알아보자.<br>\n(사실 너무 많은 자료가 많아서…다른 분들꺼 참고하자<br>\n&#x3C;하단에 참고로 주렁주렁 달아 놓을 예정>)</p>\n<p>이제는 그럼 저 함수를 호출하는 곳으로 가보자</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">router<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">crawling4Test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>그냥 단어 몇 개가 사이에 박힌거 빼곤 없다.<br>\n<strong>await</strong> 키워드는 <strong>promise</strong>를 반환하는 함수 앞에 써주고, <strong>async</strong> 키워드는 <strong>await</strong> 선언이 된 곳에 써주면 된다.<br>\n이것도 여기서는 이렇게만 설명한다.<br>\n좀 더 자세한 글은…아시죠? ㅎㅎ</p>\n<p>그래서 결국 저렇게 처리한 상태로 실행해보면 드디어 원하는 결과가 잘 나오게 된다.</p>\n<br>\n<h2 id=\"결론-및-여담\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0-%EB%B0%8F-%EC%97%AC%EB%8B%B4\" aria-label=\"결론 및 여담 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론 및 여담</h2>\n<p>Node는 뭔가 자바에서 온 사람을 당황하게(나만 그럴수 있다) 만드는 게 많은듯…<br>\n저 <strong>promise</strong>, <strong>async</strong>, <strong>await</strong> 에 대해 자세하게 알고 있음 좋을 것 같다.</p>\n<p>엄청 딥하게 알면 더 좋겠지만…<br>\n사실 구현하는데 바쁘니… 어떤 식으로 동작하는지…그리고 어떻게 사용하면 ㅈ 되는지, 어떻게 사용해야 하는지만 알면 될 것 같다.</p>\n<p>원리까지 설명하세요 이러는 건 면접에서나 하는거겠지?<br>\n근데 사실 이런거 면접에서 딥하게 묻는 것도 문제가 있는듯..</p>\n<p>위에 언급한 대로 어떻게 사용하는지 정확한 이해도 체크만 하면 되는데 이거 동작 방법을 화이트보드에 설명해보세요 한다?<br>\n그건 면접자에게 질문을 잘못 던진 케이스 같다.</p>\n<p>그런 질문 보다는 이걸 어떻게 썼을 때 잘못된 경우 있었냐? 이걸 어케 대처해야 하냐?<br>\n이게 옳바른 질문 아닐까? ㅎㅎ</p>\n<p>내가 예전에 3년전인가… 면접다닐때…특히 스프링 자바는 진짜 되도 않는 면접 질문 많이 받았다.<br>\n네이버랑 카카오 전화면접에서는 GC에 대해 다 설명해보고 java8의 GC가 뭐가 틀린지 설명해보랜다…<br>\n아니 트러블슈팅 성향이나 프로젝트에서 겪은 장애 처리나 어떻게 구현했냐 질문보단 저런걸로…</p>\n<p>아마 떨어트리려고 한거 같다는 생각이 많이 든 면접…(아님 내 정신승리일 수도…)</p>\n<p>그냥..다시 이런거 찾아보고 공부하다가 옛날 생각나서 주절거려봤다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://mwoo526.tistory.com/35\">Promise에 대하여</a></li>\n<li><a href=\"https://joshua1988.github.io/web-development/javascript/promise-for-beginners/\">자바스크립트 Promise 쉽게 이해하기</a></li>\n<li><a href=\"https://joshua1988.github.io/web-development/javascript/js-async-await/#async--await-%EB%A7%9B%EB%B3%B4%EA%B8%B0\">await, async에 대하여</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#nodejs%EC%97%90%EC%84%9C-request%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC\">Node.js에서 request를 사용하여…</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-promise-await-async-%EC%9D%B4%EA%B2%83%EB%93%A4%EC%9D%80-%EB%8C%80%EC%B6%A9-%EA%B0%90%EC%9D%B4-%EC%98%A4%EB%8A%94%EB%8D%B0\">그래서 promise, await, async 이것들은 대충 감이 오는데…</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B2%98%EB%A6%AC%ED%95%9C-%EB%B0%A9%EB%B2%95\">처리한 방법</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EB%A1%A0-%EB%B0%8F-%EC%97%AC%EB%8B%B4\">결론 및 여담</a></p>\n<ul>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"2021.11.11","title":"Node.js에서 request를 통해 가져온 값을 화면에 뿌릴 때 문제가 생기는 경우 (async, await... 동기/비동기에 대한 간단한 이해)","categories":"node-js","emoji":"📜"},"fields":{"slug":"/node-js/211111_node-async/"}},"prev":{"id":"53bc33ac-bffb-58aa-a8ba-29a90428c633","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABMElEQVQoz42S0Y6CMBBFW6Cl0GmhxYorrJpAsolP+v8fdzetrqtmxX24GToZztxOhzHGcC+vCEOzwqA9drTCJ3XYmRX2NuDQrJN647A2LYzSeP6fPSciQBTir8KknGegvESTqwRXolwGRmdK/haFEDBNE7bDAOf9Q+26btCWehkYryfy4nbWWmMcxwQmopTjjF+aVRauomVgnFWeZQ85znnSc21XEnxtl4FxLnFOPyApZXJpjEFd18jumnmp0Wn7D4dXYLziPM84Ho84n844n06pwc2hJHS6eePQBpTi8srRTV4UYJwl5fLx9Z3UCNQuA3tlMbuPtIss42grwtZ22BiHnlz6vpw9Dm2PWqpl4A1cWXyFEVRWqLmAzmQSpShSLHnxfrH5NZJQmNzm5YK/0jegveteJRG0qAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/7c297/thumbnail_til.webp 180w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/33ecc/thumbnail_til.webp 360w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/df77d/thumbnail_til.webp 720w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/dd3ab/thumbnail_til.webp 895w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/39caabbd44b8d6bf6560fecef746ecb3/e9ea2/thumbnail_til.png 180w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/53918/thumbnail_til.png 360w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/242a6/thumbnail_til.png 720w,\n/static/39caabbd44b8d6bf6560fecef746ecb3/b002d/thumbnail_til.png 895w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/39caabbd44b8d6bf6560fecef746ecb3/242a6/thumbnail_til.png\"\n            alt=\"thumbnail\"\n            title=\"thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"개발을-하다보면-쌓이는-링크들\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B0%9C%EC%9D%84-%ED%95%98%EB%8B%A4%EB%B3%B4%EB%A9%B4-%EC%8C%93%EC%9D%B4%EB%8A%94-%EB%A7%81%ED%81%AC%EB%93%A4\" aria-label=\"개발을 하다보면 쌓이는 링크들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개발을 하다보면 쌓이는 링크들…</h2>\n<p>개발을 하다보면 개발자의 성지 stackoverflow나 다른 사람의 기술 블로그를 많이 보게 된다.<br>\n그리고 유용한 것은 즐겨찾기에 저장하거나 페이지 탭에 그대로 두게 된다.</p>\n<p>문제는…<br>\n브라우저에서 제공하는 즐겨찾기는 몹시 불편하다.<br>\n제한적인 카테고리에 일정 수가 넘어가면 찾는데 어려움의 문제가 기다린다.</p>\n<p>두 번째로 페이지에 그냥 두면…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.444444444444445%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjUlEQVQI1xXHSQ6CMABAUe5/G40idVi4VxC0JDigxcjChKktbaKLb3y7F8jJifM05xLm3FcFRSS5LSXVWqJEhhIp5XyPEgfKcIeKYkoRU20lz82Rh8goFgm3Rcp1lhAY12NHQ6cH3OdL3Xpa7bHeo51nMBY9aFpjUK+apu+ph57OjVjnaLTmPVr0+L/lB2m8kKjCH+8eAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/901355c67863511d19ef88a491fc8022/7c297/img_01.webp 180w,\n/static/901355c67863511d19ef88a491fc8022/33ecc/img_01.webp 360w,\n/static/901355c67863511d19ef88a491fc8022/df77d/img_01.webp 720w,\n/static/901355c67863511d19ef88a491fc8022/5c666/img_01.webp 1080w,\n/static/901355c67863511d19ef88a491fc8022/95f20/img_01.webp 1440w,\n/static/901355c67863511d19ef88a491fc8022/da202/img_01.webp 2874w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/901355c67863511d19ef88a491fc8022/e9ea2/img_01.png 180w,\n/static/901355c67863511d19ef88a491fc8022/53918/img_01.png 360w,\n/static/901355c67863511d19ef88a491fc8022/242a6/img_01.png 720w,\n/static/901355c67863511d19ef88a491fc8022/b4ad3/img_01.png 1080w,\n/static/901355c67863511d19ef88a491fc8022/89066/img_01.png 1440w,\n/static/901355c67863511d19ef88a491fc8022/9caaa/img_01.png 2874w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/901355c67863511d19ef88a491fc8022/242a6/img_01.png\"\n            alt=\"img 01\"\n            title=\"img 01\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br>\n<p>이런 대 참사가 발생한다.</p>\n<p>그래서 이번에 노드 공부하다가 빠져버린 일렉트론으로 직접 개발해보기로 했다.<br>\n일단 1차 개발용 버전은 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsUlEQVQoz22RyW4cMQwF+/8/K8slh2yGYztBDCQztmd6U2uh1pYqaNnHECAIUETpPXLYRoubAm7yyCwE7Ynak0zALpqnxxO/bh84//6LnXXvH+9xk55BHemRxWM3YeA/0Wi95pIZp4lVqV5TTr1vs0dKQoVjJkLbqF6o3jNobXBOEBE2bTBWEB9w4okxYp1jMwafIyEVQkism2JZV6wLaK2xRuGNxWvDcPw8zwtKKZQJnOfEy5q4qkTeK+PpifefPvL18Z5dVmoRvHimeUapjeANQb0QjSOXwrBtGucc1lpsKEwWJtuQ+GZ7s/x4uGO++0Y6fcCEEV/AOYtznlojzV6p4vv8cDqdmaaZZVmQUNh8Q/uGpAatoRp8fxpJ6gvTeOZmiUyHdXGIeOqeadFQU+6bH9ZVdemlZGKB0VRG07Ch9oGaJp7Xn5jtFqrqKvac0cZgrWPfI1UWdh9fgcdR5E2uT42Lblx1w4RXy5eYebZykNnrTm2Qc8F0oFB3TzXP7FZegdfryLKspBhxEf7MjdPSGHXtwOly4d3nGy6ZvoIjjuuP48g0L5TiqfbK7nwH/gOrIrUSm8DQEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6711758f70b52a3caf131fa9039bed03/7c297/img_02.webp 180w,\n/static/6711758f70b52a3caf131fa9039bed03/33ecc/img_02.webp 360w,\n/static/6711758f70b52a3caf131fa9039bed03/df77d/img_02.webp 720w,\n/static/6711758f70b52a3caf131fa9039bed03/5c666/img_02.webp 1080w,\n/static/6711758f70b52a3caf131fa9039bed03/95f20/img_02.webp 1440w,\n/static/6711758f70b52a3caf131fa9039bed03/2a4bd/img_02.webp 2790w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6711758f70b52a3caf131fa9039bed03/e9ea2/img_02.png 180w,\n/static/6711758f70b52a3caf131fa9039bed03/53918/img_02.png 360w,\n/static/6711758f70b52a3caf131fa9039bed03/242a6/img_02.png 720w,\n/static/6711758f70b52a3caf131fa9039bed03/b4ad3/img_02.png 1080w,\n/static/6711758f70b52a3caf131fa9039bed03/89066/img_02.png 1440w,\n/static/6711758f70b52a3caf131fa9039bed03/f76ef/img_02.png 2790w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6711758f70b52a3caf131fa9039bed03/242a6/img_02.png\"\n            alt=\"img 02\"\n            title=\"img 02\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br>\n<p>이거 개발하면서 JS의 await / async 에 대해서 좀 어느정도 배우게 되었다.<br>\n나름 학습 효과가 있었던 미니 프로젝트였다.</p>\n<p>개발시간은… <a href=\"https://wakatime.com/badge/user/eab16459-c51d-412a-8a22-8b9056f6df54/project/e60715d4-f069-4ff9-a53c-33d15c0d0b61\"><img src=\"https://wakatime.com/badge/user/eab16459-c51d-412a-8a22-8b9056f6df54/project/e60715d4-f069-4ff9-a53c-33d15c0d0b61.svg\" alt=\"wakatime\"></a> 이 정도?</p>\n<p>근데 저거 벳지 클릭하면 404 나온다…<br>\n처음 써봤는데 신기하다 ㅎㅎ<br>\n오늘 기준으로 일주일 동안은 11시간을 쏟았군…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9ElEQVQoz22S227TQBCG/Wpc8xQ8B0JCXHDDUyCu6D0qkagQ4iBE1QORKJRCEqI0sZ04dhx7bc8ePrTrhFLBSGOPV+N//293olY0q7Ilr3x2oW7FAA7nbtI6h7G3U4tw8m3E4CIh2TRYo4matmU6mzOZzpjNY5JlRpZvWW8UxaZivc7I84JqU9BVJV25RquSP2EFZ3sDPiJjLc5arLXgrO8ItdYGY/r069ON4dNcOImFYao5SzSnieY8NQyXhuNYs1SWyBhL0zRhl7jUjDIJItb2YtoLYhkVhncz4XOqefal5e1MOF5oPlwLH+cSvuPKEmmtg+D1RnO+EM7mwq9cB5c32eP457S0DCbCUjn+F5Fzlrys+R5X/EwqRmnNVaKIC8W2bigqRdMKOMNi0/FqpHg/VRyNFT+yFmc0TSe0XU8WBQce0Ujvwtda8M73uT9LkV7YH4G/Ya0lrPke//Za4VL2PGq1oG4qVlkezvDvcDvCrBaGi5pObWnb9l9kY3QomuwNXw/ukowf09Y5qunCD35Xt1Nb18LDl2MeDSY8P02Ci056gv28Rtb2gtv0KevLOyyv7pFmC+q66RE94E7wMqm5/2LM66ucB4fjsCZ+vPaU3qHn9/3SFZTpAaoc7hDtrZv24+UdHV4seXI0YbXtcXuCm77f2O9Mexca6okAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/827096ef9a542daaae3d1da9afe654b1/7c297/img_03.webp 180w,\n/static/827096ef9a542daaae3d1da9afe654b1/33ecc/img_03.webp 360w,\n/static/827096ef9a542daaae3d1da9afe654b1/df77d/img_03.webp 720w,\n/static/827096ef9a542daaae3d1da9afe654b1/5c666/img_03.webp 1080w,\n/static/827096ef9a542daaae3d1da9afe654b1/95f20/img_03.webp 1440w,\n/static/827096ef9a542daaae3d1da9afe654b1/ead8b/img_03.webp 2388w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/827096ef9a542daaae3d1da9afe654b1/e9ea2/img_03.png 180w,\n/static/827096ef9a542daaae3d1da9afe654b1/53918/img_03.png 360w,\n/static/827096ef9a542daaae3d1da9afe654b1/242a6/img_03.png 720w,\n/static/827096ef9a542daaae3d1da9afe654b1/b4ad3/img_03.png 1080w,\n/static/827096ef9a542daaae3d1da9afe654b1/89066/img_03.png 1440w,\n/static/827096ef9a542daaae3d1da9afe654b1/c37ef/img_03.png 2388w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/827096ef9a542daaae3d1da9afe654b1/242a6/img_03.png\"\n            alt=\"img 03\"\n            title=\"img 03\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br>\n<p>솔직히 이야기 하면…<br>\n낮에 윈도 피시에서 주식창 띄우고 거래 보다가 개발하고…<br>\n밤에는 유튜브랑 넷플릭스 보면서 하고…<br>\n좀 더 집중했으면 더 빨리 만들 수 있었지 않을까…(유튭 스타 홍구랑 넷플 지옥, 아케인, 등등…너무 재미있어서 포기 못하겠다…)</p>\n<p>무튼 1차는 개인용으로 쓸만하다.\n이걸 좀 UI로 이쁘게 꾸며보고 조금 더 사용성을 높여서 배포해봐야겠다.</p>\n<p>이름은 뭐로 할까 하다가…할거 없어서 <strong>SML (Save My Link)</strong> 로 지었다.<br>\nGithub에 공개 레포는 팠는데…<br>\n아직 코드는 업뎃 안했다…<br>\nㄹㅇ 발로짠 코드 + JS 뉴비 스타일 이라서 손 볼게 좀 많다…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAABi0lEQVQ4y5WVi66CQAxE/f8fNAgK+EJBfGsUhZrTmxJCzLVssllBOUxnuuuoaRr5b3YH18/ns73/7fejX0BmXdctbDwey/V6be8NAjLu97us12vZbDZSlqWcz2eZz+dSFMVX6E/g4/GQ7XYrSZJInudyPB4ljMIW2LXDVTKjqqpW1el0kul0qtcozrJM9vt9C3UB8W6xWMhut1OFwFCLDf2QXEBWygZwOBy0/DRN1U/m5XJRrwcBKY+SUbhcLvUFlI9qJlA38PV6ackoJKTZbKYlo5aJh6yE5A6FMlHIg6vVSqIo0nBYJ5OJthbDrRDPDEiyqCScIAgUihWDgJYsIVA+ivDSWgkr3MD3+61APEQJpQIjqH5zu/YyAyUWBB7iG0opl5fdbjefQgOihlaxtsFHQHEcq2K+H9zYBgSSJLEGZUA8dbeNASkbJTxsKYdhqECa2x0KK/4BxUOA9CUeAgZKYL5Q5G/lATtZgNl+5r5tSXcoTDY/SXK60Hd85uSmRwe3Tf+/pT+6J/cHjYNeVTYubIgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9ed3676918ac1e974bfac15a108c7461/7c297/img_04.webp 180w,\n/static/9ed3676918ac1e974bfac15a108c7461/33ecc/img_04.webp 360w,\n/static/9ed3676918ac1e974bfac15a108c7461/df77d/img_04.webp 720w,\n/static/9ed3676918ac1e974bfac15a108c7461/5c666/img_04.webp 1080w,\n/static/9ed3676918ac1e974bfac15a108c7461/b2cd5/img_04.webp 1140w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9ed3676918ac1e974bfac15a108c7461/e9ea2/img_04.png 180w,\n/static/9ed3676918ac1e974bfac15a108c7461/53918/img_04.png 360w,\n/static/9ed3676918ac1e974bfac15a108c7461/242a6/img_04.png 720w,\n/static/9ed3676918ac1e974bfac15a108c7461/b4ad3/img_04.png 1080w,\n/static/9ed3676918ac1e974bfac15a108c7461/dc896/img_04.png 1140w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9ed3676918ac1e974bfac15a108c7461/242a6/img_04.png\"\n            alt=\"img 04\"\n            title=\"img 04\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>보이는가…main.js에서만 작업한 흔적이…</p>\n<p>일단 이거는 그냥 취미로 만든거라서 편의 기능 위주만 추가할 예정이고, 일렉트론에 대한 부분은 업데이트 안할 예정이다.<br>\n그리고 일렉트론으로 좀 해본 결과 이것도 공부하려면 시간이 걸리고 귀찮아서 더 이상 일렉트론에 학습 시간을 투자하는 행위는 안하려 한다…</p>\n<p>그래서 <strong>일단 잘 돌아가면 끝</strong> 이라는 마인드로 개발했다.<br>\n사실 최종 목표는 Node.js로 작은 웹 서비스랑 연동 처리하는게 목표라서 일렉트론은 이제 <strong>Bye…</strong></p>\n<p><strong>SML</strong>에 기술적인 내용이랑 관련 문서는 조만간 정리해서 올릴 예정이다.<br>\n2주전인가 25일날 모빌리티쇼 다녀온거 영상이랑 사진 정리할게 많아서…</p>\n<p>혹시 21년 모빌리티쇼에 못가셔서 아쉬운 분은 <a href=\"https://www.youtube.com/watch?v=iY170ga0SJc\">개인 유튜브</a>에 올렸으니 관심있으신 분은 ㄱㄱ</p>\n<p>곧 <strong>SML</strong> 공식 문서 및 배포 소식으로 돌아올 예정…</p>","frontmatter":{"date":"2021.12.07","title":"21년 12월 7일 연구일지 (with SML (Save My Link) 그냥 즐겨찾기 프로그램 만든 후기)","categories":"til","emoji":"📜"},"fields":{"slug":"/til/211207-devnote/"}},"site":{"siteMetadata":{"siteUrl":"https://elfinlas.github.io","comments":{"utterances":{"repo":"elfinlas/blog_utterances"}},"projects":[{"title":"마와셀(웹) - 와인 가격 비교","description":"와인 가격 비교 서비스","techStack":["Typescript","React","Next.Js","Nest.Js"],"thumbnailUrl":"myc_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223393940649","github":"","web":"https://appmyc.info","googlePlay":"","appStore":""}},{"title":"마와셀(엡) - 와인과 셀러 관리, 시음노트","description":"보유한 와인의 관리, 시음노트 작성, 보유 와인 셀러의 관리 어플리케이션","techStack":["Dart","Flutter","hive","provider"],"thumbnailUrl":"myc_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223531933037","github":"","web":"","googlePlay":"https://play.google.com/store/apps/details?id=dev.mhlab.myc","appStore":"https://itunes.apple.com/kr/app/apple-store/6474965246"}},{"title":"흑우집합소(웹) - 로또번호 추천 서비스","description":"로또번호 추천 서비스","techStack":["Typescript","React","Next.Js","Nest.Js"],"thumbnailUrl":"bcow_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223059966682","github":"","web":"https://bcow.world/","googlePlay":"","appStore":""}},{"title":"흑우집합소(앱) - 로또번호 추천 서비스","description":"로또번호 추천 서비스","techStack":["Dart","Flutter","drift","provider"],"thumbnailUrl":"bcow_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223232966579","github":"","web":"","googlePlay":"https://play.google.com/store/apps/details?id=dev.mhlab.bcow_world","appStore":"https://itunes.apple.com/kr/app/apple-store/6470312130"}}]}}},"pageContext":{"slug":"/aws/211118_aws-ec2-swap/","nextSlug":"/node-js/211111_node-async/","prevSlug":"/til/211207-devnote/"}},"staticQueryHashes":["1186322783","1321405810","3649515864"]}