{"componentChunkName":"component---src-templates-tag-jsx","path":"/tags/infra/","result":{"data":{"allMarkdownRemark":{"totalCount":11,"nodes":[{"excerpt":"무료 계정으로 연명하다가... 예전에 만들고 언젠간(?) 유지보수를 하려 했던 MyMeLink의 Aws 무료 플랜이 끝났다. 정확히 이야기하면 6월에 끝난다. 근데 서비스가 잘 큰것도 아니고, 거의 나만 쓰며, 유지보수를 현재 못하고 있는 상황에... 여기에 돈내고 서비스 연명하기엔 투자비가 아까웠다. (그래봤자 얼마 안되겠지만...) 뭐 사용자가 있다면 계속 서비스를 살리겠지만... 최근 흑우집합소랑 모바일에 유지보수 리팩토링까지 하니 시간이 없다 -_-;; 무튼 그래서 Aws에서 도메인을 바꾸던가 다시 사서 해보려 했는데, 이미 6월달 중순쯔음 도메인 연장 결제가 되었다 -_-;;; 그래서 몇 가지 찾아보니 Aws에서 도메인 이동이 된다하여 진행해보기로 했다. 먼저 내가 진행하는 조건은 다음과 같다. Aws Route53에서 구입한 도메인이다. 전달받을 Aws 신규 계정이 있다. 도메인 구입을 한 AWS 계정에 접근이 가능하다. 2번이랑 3번은 당연한 이야기고... 1번의 경우…","fields":{"slug":"/aws/230629_change-aws-domain/"},"frontmatter":{"title":"AWS Route53에서 구입한 도메인 다른 계정으로 이동하기","description":"Aws 계정 간에 도메인 양도양수하기","date":"2023-06-29T21:07:30.000Z","tags":["Aws","Route53","Infra"],"series":"Aws","previewImage":"aws_logo.webp","isPrivate":null}},{"excerpt":"AWS S3 사용할까 고민하다가... 전에 만들던 서비스에서는 보통 AWS의 S3 저장소를 사용했었다. 근데 myme.link를 만들면서 노마드코더의 클라우드플레어 소개 영상을 보면서 R2에 대해 알게 되었다. R2는 일단 S3에 비해 합리적인 가격을 제공한다. 아래에서 간단히 비교를 하게 되면... 아마존 S3 1G 용량 한달 저장 비용 : 0.02$ 저장된 데이터를 송신하는 비용(유저가 다운받는 것) 1G 기준 : 0.09$ CloudFlare R2 1G 용량 한달 저장 비용 : 0.015$ 저장된 데이터를 송신하는 비용(유저가 다운받는 것) 1G 기준 : 거의 무료(초당 10회 이상은 비용 발생) 나 같은 경우 서비스를 오픈할 때 잘 되기 전까진 무료 플랜과 저렴한 비용으로 최대한의 효율을 뽑자 마인드이다. 그래서 이번엔 S3보다는 R2를 적용해봤다. 근데 R2 자료가 거의 없었다. 대부분 S3 -> R2 마이그레이션만 있지, 이것을 S3처럼 사용하는 예제는 없었다. 그래서 …","fields":{"slug":"/cloud-flare/230127_use_r2/"},"frontmatter":{"title":"CloudFlare R2 사용해보기 Part 1 (With Nest.Js)","description":"R2를 한번 사용해보기","date":"2023-01-27T19:01:11.000Z","tags":["CloudFlare","R2","Infra"],"series":"Cloud Flare","previewImage":"cloudflare_logo.png","isPrivate":null}},{"excerpt":"AWS에서 도메인사서 적용하기 현재 개발하고 있는 흑우집합소의 기능을 다 개발하지 않았지만... 일부 기능만 오픈해서 약간 홍보 겸 외부 테스트 겸... 무튼 이제 도메인을 사서 적용하는 부분을 기록해두려 한다. 도메인 쇼핑부터 제일 먼저 할 일은 도메인명을 정하는 것이다. (-_-;;) 생각보다 어렵다. 변수 짓기보다 약간 난이도 있는? 그래도 재미있다. 약간 게임 케릭터 이름 짓는 느낌일까나... 무튼 이 도메인이 현재 사용하는 것인지 아닌지를 알기 위해서는 후이즈나 도메인 등록 서비스에서 알아보면 된다.  내 서비스 이름은 흑우집합소이기 때문에 뭔가 관련된 걸로 해보려 했는데... 사실 유명하거나 괜찮은데? 라고 하는건 다 있다. 그래서 찾다가... 아마존도 도메인 등록 서비스를 사용할 수 있다.  내가 선택한 도메인은... bcow.world로 했다.  이렇게 추천도 해주지만... 사실 다른거 할까 하다가... 흑우 = black cow => bcow 집합소 = statio…","fields":{"slug":"/aws/230119_buy_domain/"},"frontmatter":{"title":"Aws에서 도메인 구입 후 연결하기 (With 흑우집합소)","description":"직접 도메인 연결하기","date":"2023-01-19T01:02:37.000Z","tags":["Aws","Infra","흑우집합소"],"series":"Aws","previewImage":"aws_logo.webp","isPrivate":null}},{"excerpt":"이제 새롭게 시작할 서비스를 구성하며... 난 주로 EC2의 무료 플랜을 1년 굴려보고 희망이 보이면 그땐 제대로 하고, 그 외는 개발용으로 두고 종료한다. 이번에도 서비스를 올리려고 또 아마존에서 EC2 작업을 하다가 기록을 남긴다.\n먼저 AWS에 가입이 되어 있고, 계정이 다 있다는 가정하에 진행한다. 먼저 EC2 선택부터  난 Ubuntu가 편하여 LTS 버전으로 선택해줬다. 본인이 원하는 OS가 있다면 그것으로 해도 무방하다.  그 다음은 인스턴스는 일단 프리티어에 맞는걸로 해준다. 서비스가 잘 되서 확장하는게 아닌 이상 일단 맛보기용으로 운영하기에도 스팩이 나쁘지 않다. 키페어는 이 인스턴스에 접근할 때 쓸 공개/비밀 키를 생성하는 부분인데, 난 키 하나로 돌려 쓰는게 아니라 하나의 인스턴스 당 하나의 키를 소유하게끔 한다. (너무 당연한 이야기...-_-;;)  보안그룹은 가급적 제한된 IP만 제공하는게 좋다. 나는 일단 ssh만 열어뒀다.  스토리지는 10기가로 되어 …","fields":{"slug":"/aws/230119_ec2_start/"},"frontmatter":{"title":"AWS EC2 프리티어 시작하기","description":"Aws EC2 프리티어","date":"2023-01-19T00:01:26.000Z","tags":["Aws","Ubuntu","EC2","Infra"],"series":"Aws","previewImage":"aws_logo.webp","isPrivate":null}},{"excerpt":"23.01.18 아마존에서 작업이 미흡해서 일부 내용을 추가합니다.  이번에 서비스를 개발하고 오픈하면서... 예전에 LetsEncrypt를 적용해봤던 적은 있었다. 하지만 방법이 너무 오래되었고, 와일드카드 방식으로 도메인을 사용해서 인증 방법을 다시 찾아보았다. 그 전에 앞서 먼저 내가 사용했었던 두 가지 방식을 간단하게 정리하고 넘어가겠다. Standalone 과 Webroot 방식 먼저 Standalone 방식의 경우 비 효율적인 방식이다. 적용 대상의 80포트에 서버를 띄워서 인증하고 인증서를 발급받는 방식인데, 실제 서비스 시 인증을 하게 될 경우 매우 곤란한 상황이 연출될 것이다. 그리고 와일드카드 서브 도메인의 인증이 불가능하다. Webroot 방식의 경우 위 방법보다는 덜 무식하다. 서버의 특정 디렉토리에 접근 가능 여부를 테스트 해서 인증서를 발급해주는 방식이다. 하지만 서브도메인이 존재하는 경우 각각 인증서를 발급받아야 한다. 예를 들어서 설명하면 www.tes…","fields":{"slug":"/letsencrypt/220923_use-letsencrypt/"},"frontmatter":{"title":"Lets Encrypt 적용하기 (AWS EC2 기준)","description":null,"date":"2022-09-23T15:10:22.000Z","tags":["LetsEncrypt","Aws","Infra"],"series":"LetsEncrypt","previewImage":"letsencrypt_logo.webp","isPrivate":null}},{"excerpt":"AWS 프리티어 기간을 확인해보려면... 최근 개발용으로 쓰던 계정들의 프리티어가 언제까지인지 궁금해졌다. 이걸 확인해보는 방법은 간단했다. 1. AWS Console 에 접속한다.  위 사진과 같이 로그인 이후 우측 상단의 계정을 클릭하여 결제 대시보드 로 이동한다. 2. 청구서 항목을 클릭한다.  청구서의 청구 기간을 하단으로 내리면 최초 청구일이 나오는데 그거에서 1년이 지난 기간이 프리티어 기간이다. 나처럼 개발용으로 사용하는 사람들은 이 기간을 잘 확인해두었다가 마지막 달에 사용하는 서비스를 모두 정리하고 계정을 탈퇴하면 된다.","fields":{"slug":"/aws/220202_aws-free-final/"},"frontmatter":{"title":"아마존 프리티어 기간 확인하기","description":"프리티어 기간 잘 확인하여 불미스러운 일을 방지하기","date":"2022-02-02T00:39:24.000Z","tags":["Aws","Infra"],"series":"Aws","previewImage":"aws_logo.webp","isPrivate":null}},{"excerpt":"최근 AWS의 EC2 인스턴스가... 현재 베타 테스트로 진행 중인 AWS의 EC2 인스턴스가 자꾸 상태이상 1/2 상태로 되면서 접속이 불가능했었다. 간헐적으로 일어나는걸 보면 뭔가 문제가 좀 심각한 거 같았다. AWS를 잘 쓰는 타입은 아니라서... 클라우드 워치인가 모니터링 툴을 봤는데 CPU 사용률이 갑자기 치솟다가 멈춰 버리는 구간이 보였다. 정확히 표현하면 내가 운영하는 서비스에 로그가 기록되는데, 일정 시간 마지막 로그를 보면 그 CPU 사용률이 튄 뒤부터 로그가 끊겼다. 그렇다고 내 서비스가 CPU 파워를 엄청 쓰는 것도 아니고...접속률은 베타라서 그렇게 많지 않다. 커널 로그인가에서 메모리 관련 에러를 찾아봤지만 없었다. (근데 메모리가 범인...) 도데체 뭐가 문제인가 하다가 이것저것 검색을 하던 도중 나랑 비슷한 증상을 가진 글 을 보게 되었다. 여기에 나온것과 같이 메모리 문제였다. 근데 나 같은 경우 위에서 나온 명령어는 동작하지 않았다. 내 환경은 Ubu…","fields":{"slug":"/aws/211118_aws-ec2-swap/"},"frontmatter":{"title":"aws ubuntu에서 swap 메모리 설정하기 (with EC2가 갑자기 상태 이상으로 접속 및 접근 불가)","description":"Ec2에서 메모리가 부족할 때...","date":"2021-11-18T00:54:09.000Z","tags":["Aws","Ubuntu","Infra"],"series":"Aws","previewImage":"aws_logo.webp","isPrivate":null}},{"excerpt":"22.09.25 내용 추가 여기서 진행한 방식의 경우 standalone 방식이다. 이 방식은 80포트를 강제로 내려서 인증 대상이 진짜 사용하는 서비스인지를 체크하기에 매우 비효율적인 방식이다. 최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다. Webroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다. DNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자. LetsEncrypt 적용법 (DNS 인증 & AWS) Let'sEncrypt 갱신이 불가능?? Let'sEncrypt를 적용하고 나서 갱신 테스트를 해보는데 이상한 에러를 마주했다. 아 뭐가 이렇게 안되지? 라고 삽질했었으나... 이것저것 찾아본 결과 아래의 문제가 원인이었다 원인은 갱신을 auto 모드가 아닌 manual 모드로 진행한 문제 원인을 제공했던 명령어는 다음과 같다 메뉴얼 모드로 만…","fields":{"slug":"/letsencrypt/211105_letscert-fail/"},"frontmatter":{"title":"Let'sEncrypt 갱신이 불가할 때 (produced an unexpected error The manual plugin is not working)","description":null,"date":"2021-11-05T18:05:11.000Z","tags":["LetsEncrypt","Troubleshooting","Infra"],"series":"LetsEncrypt","previewImage":"letsencrypt_logo.webp","isPrivate":null}},{"excerpt":"22.09.25 내용 추가 여기서 진행한 방식의 경우 standalone 방식이다. 이 방식은 80포트를 강제로 내려서 인증 대상이 진짜 사용하는 서비스인지를 체크하기에 매우 비효율적인 방식이다. 최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다. Webroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다. DNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자. LetsEncrypt 적용법 (DNS 인증 & AWS) Let'sEncrypt 유효기간? 혹시 아직 Let'sEncrypt를 설치하지 않으신 분이라면 Let'sEncrypt 설치후 AWS에 적용하기 에 설치법을 참고하시길 바란다 Let'sEncrypt는 무료인 대신에 인증서를 주기적으로 인증해줘야 한다 그래서 보통 이것을 크론탭으로 처리해서 편하게 간다. 경각심(?)을 위해 직접 갱신하는 분(?)도…","fields":{"slug":"/letsencrypt/211105_renew-certbot/"},"frontmatter":{"title":"Let'sEncrypt 자동 갱신 처리하기","description":null,"date":"2021-11-05T17:40:28.000Z","tags":["LetsEncrypt","Infra"],"series":"LetsEncrypt","previewImage":"letsencrypt_logo.webp","isPrivate":null}},{"excerpt":"22.09.25 내용 추가 여기서 진행한 방식의 경우 standalone 방식이다. 이 방식은 80포트를 강제로 내려서 인증 대상이 진짜 사용하는 서비스인지를 체크하기에 매우 비효율적인 방식이다. 최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다. Webroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다. DNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자. LetsEncrypt 적용법 (DNS 인증 & AWS) Let'sEncrypt? 이번에 서비스를 준비하면서 EC2에서 하나씩 올려서 해보기로 했다. 사실 AWS 기반이라 로드벨런서에 인증서 물리면 되는데... 전에 해보던게 생각 나기도 했고.. 일단 서비스 규모가 더 커지면 그 때 안정적으로 가고 지금은 빌드업 수준으로 해보기로 했다. 일단 뭐 Let'sEncrypt에 대한 자세한 것은 이미 알고 …","fields":{"slug":"/letsencrypt/211105_letsencrypt-install/"},"frontmatter":{"title":"Let'sEncrypt 설치후 AWS에 적용하기","description":null,"date":"2021-11-04T02:17:42.000Z","tags":["LetsEncrypt","Aws","Infra"],"series":"LetsEncrypt","previewImage":"letsencrypt_logo.webp","isPrivate":null}},{"excerpt":"22.09.25 내용 추가 최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다. Webroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다. DNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자. LetsEncrypt 적용법 (DNS 인증 & AWS) 주의 이 문건은 과거 Hexo 블로그 (2018-03-19) 에서 이동된 문서입니다. 시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다. 무료 인증서를 받기 위해서... 사내정보시스템을 1차 오픈을 위해서 aws 준비, 도메인 설정 등등 이것저것 할일이 많았습니다. 그 중 HTTPS 적용을 위해서 인증서를 알아보고 있었습니다. 개발중에는 인증서를 직접 만들어 사용하였지만, 정식오픈을 할 경우 공식적인 인증을 받은 인증서를 사용해야 했습니다. 그래서 이것저것 찾아보던 중 Certbot을 알게 되었습니…","fields":{"slug":"/letsencrypt/180319_certbot-ssl/"},"frontmatter":{"title":"Certbot으로 무료 인증서 발급","description":null,"date":"2018-03-19T12:18:25.000Z","tags":["LetsEncrypt","Infra"],"series":"LetsEncrypt","previewImage":"letsencrypt_logo.webp","isPrivate":null}}]}},"pageContext":{"tag":"Infra"}},"staticQueryHashes":[],"slicesMap":{}}