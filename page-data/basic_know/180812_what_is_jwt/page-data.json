{"componentChunkName":"component---src-templates-post-jsx","path":"/basic_know/180812_what_is_jwt/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab"}},"markdownRemark":{"id":"aa0ab899-9dd9-5ba0-84e7-cd955ffb7981","excerpt":"주의 이 문건은 과거 Hexo 블로그 (2018-08-12) 에서 이동된 문서입니다. 시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다. 인증과 토큰 그리고 JWT? 최근들어 보안 및 인증을 위해서 JWT를 사용하게 되었다. 그래서 사용만 하다가 이번에 JWT…","html":"<h1 id=\"주의\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98\" aria-label=\"주의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의</h1>\n<h3 id=\"이-문건은-과거-hexo-블로그-2018-08-12-에서-이동된-문서입니다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EB%AC%B8%EA%B1%B4%EC%9D%80-%EA%B3%BC%EA%B1%B0-hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-2018-08-12-%EC%97%90%EC%84%9C-%EC%9D%B4%EB%8F%99%EB%90%9C-%EB%AC%B8%EC%84%9C%EC%9E%85%EB%8B%88%EB%8B%A4\" aria-label=\"이 문건은 과거 hexo 블로그 2018 08 12 에서 이동된 문서입니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 문건은 과거 Hexo 블로그 (2018-08-12) 에서 이동된 문서입니다.</h3>\n<h4 id=\"시간이-지남에-따라-최신-기술과-다를-수-있으니-주의-바랍니다\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EA%B0%84%EC%9D%B4-%EC%A7%80%EB%82%A8%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%B5%9C%EC%8B%A0-%EA%B8%B0%EC%88%A0%EA%B3%BC-%EB%8B%A4%EB%A5%BC-%EC%88%98-%EC%9E%88%EC%9C%BC%EB%8B%88-%EC%A3%BC%EC%9D%98-%EB%B0%94%EB%9E%8D%EB%8B%88%EB%8B%A4\" aria-label=\"시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시간이 지남에 따라 최신 기술과 다를 수 있으니 주의 바랍니다.</h4>\n<hr>\n<br>\n<h1 id=\"인증과-토큰-그리고-jwt\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D%EA%B3%BC-%ED%86%A0%ED%81%B0-%EA%B7%B8%EB%A6%AC%EA%B3%A0-jwt\" aria-label=\"인증과 토큰 그리고 jwt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증과 토큰 그리고 JWT?</h1>\n<p>최근들어 보안 및 인증을 위해서 JWT를 사용하게 되었다.<br>\n그래서 사용만 하다가 이번에 JWT에 대한 개념과 구조, 사용법과 문제점 등을 알아보고자 한다.</p>\n<br>\n<h2 id=\"일반-토큰-기반의-인증과-클레임claim-토큰-기반-인증\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EB%B0%98-%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98%EC%9D%98-%EC%9D%B8%EC%A6%9D%EA%B3%BC-%ED%81%B4%EB%A0%88%EC%9E%84claim-%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D\" aria-label=\"일반 토큰 기반의 인증과 클레임claim 토큰 기반 인증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일반 토큰 기반의 인증과 클레임(Claim) 토큰 기반 인증</h2>\n<p>일반 토큰 기반은 과거에 많이 사용하던 방식이다.<br>\n주로 의미가 없는 문자열(Random string) 기반으로 구성되어 있으며 아래와 같이 표현이 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">a9ace025c90c0da2161075da6ddd3492a2fca776</code></pre></div>\n<p>그리고 사용할 때는 아래와 같은 json으로 보내는 방식으로 사용하게 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"msg\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"response\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a9ace025c90c0da2161075da6ddd3492a2fca776\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"now\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1512446940</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"expired_at\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1512448740</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그런데 이런 일반 토큰은 단순한 문자열이기 때문에 정보를 담거나 할 수 없다.<br>\n크게 보자면 아래와 같은 문제점을 가지고 있다.</p>\n<ul>\n<li>발급된 토큰에 대해서 만료를 시킬 수단이 없다.</li>\n<li>발급된 토큰을 검사하거나 처리할 때마다 DB에 접근하여 검사할 경우 부담이 생긴다.</li>\n<li>사용자 로그아웃 등으로 인한 토큰을 관리할 수 있는 방법이 없다.</li>\n</ul>\n<p>이와 같은 문제를 어느정도 해결할 수 있는 것이 클레임(Claim) 기반 토큰 방식이다.</p>\n<p>클레임(Claim)이란 사용자 정보나 데이터 속성 등을 의미한다.<br>\n그래서 클레임 토큰이라 하면 토큰 안에 저런 정보를 담고 있는 토큰이라 생각하면 된다.<br>\n예를 들면 아래와 같이 정보를 담고 있는 것을 클레임 기반이라 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"id\":\"mhlab\",\n  \"role\":[\"admin\",\"hr\"],\n  \"company\":\"hexlant\"\n}</code></pre></div>\n<p>이런 클레임을 기반한 토큰 중 가장 대표적인 것이 바로 JWT다.</p>\n<br>\n<h2 id=\"what-is-jwt\" style=\"position:relative;\"><a href=\"#what-is-jwt\" aria-label=\"what is jwt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is JWT?</h2>\n<p>JWT(Json Web Token)은 위에서 이야기 한 클레임 기반 토큰이며,<br>\n이름에서 알 수 있는 것처럼 JSON을 이용한 토큰이고 웹 표준(RFC 7519)를 구현한 것이다.<br>\n자세한 것은 <a href=\"https://jwt.io\">JWT 공식페이지</a>에서 확인 가능하다.</p>\n<p>JWT는 <strong>헤더(header)</strong>, <strong>페이로드(payload)</strong>, <strong>서명(signature)</strong> 세 가지로 나눠져 있으며, 아래와 같은 형태로 구성되어 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</code></pre></div>\n<p>각 구분은 <strong>.</strong> 구분자로 나눠 표현되며, 각 값은 <strong>BASE64</strong>로 인코딩 되어 있다.</p>\n<br>\n<h3 id=\"header\" style=\"position:relative;\"><a href=\"#header\" aria-label=\"header permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Header</h3>\n<p>헤더에는 <strong>typ</strong>와 <strong>alg</strong> 두 가지 정보로 구성되어 있다.</p>\n<ul>\n<li>typ * 토큰의 타입을 지정 (jwt)</li>\n<li>alg\n_ 해싱 알고리즘을 지정<br>\n_ 주로 HMAC SHA256 또는 RSA를 사용하며 이 알고리즘은 **서명(signature)**에서 사용한다.</li>\n</ul>\n<p>헤더 형태는 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 322px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2a031f166f09bf1c42e0e58054a3d1bb/fc778/img_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.306748466257666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVR42q2RywrCMBBF+/9f5cqVKxEqiiIqVdQ0Nq+mNp3rpLG7CioOXEImmTOvTFUVtpsN8nyJw/4ArQ1KWeImbnzKXhX/EUKwr4RSClLe8c4yay2ulwuKouAAAetsH2QYHN+MiaeDVpqTafja9/42BIQRZW3b4hcjolFloesA58Ep8Q9LQMvAB1daNwxvYvp0Vw7QLvk+BoZXZQyg1RE03zH4AUgFmq1BkwVoe05JvgLGlhmIfJ+AvgFNc9CpHIb2IZC4ZVMD4dV61ADwDO7ohxnG2UXg6Dq/XUr4z3YH4BPdZhNMKD51kAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img 01\"\n        title=\"\"\n        src=\"/static/2a031f166f09bf1c42e0e58054a3d1bb/fc778/img_01.png\"\n        srcset=\"/static/2a031f166f09bf1c42e0e58054a3d1bb/222b7/img_01.png 163w,\n/static/2a031f166f09bf1c42e0e58054a3d1bb/fc778/img_01.png 322w\"\n        sizes=\"(max-width: 322px) 100vw, 322px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<h3 id=\"payload\" style=\"position:relative;\"><a href=\"#payload\" aria-label=\"payload permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Payload</h3>\n<p>페이로드라 불리는 부분에는 토큰에서 사용할 정보가 담겨있고 이를 위에서 설명한 클레임이라 부르는 것들이 저장되어 있다.<br>\nKey/Value 방식으로 이뤄져있으며 (JSON과 유사) 다수의 정보를 넣을 수 있다.<br>\n이 클레임은 총 세 가지로 나뉜다.</p>\n<br>\n<h4 id=\"등록된-클레임-registered-claim\" style=\"position:relative;\"><a href=\"#%EB%93%B1%EB%A1%9D%EB%90%9C-%ED%81%B4%EB%A0%88%EC%9E%84-registered-claim\" aria-label=\"등록된 클레임 registered claim permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>등록된 클레임 (Registered Claim)</h4>\n<p>등록된 클레임은 토큰 정보를 표현하기 위해 이미 정해진 데이터 종류이며, 모두 선택적으로 작성 가능하다.<br>\n종류는 아래와 같다.</p>\n<ul>\n<li>iss: 토큰 발급자 (issuer)</li>\n<li>sub: 토큰 제목 (subject)</li>\n<li>aud: 토큰 대상자 (audience)</li>\n<li>exp: 토큰의 만료시간 (expiraton) * NumericDate 형식으로 되어있어야 한다 (Ex: 1480849147370)</li>\n<li>nbf: 토큰 활성 날짜 * 이 날짜가 지나기 전 토큰은 활성화 되지 않는다.</li>\n<li>iat: 토큰이 발급된 시간 (issued at) * 이 값을 사용하여 토큰 발급 이후 얼마나 시간이 지났는지를 알 수 있다.</li>\n<li>jti: JWT의 고유 식별자 * 중복 방지를 위해 사용하며, 일회용 토큰(Access Token 등)에 사용한다.</li>\n</ul>\n<br>\n<h4 id=\"공개-클레임-public-claim\" style=\"position:relative;\"><a href=\"#%EA%B3%B5%EA%B0%9C-%ED%81%B4%EB%A0%88%EC%9E%84-public-claim\" aria-label=\"공개 클레임 public claim permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>공개 클레임 (Public Claim)</h4>\n<p>공개 클레임은 서로 충돌이 일어나지 않는 이름을 가지고 있어야한다.<br>\n그래서 <strong>URL</strong> 형태로 작성하며 예시는 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{ \"https://hexlant.com\": true }</code></pre></div>\n<br>\n<h4 id=\"비공개-클레임-private-claim\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EA%B3%B5%EA%B0%9C-%ED%81%B4%EB%A0%88%EC%9E%84-private-claim\" aria-label=\"비공개 클레임 private claim permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>비공개 클레임 (Private Claim)</h4>\n<p>비공개 클레임은 실제 사용을 하는 개발자가 지정하는 것으로 서버와 클라이언트가 서로 정의하여 사용하는 클레임을 의미한다.<br>\n아래와 같이 사용하기도 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{ \"token_type\": \"access\" }</code></pre></div>\n<p>결론적으로 페이로드는 아래와 같이 구성된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 282px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d1018886f5664db219f117ecf3f5b825/cd13f/img_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.25766871165644%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABH0lEQVR42q1Ti07DMAzs/38eQoM+KKwtAlQ6xPpI0jyOy1wQSFQrGiednD58PttKorVCURTYV3tkaYqmecT78Yi2baGUQggB3vvNTObZoLwrUdcV8ixDVdXo+x5dd4DWBhFRdCspOGPJ+kqOlSJidM79iYm1lioieKrigzx/IqxwBYnzFoEm7ds3gQuQWCcOo2jgyOyB7Hhm117z/ArMLaBrxhfyieeK38yaYGx5gR+BcSdJngX8xOR74XgNqFzOw5X8e16wB6ZcEuIIguO7gUK3gHkWt1MmHayN5qcgHakHaS+OwLGA3gtVIcWmdJn3FsEoMu3ECbzMU5d011CQQtMNIx26YX2Bv295y6bDuS1b/AuSeF+NMTC8gqd4IT8AQE/+ny0buiAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img 02\"\n        title=\"\"\n        src=\"/static/d1018886f5664db219f117ecf3f5b825/cd13f/img_02.png\"\n        srcset=\"/static/d1018886f5664db219f117ecf3f5b825/222b7/img_02.png 163w,\n/static/d1018886f5664db219f117ecf3f5b825/cd13f/img_02.png 282w\"\n        sizes=\"(max-width: 282px) 100vw, 282px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br>\n<h3 id=\"signature\" style=\"position:relative;\"><a href=\"#signature\" aria-label=\"signature permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signature</h3>\n<p>서명은 위에서 만든 <strong>Header</strong>와 <strong>Payload</strong> 의 각 값을 <strong>BASE64</strong>로 인코딩 하고,<br>\n그 값을 비밀키를 이용해 헤더에서 정의한 알고리즘으로 (<strong>HS256</strong>이나 <strong>SHA256</strong> 등) 해싱을 하고,<br>\n이 값을 다시 BASE64로 인코딩하여 생성한다.</p>\n<br>\n<h2 id=\"jwt-debugger\" style=\"position:relative;\"><a href=\"#jwt-debugger\" aria-label=\"jwt debugger permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JWT Debugger</h2>\n<p><a href=\"https://jwt.io\">JWT 공식 페이지</a>에서는 JWT를 간단하게 디버깅 해볼 수 있는 기능을 제공한다.<br>\n<a href=\"https://jwt.io/#debugger\">이곳</a>에서 사용 가능하다.</p>\n<p>사이트에서 확인하면 알 수 있는 것처럼 서명에서 키 값을 변경하면 아래의 사진처럼 서명의 <strong>BASE64</strong> 값이 변경되는 것을 확인할 수 있다.</p>\n<p><img src=\"/3426442c3868977bad53e8a34f33e07a/JWT.gif\" alt=\"\"></p>\n<br>\n<h2 id=\"jwt를-사용할-경우\" style=\"position:relative;\"><a href=\"#jwt%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A0-%EA%B2%BD%EC%9A%B0\" aria-label=\"jwt를 사용할 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JWT를 사용할 경우...</h2>\n<p>위에서 알 수 있는 것처럼 만약 토큰 값을 누군가 수정할 경우 아래의 사진처럼 Debuuger에서 확인할 수 있는 것처럼 변조가 된 것을 확인할 수 있다.</p>\n<p><img src=\"/c439b2dffdbe6a152747fc03c69fc882/JWT2.gif\" alt=\"\"></p>\n<p>그리고 JWT 토큰 페이로드에는 <strong>BASE64</strong>로 인코딩만 될 뿐 이것을 다시 디코딩하여 정보를 얻을 수 있다.<br>\n그래서 가급적 토큰에는 <strong>중요 정보</strong>를 담지 않는 것을 추천한다.</p>\n<br>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>이로써 JWT를 알아보았다.<br>\n다음 포스팅에서는 JWT를 어떤 식으로 활용하는지에 대하여 알아보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"toc\"><pre class=\"language-toc\"><code class=\"language-toc\"></code></pre></div>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%A3%BC%EC%9D%98\">주의</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EC%9D%B4-%EB%AC%B8%EA%B1%B4%EC%9D%80-%EA%B3%BC%EA%B1%B0-hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-2018-08-12-%EC%97%90%EC%84%9C-%EC%9D%B4%EB%8F%99%EB%90%9C-%EB%AC%B8%EC%84%9C%EC%9E%85%EB%8B%88%EB%8B%A4\">이 문건은 과거 Hexo 블로그 (2018-08-12) 에서 이동된 문서입니다.</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B8%EC%A6%9D%EA%B3%BC-%ED%86%A0%ED%81%B0-%EA%B7%B8%EB%A6%AC%EA%B3%A0-jwt\">인증과 토큰 그리고 JWT?</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%9D%BC%EB%B0%98-%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98%EC%9D%98-%EC%9D%B8%EC%A6%9D%EA%B3%BC-%ED%81%B4%EB%A0%88%EC%9E%84claim-%ED%86%A0%ED%81%B0-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D\">일반 토큰 기반의 인증과 클레임(Claim) 토큰 기반 인증</a></p>\n</li>\n<li>\n<p><a href=\"#what-is-jwt\">What is JWT?</a></p>\n<ul>\n<li><a href=\"#header\">Header</a></li>\n<li><a href=\"#payload\">Payload</a></li>\n<li><a href=\"#signature\">Signature</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#jwt-debugger\">JWT Debugger</a></p>\n</li>\n<li>\n<p><a href=\"#jwt%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A0-%EA%B2%BD%EC%9A%B0\">JWT를 사용할 경우...</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"JWT(JSON Web Token) 이란?","description":"JWT에 대하여","date":"August 12, 2018","tags":["CS","JWT"],"series":"CS","previewImage":"writing-help.png","isPrivate":null,"writer":null}},"previous":{"fields":{"slug":"/thymeleaf/180608_spring-boot-exception-template/"},"frontmatter":{"title":"Thymeleaf에서 TemplateInputException 발생의 원인","isPrivate":null}},"next":{"fields":{"slug":"/tools/190122_hwp2img-java/"},"frontmatter":{"title":"Java에서 Hwp를 Image로 변환하기 1부 (Java + Python)","isPrivate":null}}},"pageContext":{"id":"aa0ab899-9dd9-5ba0-84e7-cd955ffb7981","previousPostId":"1a1bd2cc-6214-5315-8512-eff2ba4c0e43","nextPostId":"68398856-327f-5521-bdb9-3c23bf1fb331"}},"staticQueryHashes":[],"slicesMap":{}}