{"componentChunkName":"component---src-templates-post-template-index-tsx","path":"/letsencrypt/211105_renew-certbot/","result":{"data":{"cur":{"id":"2566194b-f6e1-5b49-a7af-29358ee6c811","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHt01Eg/8QAFxABAQEBAAAAAAAAAAAAAAAAAQIAIP/aAAgBAQABBQKlMVXP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAIQABAhEg/9oACAEBAAY/Ag1oxz//xAAbEAABBAMAAAAAAAAAAAAAAAARAAEgIUFRkf/aAAgBAQABPyEAUn4szvUf/9oADAMBAAIAAwAAABAwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEAAgMAAAAAAAAAAAAAAAERACEgMXH/2gAIAQEAAT8QCuYMTSdtxKAa1BD3fH//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bb33e76bd9db94cffcc5ccf708664183/7c297/thumbnail.webp 180w,\n/static/bb33e76bd9db94cffcc5ccf708664183/33ecc/thumbnail.webp 360w,\n/static/bb33e76bd9db94cffcc5ccf708664183/df77d/thumbnail.webp 720w,\n/static/bb33e76bd9db94cffcc5ccf708664183/5c666/thumbnail.webp 1080w,\n/static/bb33e76bd9db94cffcc5ccf708664183/95f20/thumbnail.webp 1440w,\n/static/bb33e76bd9db94cffcc5ccf708664183/0b34d/thumbnail.webp 1920w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bb33e76bd9db94cffcc5ccf708664183/98e5d/thumbnail.jpg 180w,\n/static/bb33e76bd9db94cffcc5ccf708664183/543cd/thumbnail.jpg 360w,\n/static/bb33e76bd9db94cffcc5ccf708664183/20801/thumbnail.jpg 720w,\n/static/bb33e76bd9db94cffcc5ccf708664183/b37e7/thumbnail.jpg 1080w,\n/static/bb33e76bd9db94cffcc5ccf708664183/33266/thumbnail.jpg 1440w,\n/static/bb33e76bd9db94cffcc5ccf708664183/aaf92/thumbnail.jpg 1920w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bb33e76bd9db94cffcc5ccf708664183/20801/thumbnail.jpg\"\n            alt=\"thumbnail\"\n            title=\"thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h1 id=\"220925-내용-추가\" style=\"position:relative;\"><a href=\"#220925-%EB%82%B4%EC%9A%A9-%EC%B6%94%EA%B0%80\" aria-label=\"220925 내용 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22.09.25 내용 추가</h1>\n<p>여기서 진행한 방식의 경우 <strong>standalone</strong> 방식이다.<br>\n이 방식은 80포트를 강제로 내려서 인증 대상이 진짜 사용하는 서비스인지를 체크하기에 매우 비효율적인 방식이다.</p>\n<p>최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다.<br>\nWebroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다.<br>\nDNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자.</p>\n<p><a href=\"https://elfinlas.github.io/letsencrypt/220923_use-letsencrypt\">LetsEncrypt 적용법 (DNS 인증 &#x26; AWS)</a></p>\n<br>\n<h2 id=\"letsencrypt-유효기간\" style=\"position:relative;\"><a href=\"#letsencrypt-%EC%9C%A0%ED%9A%A8%EA%B8%B0%EA%B0%84\" aria-label=\"letsencrypt 유효기간 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’sEncrypt 유효기간?</h2>\n<blockquote>\n<p>혹시 아직 Let’sEncrypt를 설치하지 않으신 분이라면 <a href=\"https://elfinlas.github.io/letsencrypt/211105_letsencrypt-install/\">Let’sEncrypt 설치후 AWS에 적용하기</a> 에 설치법을 참고하시길 바란다</p>\n</blockquote>\n<p>Let’sEncrypt는 무료인 대신에 인증서를 주기적으로 인증해줘야 한다<br>\n그래서 보통 이것을 크론탭으로 처리해서 편하게 간다.</p>\n<p>경각심(?)을 위해 직접 갱신하는 분(?)도 봤지만…자동으로 하는게 정신 건강에 좋다..<br>\n물론 LetsEncrypt 팀에서 메일을 주기도 한다. (만료 10일전, 당일) 이렇게?</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsElEQVQoz3WRyY7UMBCG8z7cQeLpuM5lxNyQkFjEBR6A6xxaQhwQ3KaX6YbO5nScxXbs9OYk/48ccRoJS59KVqlcrq+iutFMMoG6rpgLwSzLeDgc6L3nMAwIcRzHPclvAL6TfCD5iuQzki8BvCD53Hv/83w+M/LXK7RSFEL4LMve5nl+m6bprZTyjbX2Yq3l6XT6QfIjgC8APgP4BOA9gA8A3oU7ySNJRrmb8Kc5Ubc1mqbVSqnWGNMCUCQRAMBpmv5LyIfG1lpExh1pj2eE2mEYwngzT85EciA5/mN4yjiOCI9HvbNTEseDEGIoy9IXReGrqgpxCD6LooAQObRq6WxH23XsnWVnDI3R88+6rqNzjsYYRkoprlYrbrfbmc1mM7PebPiwXGK9XnO1fuTvRDAVJeOsYJwdmArJNC+ZJEnwz7IseTweGfV9/2u3290IIe7iOH4dx/Hdfr+/ESL/2jb17FYZi9JcWagLD/pKoa4stKfsPOu6Ye/crCm4jC6XS15V1b2UctE0zUJW1aKu5L3Up6V0pHRAaSfUbqLpLFVb0xpNo1sGDWFCrfW8nLDlv2m2VXnYzij9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/23bd11ee4136eab350fd4b6e5d41bae8/7c297/img_01.webp 180w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/33ecc/img_01.webp 360w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/df77d/img_01.webp 720w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/5c666/img_01.webp 1080w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/95f20/img_01.webp 1440w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/a3b48/img_01.webp 1534w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/23bd11ee4136eab350fd4b6e5d41bae8/e9ea2/img_01.png 180w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/53918/img_01.png 360w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/242a6/img_01.png 720w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/b4ad3/img_01.png 1080w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/89066/img_01.png 1440w,\n/static/23bd11ee4136eab350fd4b6e5d41bae8/68141/img_01.png 1534w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/23bd11ee4136eab350fd4b6e5d41bae8/242a6/img_01.png\"\n            alt=\"img 01\"\n            title=\"img 01\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<br>\n<p>저번에 크론탭으로 해뒀는데 뭔가 잘못 건들여서 실행이 안되어 이번에 다시 셋팅하게 되었고 내용을 정리해서 올려본다.</p>\n<h2 id=\"letsencrypt-crontab-적용해보기\" style=\"position:relative;\"><a href=\"#letsencrypt-crontab-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"letsencrypt crontab 적용해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’sEncrypt Crontab 적용해보기</h2>\n<h3 id=\"갱신-기간-여부-확인\" style=\"position:relative;\"><a href=\"#%EA%B0%B1%EC%8B%A0-%EA%B8%B0%EA%B0%84-%EC%97%AC%EB%B6%80-%ED%99%95%EC%9D%B8\" aria-label=\"갱신 기간 여부 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>갱신 기간 여부 확인</h3>\n<p>LetsEncrypt 인증서는 90일 유효하며, 만료 20일 전부터 갱신이 가능하다.<br>\n갱신이 가능한지 여부는 아래의 명령어를 통해 확인이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> sudo certbot certificates</code></pre></div>\n<p>아래는 커맨드 후 결과 예시이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ubuntu@:~$ sudo certbot certificates\nSaving debug log to /your/letsencrypt/path/letsencrypt.log\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nFound the following certs:\n  Certificate Name: dev.net\n    Serial Number: 22233344URSerialNumber\n    Key Type: RSA\n    Domains: dev.net\n    Expiry Date: 2123-12-31 00:00:00+00:00 (VALID: 89 days)\n    Certificate Path: /your/letsencrypt/path/fullchain.pem\n    Private Key Path: /your/letsencrypt/path/privkey.pem\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</code></pre></div>\n<p>인증 기간이 20일 이하면 가능하다.</p>\n<h3 id=\"갱신-여부-확인\" style=\"position:relative;\"><a href=\"#%EA%B0%B1%EC%8B%A0-%EC%97%AC%EB%B6%80-%ED%99%95%EC%9D%B8\" aria-label=\"갱신 여부 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>갱신 여부 확인</h3>\n<p>먼저 갱신이 제대로 되는지 테스트를 해보려면 아래의 명령어를 수행해본다</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> sudo certbot renew --pre-hook \"service nginx stop\" --post-hook \"service nginx start\" --dry-run</code></pre></div>\n<p>미들웨어는 자신이 맞는거를 사용하면 된다. (필자는 nginx)<br>\n뒤에 —dry-run 이 테스트를 수행하게 해주는 옵션이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ubuntu@:~$ sudo certbot renew --pre-hook \"service nginx stop\" --post-hook \"service nginx start\" --dry-run\nSaving debug log to /your/letsencrypt/path/letsencrypt.log\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nProcessing /your/letsencrypt/path/renewal/dev.net.conf\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nSimulating renewal of an existing certificate for dev.net\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nCongratulations, all simulated renewals succeeded:\n  /your/letsencrypt/path/live/dev.net/fullchain.pem (success)\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</code></pre></div>\n<p>위와 같이 축하한다고 뜨면 인증하는데 문제가 없다는 뜻이다.</p>\n<blockquote>\n<p>PS : 만약 인증이 안된다고 뜨고 에러에 다음과 같은 구문(produced an unexpected error The manual plugin is not working) 이 있는 경우 <a href=\"https://elfinlas.github.io/letsencrypt/211105_renew-certbot\">이곳</a>을 참고하자.</p>\n</blockquote>\n<br>\n<h3 id=\"갱신-처리-with-crontab\" style=\"position:relative;\"><a href=\"#%EA%B0%B1%EC%8B%A0-%EC%B2%98%EB%A6%AC-with-crontab\" aria-label=\"갱신 처리 with crontab permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>갱신 처리 (With crontab)</h3>\n<p>먼저 크론탭을 열어 작성해주고…</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> crontab -e</code></pre></div>\n<p>만약 크론탭이 먼저 선등록 되어 있는지 확인하려면..</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> cat /etc/crontab -> 등록된 크론탭 확인</code></pre></div>\n<p>먼저 난 3개월마다 매 1일에 스크립트를 수행하게 해줬다.<br>\n크론탭 명령어는 아래와 같이 작성했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> 1 0 1 1-12/3 * sudo certbot renew --pre-hook \"service nginx stop\" --post-hook \"service nginx start\" >> /mylog/letsencrypt/log/$(date '+%Y%m%d').log</code></pre></div>\n<p>그리고 마지막으로 크론탭을 재시작 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> sudo service cron restart</code></pre></div>\n<p>그럼 이제 정상적으로 등록이 된 것이다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#letsencrypt-%EC%9C%A0%ED%9A%A8%EA%B8%B0%EA%B0%84\">Let’sEncrypt 유효기간?</a></p>\n</li>\n<li>\n<p><a href=\"#letsencrypt-crontab-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\">Let’sEncrypt Crontab 적용해보기</a></p>\n<ul>\n<li><a href=\"#%EA%B0%B1%EC%8B%A0-%EA%B8%B0%EA%B0%84-%EC%97%AC%EB%B6%80-%ED%99%95%EC%9D%B8\">갱신 기간 여부 확인</a></li>\n<li><a href=\"#%EA%B0%B1%EC%8B%A0-%EC%97%AC%EB%B6%80-%ED%99%95%EC%9D%B8\">갱신 여부 확인</a></li>\n<li><a href=\"#%EA%B0%B1%EC%8B%A0-%EC%B2%98%EB%A6%AC-with-crontab\">갱신 처리 (With crontab)</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"22.09.25 내용 추가 여기서 진행한 방식의 경우 standalone 방식이다. 이 방식은 80포트를 강제로 내려서 인증 대상이 진짜 사용하는 서비스인지를 체크하기에 매우 비효율적인 방식이다. 최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다. Webroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다. DNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자. LetsEncrypt 적용법 (DNS 인증 & AWS) Let’sEncrypt 유효기간? 혹시 아직 Let’sEncrypt를 설치하지 않으신 분이라면 Let’sEncrypt 설치후 AWS에 적용하기 에 설치법을 참고하시길 바란다 Let’sEncrypt는 무료인 대신에 인증서를 주기적으로 인증해줘야 한다 그래서 보통 이것을 크론탭으로 처리해서 편하게 간다. 경각심(?)을 위해 직접 갱신하는 분(?)도…","frontmatter":{"date":"2021.11.05","title":"Let'sEncrypt 자동 갱신 처리하기","categories":"letsencrypt","emoji":"📜"},"fields":{"slug":"/letsencrypt/211105_renew-certbot/"}},"next":{"id":"2d0422b5-7da2-5d90-80ae-03f6b55dc41c","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHt01Eg/8QAFxABAQEBAAAAAAAAAAAAAAAAAQIAIP/aAAgBAQABBQKlMVXP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAIQABAhEg/9oACAEBAAY/Ag1oxz//xAAbEAABBAMAAAAAAAAAAAAAAAARAAEgIUFRkf/aAAgBAQABPyEAUn4szvUf/9oADAMBAAIAAwAAABAwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEAAgMAAAAAAAAAAAAAAAERACEgMXH/2gAIAQEAAT8QCuYMTSdtxKAa1BD3fH//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bb33e76bd9db94cffcc5ccf708664183/7c297/thumbnail.webp 180w,\n/static/bb33e76bd9db94cffcc5ccf708664183/33ecc/thumbnail.webp 360w,\n/static/bb33e76bd9db94cffcc5ccf708664183/df77d/thumbnail.webp 720w,\n/static/bb33e76bd9db94cffcc5ccf708664183/5c666/thumbnail.webp 1080w,\n/static/bb33e76bd9db94cffcc5ccf708664183/95f20/thumbnail.webp 1440w,\n/static/bb33e76bd9db94cffcc5ccf708664183/0b34d/thumbnail.webp 1920w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bb33e76bd9db94cffcc5ccf708664183/98e5d/thumbnail.jpg 180w,\n/static/bb33e76bd9db94cffcc5ccf708664183/543cd/thumbnail.jpg 360w,\n/static/bb33e76bd9db94cffcc5ccf708664183/20801/thumbnail.jpg 720w,\n/static/bb33e76bd9db94cffcc5ccf708664183/b37e7/thumbnail.jpg 1080w,\n/static/bb33e76bd9db94cffcc5ccf708664183/33266/thumbnail.jpg 1440w,\n/static/bb33e76bd9db94cffcc5ccf708664183/aaf92/thumbnail.jpg 1920w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bb33e76bd9db94cffcc5ccf708664183/20801/thumbnail.jpg\"\n            alt=\"thumbnail\"\n            title=\"thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h1 id=\"220925-내용-추가\" style=\"position:relative;\"><a href=\"#220925-%EB%82%B4%EC%9A%A9-%EC%B6%94%EA%B0%80\" aria-label=\"220925 내용 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22.09.25 내용 추가</h1>\n<p>여기서 진행한 방식의 경우 <strong>standalone</strong> 방식이다.<br>\n이 방식은 80포트를 강제로 내려서 인증 대상이 진짜 사용하는 서비스인지를 체크하기에 매우 비효율적인 방식이다.</p>\n<p>최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다.<br>\nWebroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다.<br>\nDNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자.</p>\n<p><a href=\"https://elfinlas.github.io/letsencrypt/220923_use-letsencrypt\">LetsEncrypt 적용법 (DNS 인증 &#x26; AWS)</a></p>\n<br>\n<h2 id=\"letsencrypt\" style=\"position:relative;\"><a href=\"#letsencrypt\" aria-label=\"letsencrypt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’sEncrypt?</h2>\n<p>이번에 서비스를 준비하면서 EC2에서 하나씩 올려서 해보기로 했다.</p>\n<p>사실 AWS 기반이라 로드벨런서에 인증서 물리면 되는데…<br>\n전에 해보던게 생각 나기도 했고..</p>\n<p>일단 서비스 규모가 더 커지면 그 때 안정적으로 가고 지금은 빌드업 수준으로 해보기로 했다.</p>\n<p>일단 뭐 <strong>Let’sEncrypt</strong>에 대한 자세한 것은 이미 알고 있다는 가정 하에 바로 설치법부터 들어간다.</p>\n<p>그 전에 환경은..</p>\n<blockquote>\n<p>AWS 기반 EC2 Ubuntu 20.04 LTS 기준으로 작업을 진행<br>\nNginx 사용 &#x3C;- 중요하진 않음</p>\n</blockquote>\n<br>\n<h3 id=\"part-1-설치-커맨드\" style=\"position:relative;\"><a href=\"#part-1-%EC%84%A4%EC%B9%98-%EC%BB%A4%EB%A7%A8%EB%93%9C\" aria-label=\"part 1 설치 커맨드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Part 1 설치 커맨드</h3>\n<p>아래의 커맨드로 하나씩 진행하였다</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt update\nsudo snap install core; sudo snap refresh core\nsudo apt-get remove certbot\nsudo snap install --classic certbot # 설치\nsudo ln -s /snap/bin/certbot /usr/bin/certbot # 링크\nsudo certbot certonly --email [인증에 사용할 이메일] --standalone -d [적용할 도메인]  실행</code></pre></div>\n<p>커맨드 설명은 아래와 같다</p>\n<p>1번 : 설치 전 업데이트 처리<br>\n2번 : 필요한 것들 설치<br>\n3번 : 기존에 설치된 certbot이 있다면 제거<br>\n4번 : certbot 설치<br>\n5번 : 심볼릭 링크 생성<br>\n6번 인증서 만드는데 email은 인증에 대한 대표자 메일(필자는 주로 쓰는 메일 사용)을 적고 -d는 적용할 도메인을 적어준다 (elfinlas.io.xx 등)</p>\n<p>6번 명령어 이후 아래와 같이 뜨면 정상적으로 된 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ubuntu@ip$ sudo certbot certonly --email test@test.com --standalone -d dev.net\nSaving debug log to /your/some/path/letsencrypt.log\nRequesting a certificate for dev.net\n\nSuccessfully received certificate.\nCertificate is saved at: /your/some/path/letsencrypt/live/dev.net/fullchain.pem\nKey is saved at:         /your/some/path/letsencrypt/live/dev.net/privkey.pem\nThis certificate expires on 9999-99-99. &lt;= 여긴 인증기간은 3개월인가 줘서 사람마다 틀림\nThese files will be updated when the certificate renews.\nCertbot has set up a scheduled task to automatically renew this certificate in the background.\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nIf you like Certbot, please consider supporting our work by:\n * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n * Donating to EFF:                    https://eff.org/donate-le\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n</code></pre></div>\n<blockquote>\n<p>커맨드에 대해 좀더 설명이 필요한 분은 <a href=\"https://certbot.eff.org/lets-encrypt/ubuntufocal-other\">이곳</a> 에서 직접 확인해보자</p>\n</blockquote>\n<h3 id=\"part-2-aws-작업\" style=\"position:relative;\"><a href=\"#part-2-aws-%EC%9E%91%EC%97%85\" aria-label=\"part 2 aws 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Part 2 AWS 작업</h3>\n<p>이렇게 진행하고 나서 AWS 콘솔로 가준다.<br>\n콘솔에서는 다음과 같은 절차로 진행한다.</p>\n<ol>\n<li>AWS 콘솔에서 Certificate Manager 이동</li>\n<li>인증서 선택에서 각 항목에 해당 하는 값을 가져온다. (아까 생성한 pem 파일을 사용)\n<ol>\n<li>인증서 본문 => cert.pem</li>\n<li>인증서 프라이빗 => privkey.pem</li>\n<li>인증서 체인 => fullchain.pem</li>\n</ol>\n</li>\n<li>마무리 하면 ec2에 접속해서 콘솔에서 아랴와 같이 nginx를 재시작 해준다.\n<ol>\n<li>sudo service nginx restart</li>\n</ol>\n</li>\n</ol>\n<br>\n<p>아마 다른 블로그에서는 설치법만 나오고 보통 AWS 설명도 약간 부실했는데 직접 찾아보고 적용한 방법이다.</p>\n<p>그리고 기반은 nginx 인데 아파치 쓰거나 다른 미들웨어 쓰시는 분들은 똑같이 서비스만 재시작 하면 된다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#letsencrypt\">Let’sEncrypt?</a></p>\n<ul>\n<li><a href=\"#part-1-%EC%84%A4%EC%B9%98-%EC%BB%A4%EB%A7%A8%EB%93%9C\">Part 1 설치 커맨드</a></li>\n<li><a href=\"#part-2-aws-%EC%9E%91%EC%97%85\">Part 2 AWS 작업</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"2021.11.04","title":"Let'sEncrypt 설치후 AWS에 적용하기","categories":"letsencrypt","emoji":"📜"},"fields":{"slug":"/letsencrypt/211105_letsencrypt-install/"}},"prev":{"id":"3183e4df-fdca-56fe-b1fd-42790afd4a53","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHt01Eg/8QAFxABAQEBAAAAAAAAAAAAAAAAAQIAIP/aAAgBAQABBQKlMVXP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAIQABAhEg/9oACAEBAAY/Ag1oxz//xAAbEAABBAMAAAAAAAAAAAAAAAARAAEgIUFRkf/aAAgBAQABPyEAUn4szvUf/9oADAMBAAIAAwAAABAwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEAAgMAAAAAAAAAAAAAAAERACEgMXH/2gAIAQEAAT8QCuYMTSdtxKAa1BD3fH//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bb33e76bd9db94cffcc5ccf708664183/7c297/thumbnail.webp 180w,\n/static/bb33e76bd9db94cffcc5ccf708664183/33ecc/thumbnail.webp 360w,\n/static/bb33e76bd9db94cffcc5ccf708664183/df77d/thumbnail.webp 720w,\n/static/bb33e76bd9db94cffcc5ccf708664183/5c666/thumbnail.webp 1080w,\n/static/bb33e76bd9db94cffcc5ccf708664183/95f20/thumbnail.webp 1440w,\n/static/bb33e76bd9db94cffcc5ccf708664183/0b34d/thumbnail.webp 1920w\"\n              sizes=\"(max-width: 720px) 100vw, 720px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bb33e76bd9db94cffcc5ccf708664183/98e5d/thumbnail.jpg 180w,\n/static/bb33e76bd9db94cffcc5ccf708664183/543cd/thumbnail.jpg 360w,\n/static/bb33e76bd9db94cffcc5ccf708664183/20801/thumbnail.jpg 720w,\n/static/bb33e76bd9db94cffcc5ccf708664183/b37e7/thumbnail.jpg 1080w,\n/static/bb33e76bd9db94cffcc5ccf708664183/33266/thumbnail.jpg 1440w,\n/static/bb33e76bd9db94cffcc5ccf708664183/aaf92/thumbnail.jpg 1920w\"\n            sizes=\"(max-width: 720px) 100vw, 720px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bb33e76bd9db94cffcc5ccf708664183/20801/thumbnail.jpg\"\n            alt=\"thumbnail\"\n            title=\"thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h1 id=\"220925-내용-추가\" style=\"position:relative;\"><a href=\"#220925-%EB%82%B4%EC%9A%A9-%EC%B6%94%EA%B0%80\" aria-label=\"220925 내용 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>22.09.25 내용 추가</h1>\n<p>여기서 진행한 방식의 경우 <strong>standalone</strong> 방식이다.<br>\n이 방식은 80포트를 강제로 내려서 인증 대상이 진짜 사용하는 서비스인지를 체크하기에 매우 비효율적인 방식이다.</p>\n<p>최근 방식의 경우 Webroot나 DNS 인증을 사용하는데, 이번에 DNS 인증에 대하여 포스팅을 진행했다.<br>\nWebroot도 사용하지만 와일드카드(ex: *.api.com 등) 인증이 불가하기 때문에 DNS 인증을 사용할 것을 추천한다.<br>\nDNS 인증 방식이 필요한 경우 아래 포스팅을 참고하자.</p>\n<p><a href=\"https://elfinlas.github.io/letsencrypt/220923_use-letsencrypt\">LetsEncrypt 적용법 (DNS 인증 &#x26; AWS)</a></p>\n<br>\n<h2 id=\"letsencrypt-갱신이-불가능\" style=\"position:relative;\"><a href=\"#letsencrypt-%EA%B0%B1%EC%8B%A0%EC%9D%B4-%EB%B6%88%EA%B0%80%EB%8A%A5\" aria-label=\"letsencrypt 갱신이 불가능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’sEncrypt 갱신이 불가능??</h2>\n<p>Let’sEncrypt를 적용하고 나서 갱신 테스트를 해보는데 이상한 에러를 마주했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Attempting to renew cert (dev.net) from /your/letsencrypt/path/renewal/dev.net.conf produced an unexpected error: The manual plugin is not working; there may be problems with your existing configuration.\n\nThe error was: PluginError('An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively.'). Skipping.\nAll renewal attempts failed. The following certs could not be renewed:\n  /your/letsencrypt/path/live/dev.net/fullchain.pem (failure)</code></pre></div>\n<p>아 뭐가 이렇게 안되지? 라고 삽질했었으나…<br>\n이것저것 찾아본 결과 아래의 문제가 원인이었다</p>\n<blockquote>\n<p>원인은 갱신을 auto 모드가 아닌 manual 모드로 진행한 문제</p>\n</blockquote>\n<p>원인을 제공했던 명령어는 다음과 같다</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo certbot certonly --manual --preferred-challenges=dns --email test@test.com --server https://acme-v02.api.letsencrypt.org/directory --agree-tos --debug --no-bootstrap -d dev.net</code></pre></div>\n<p><strong>메뉴얼 모드로 만든 인증서는 자동으로 갱신이 불가능하다.</strong><br>\n그래서 난…다시 오토 모드로 새로 만들었다…</p>\n<p>이 문제를 겪으신 분은 다시 오토 모드로 빠르게 시작하는걸…추천한다..\n난 어떻게 해보려다가 1시간 말아먹었다…</p>\n<ul>\n<li><a href=\"https://darkstart.tistory.com/109?category=871909\">참고 블로그</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#letsencrypt-%EA%B0%B1%EC%8B%A0%EC%9D%B4-%EB%B6%88%EA%B0%80%EB%8A%A5\">Let’sEncrypt 갱신이 불가능??</a></li>\n</ul>\n</div>","frontmatter":{"date":"2021.11.05","title":"Let'sEncrypt 갱신이 불가할 때 (produced an unexpected error The manual plugin is not working)","categories":"letsencrypt","emoji":"📜"},"fields":{"slug":"/letsencrypt/211105_letscert-fail/"}},"site":{"siteMetadata":{"siteUrl":"https://elfinlas.github.io","comments":{"utterances":{"repo":"elfinlas/blog_utterances"}},"projects":[{"title":"마와셀(웹) - 와인 가격 비교","description":"와인 가격 비교 서비스","techStack":["Typescript","React","Next.Js","Nest.Js"],"thumbnailUrl":"myc_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223393940649","github":"","web":"https://appmyc.info","googlePlay":"","appStore":""}},{"title":"마와셀(엡) - 와인과 셀러 관리, 시음노트","description":"보유한 와인의 관리, 시음노트 작성, 보유 와인 셀러의 관리 어플리케이션","techStack":["Dart","Flutter","hive","provider"],"thumbnailUrl":"myc_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223531933037","github":"","web":"","googlePlay":"https://play.google.com/store/apps/details?id=dev.mhlab.myc","appStore":"https://itunes.apple.com/kr/app/apple-store/6474965246"}},{"title":"흑우집합소(웹) - 로또번호 추천 서비스","description":"로또번호 추천 서비스","techStack":["Typescript","React","Next.Js","Nest.Js"],"thumbnailUrl":"bcow_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223059966682","github":"","web":"https://bcow.world/","googlePlay":"","appStore":""}},{"title":"흑우집합소(앱) - 로또번호 추천 서비스","description":"로또번호 추천 서비스","techStack":["Dart","Flutter","drift","provider"],"thumbnailUrl":"bcow_icon.png","links":{"post":"https://blog.naver.com/wisseraph/223232966579","github":"","web":"","googlePlay":"https://play.google.com/store/apps/details?id=dev.mhlab.bcow_world","appStore":"https://itunes.apple.com/kr/app/apple-store/6470312130"}}]}}},"pageContext":{"slug":"/letsencrypt/211105_renew-certbot/","nextSlug":"/letsencrypt/211105_letsencrypt-install/","prevSlug":"/letsencrypt/211105_letscert-fail/"}},"staticQueryHashes":["1186322783","1321405810","3649515864"]}