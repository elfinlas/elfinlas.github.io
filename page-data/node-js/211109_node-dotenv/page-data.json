{"componentChunkName":"component---src-templates-blog-post-js","path":"/node-js/211109_node-dotenv/","result":{"data":{"site":{"siteMetadata":{"title":"MHLab blog","author":"MHLab","siteUrl":"https://elfinlas.github.io","comment":{"disqusShortName":"","utterances":"elfinlas/blog_utterances"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"bb0aebf4-48f8-5a98-ae11-2acbf2dced33","excerpt":"Node에서 환경 변수를 사용하는 법? (설정 파일로 관리하기) 내가 Spring boot로 개발할 때는 application.yml에 설정을 넣고 개발을 했다. 그러다가 설정에 넣은 값에 변경이 필요할 경우 서버를 내렸다가 올려야 하는 문제가 생겼다. (물론 이중화 되어 있다 하더라도 이렇게 하는건 비효율적..) 그래서 Spring config server를 사용해서 처리하였다. Node.js…","html":"<h2 id=\"node에서-환경-변수를-사용하는-법-설정-파일로-관리하기\" style=\"position:relative;\"><a href=\"#node%EC%97%90%EC%84%9C-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B2%95-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"node에서 환경 변수를 사용하는 법 설정 파일로 관리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Node에서 환경 변수를 사용하는 법? (설정 파일로 관리하기)</h2>\n<p>내가 Spring boot로 개발할 때는 application.yml에 설정을 넣고 개발을 했다.<br>\n그러다가 설정에 넣은 값에 변경이 필요할 경우 서버를 내렸다가 올려야 하는 문제가 생겼다.<br>\n(물론 이중화 되어 있다 하더라도 이렇게 하는건 비효율적..)</p>\n<p>그래서 Spring config server를 사용해서 처리하였다.<br>\nNode.js는 이런 비슷한게 있나 찾아보다가…<br>\n아주 똑같지 않지만 설정 파일을 외부에 두고 사용할 수 있는 것을 찾았다.<br>\n(Node를 첨 다뤄보니 이런게 있는줄 몰랐다)</p>\n<br>\n<h3 id=\"dotenv\" style=\"position:relative;\"><a href=\"#dotenv\" aria-label=\"dotenv permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dotenv</h3>\n<p>먼저 설치를 진행한다.<br>\n(yarn 을 사용하였는데 npm도 똑같다)</p>\n<blockquote>\n<p>yarn add dotenv</p>\n</blockquote>\n<hr>\n<h3 id=\"설정-내용을-선언\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95-%EB%82%B4%EC%9A%A9%EC%9D%84-%EC%84%A0%EC%96%B8\" aria-label=\"설정 내용을 선언 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정 내용을 선언</h3>\n<p>설정 파일을 만드는 형태는 두 가지가 있다.</p>\n<blockquote>\n<p>여기서는 ES6 문법으로 설명한다. (CommonJS 는 간략하게만 표기..)</p>\n</blockquote>\n<h3 id=\"1-env-파일-사용\" style=\"position:relative;\"><a href=\"#1-env-%ED%8C%8C%EC%9D%BC-%EC%82%AC%EC%9A%A9\" aria-label=\"1 env 파일 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. .env 파일 사용</h3>\n<p>프로젝트 내에 (보통은 자신 프로젝트 루트에) .env 파일을 생성한다<br>\n그리고 아래와 같이 설정을 기재한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#SERVER CONFIG\n\nSERVER_PORT = 3001\nSERVER_NAME = HELLO_SERVER\nSERVER_DIS = 'HELLO_SERVER';</code></pre></div>\n<p>그리고 불러올 js에서는 아래와 같이 사용한다</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//CommonJS</span>\n<span class=\"token comment\">//require(\"dotenv\").config();</span>\n\n<span class=\"token comment\">//ES6</span>\n<span class=\"token keyword\">import</span> dotenv <span class=\"token keyword\">from</span> <span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">;</span>\ndotenv<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//1 -> config 호출</span>\n\n<span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_PORT</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">checkTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SERVER_NAME = '</span>  <span class=\"token operator\">+</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SERVER_DES = '</span>  <span class=\"token operator\">+</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_DES</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>주의할 점은 <strong>1번</strong> config() 호출 전에 process.env를 사용하면 에러가 난다. (ES6, CommonJS 둘다 동일)<br>\n그리고 .env 파일의 경로가 다른 곳에 있는 경우 아래와 같이 config 함수를 수정하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//CommonJS</span>\n<span class=\"token comment\">//require(\"dotenv\").config({path:'/your/env/path/.env.dev'});</span>\n\n<span class=\"token comment\">//ES6</span>\n<span class=\"token keyword\">import</span> dotenv <span class=\"token keyword\">from</span> <span class=\"token string\">'dotenv'</span>\ndotenv<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/your/env/path/.env.dev'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>단 .env 파일이 존재하는 경우 위 내용은 적용이 안된다. (기존 .env 파일 따라감)</strong></p>\n<blockquote>\n<p>참고로 <strong>SERVER_DIS</strong> 출력해보면 SERVER_DES = ‘HELLO SERVER’; 와 같이 따옴표가 같이 출력된다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SERVER_NAME = '</span>  <span class=\"token operator\">+</span> <span class=\"token keyword\">typeof</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SERVER_DES = '</span>  <span class=\"token operator\">+</span> <span class=\"token keyword\">typeof</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_DES</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SERVER_NAME = '</span>  <span class=\"token operator\">+</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SERVER_DES = '</span>  <span class=\"token operator\">+</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_DES</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">///Output</span>\n\n<span class=\"token constant\">SERVER_NAME</span> <span class=\"token operator\">=</span> string\n<span class=\"token constant\">SERVER_NAME</span> <span class=\"token operator\">=</span> string\n\n<span class=\"token constant\">SERVER_NAME</span> <span class=\"token operator\">=</span> <span class=\"token constant\">HELLO</span> <span class=\"token constant\">SERVER</span>\n<span class=\"token constant\">SERVER_DES</span> <span class=\"token operator\">=</span> <span class=\"token string\">'HELLO SERVER'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h3 id=\"2-configjs-등-js-파일로-사용\" style=\"position:relative;\"><a href=\"#2-configjs-%EB%93%B1-js-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"2 configjs 등 js 파일로 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. config.js 등 js 파일로 사용</h3>\n<p>이건 <strong>.env</strong> 랑 비슷하지만 사용법은 약간 다른데 먼저 원하는 곳에 config.js 파일을 생성해주고 그곳에 설정을 담는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> configData\n\nconfigData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">SERVER_PORT</span><span class=\"token operator\">:</span> <span class=\"token number\">3001</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//ES6 방식</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span> configData <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//Common JS 방식</span>\n<span class=\"token comment\">// module.exports = configData;</span></code></pre></div>\n<p>그리고 필요한 곳에서 다음과 같이 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//ES6</span>\n<span class=\"token keyword\">import</span> secondConfig  <span class=\"token keyword\">from</span> <span class=\"token string\">\"./config.js\"</span>\n\n<span class=\"token operator\">...</span><span class=\"token punctuation\">.</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'process.env.PORT = '</span> <span class=\"token operator\">+</span> secondConfig<span class=\"token punctuation\">.</span>configData<span class=\"token punctuation\">.</span><span class=\"token constant\">SERVER_PORT</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>만약 Babel을 사용한 ES6 사용을 한다면 js 확장자는 무시해도 되지만, 미 사용시 .js 확장자를 붙여줘야 한다.</p>\n<p>그리고 저기 나온 예제에 있는 export 방식 말고도 여러 방식이 있다.<br>\n본문 하단의 링크를 참고하자.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://medium.com/@wonjong_oh/es6%EC%97%90%EC%84%9C-import-export-%EC%98%AC%EB%B0%94%EB%A5%B4%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B3%A0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-a60acd161051\">Import와 export</a></p>","frontmatter":{"title":"NodeJs에서 환경 변수 또는 설정파일을 이용하여 서버 속성 구성하기","date":"November 09, 2021"}}},"pageContext":{"slug":"/node-js/211109_node-dotenv/","previous":{"fields":{"slug":"/node-js/211109_vscode-nodemodule/"},"frontmatter":{"title":"VSCode에서 노드 모듈이 이상한 곳을 가리킬 때.. (.../Library/Caches/typescript/.../node_modules/@types/.....)"}},"next":{"fields":{"slug":"/tools/211109_local-install-hexo/"},"frontmatter":{"title":"Hexo를 글로벌이 아닌 로컬에 설치하는 법"}}}},"staticQueryHashes":["3128451518","903436796"]}